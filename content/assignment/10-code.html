---
title: "Práctica 10. Diagnóstico de la calidad de los modelos: supuestos y transformación de variables"
subtitle: "Estadistica Multivariada - Sociología FACSO Universidad de Chile"
author: "Valentina Andrade"
linktitle: "Práctica 10. Diagnóstico de la calidad de los modelos: supuestos y transformación de variables"
date: "2021-06-29"
class_date: "2021-06-29"
citeproc: false
bibliography: ../../static/bib/references.bib
csl: ../../static/bib/chicago-syllabus-no-bib.csl
output:
  blogdown::html_page:
    template: ../../pandoc/toc-title_html.template
    toc: true
    highlight: tango
    number_sections: FALSE
menu:
  class:
    parent: Practicas
    weight: 10
type: docs
weight: 1
editor_options:
  chunk_output_type: console
---

<!-- BLOGDOWN-HEAD -->
<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>
<script src="/rmarkdown-libs/clipboard/clipboard.min.js"></script>
<link href="/rmarkdown-libs/primer-tooltips/build.css" rel="stylesheet" />
<link href="/rmarkdown-libs/klippy/css/klippy.min.css" rel="stylesheet" />
<script src="/rmarkdown-libs/klippy/js/klippy.min.js"></script>
<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>
<!-- /BLOGDOWN-HEAD -->

<h2>Índice</h2>
<div id="TOC">
<ul>
<li><a href="#objetivo">Objetivo</a></li>
<li><a href="#librerías">Librerías</a></li>
<li><a href="#datos">Datos</a>
<ul>
<li><a href="#procesamiento">Procesamiento</a></li>
<li><a href="#explorar-datos">Explorar datos</a></li>
</ul></li>
<li><a href="#introducción">Introducción</a>
<ul>
<li><a href="#cómo-evaluar-la-robustez-y-ajuste-de-modelos-en-r">¿Cómo evaluar la robustez y ajuste de modelos en <strong>R</strong>?</a></li>
</ul></li>
<li><a href="#diagnóstico-de-la-calidad-de-los-modelos">Diagnóstico de la calidad de los modelos</a>
<ul>
<li><a href="#supuestos">1. Supuestos</a>
<ul>
<li><a href="#linealidad">1.1 Linealidad</a></li>
<li><a href="#homocedasticidad">1.2 Homocedasticidad</a></li>
</ul></li>
<li><a href="#normalidad">1.3 Normalidad de residuos</a>
<ul>
<li><a href="#independencia">1.4 Independencia</a></li>
<li><a href="#multicolinealidad">1.5 Multicolinealidad</a></li>
</ul></li>
</ul></li>
<li><a href="#check-for-multicollinearity">Check for Multicollinearity</a>
<ul>
<li><a href="#outliers">1.6 Casos influyentes</a></li>
<li><a href="#fit">2. Ajuste del modelo</a>
<ul>
<li><a href="#transformar-predictor-al-cuadrado-o-cubo">2.1 Transformar predictor al cuadrado o cubo</a></li>
<li><a href="#logaritmizar-variable-dependiente">2.2 Logaritmizar variable dependiente</a></li>
<li><a href="#dicotomizar-variable-dependiente">2.3 Dicotomizar variable dependiente</a></li>
<li><a href="#errores-estándares-robustos">2.4 Errores estándares robustos</a></li>
<li><a href="#creación-de-índices">2.5 Creación de índices</a></li>
<li><a href="#eliminar-casos-influyentes">2.6 Eliminar casos influyentes</a></li>
</ul></li>
<li><a href="#comparación">3. Comparación</a></li>
</ul></li>
<li><a href="#referencias">Referencias</a></li>
</ul>
</div>

<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('right', 'bottom', 'auto', '1', 'Copy code', 'Copied!');
</script>
<div id="objetivo" class="section level1">
<h1>Objetivo</h1>
<p>La siguiente práctica tiene el objetivo de introducir a los estudiantes en los <strong>supuestos y robustez del modelo de regresión</strong>. Por esta razón, volveremos a algunos de los contenidos previos relacionados con la estimación, análisis de residuos y ajuste. Para ello, utilizaremos los datos de la encuesta <a href="https://movid-impact.netlify.app/">MOVID-IMPACT</a> con el objetivo de analizar los determinantes de la <strong>Fatiga pandémica</strong></p>
</div>
<div id="librerías" class="section level1">
<h1>Librerías</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, magrittr,</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>               summarytools, sjPlot, performance, see)</span></code></pre></div>
</div>
<div id="datos" class="section level1">
<h1>Datos</h1>
<p><a href="https://movid-impact.netlify.app/">MOVID-IMPACT</a> es una encuesta transversal telefónica realizada por el equipo <a href="https://movid19.cl/">CoV-IMPACT-C</a> del proyecto <a href="https://movid19.cl/somos/cov-impact">ANID N°960</a>.El objetivo de la encuesta es conocer el impacto en la salud y socioeconómico que ha tenido la pandemia sobre la población chilena.</p>
<p>Se cargan los datos directamente desde el sitio de la encuesta</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>movid <span class="ot">&lt;-</span> haven<span class="sc">::</span><span class="fu">read_dta</span>(<span class="fu">url</span>(<span class="st">&quot;https://movid-impact.netlify.app/input/data/MOVID-IMPACT.dta&quot;</span>))</span></code></pre></div>
<div id="procesamiento" class="section level2">
<h2>Procesamiento</h2>
<p>Filtraremos los datos solo con la información de los encuestados, seleccionaremos las variables de interés para el práctico y recodificaremos los casos perdidos (para repasar, <a href="https://www.youtube.com/watch?v=APzU10EMMjg&amp;t=321s">ver tutorial de dplyr</a>)</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>movid_proc <span class="ot">&lt;-</span> movid <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_encuesta) <span class="sc">%&gt;%</span>  <span class="co">#Para calcular tamano de hogar</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tamanohogar =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(entrevistado <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="co">#Filtrar solo a entrevistados</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sexo, edad, <span class="at">trabaja =</span> g1,<span class="at">ingreso =</span> g47_monto, <span class="at">tingreso=</span> g48, tamanohogar, <span class="fu">starts_with</span>(<span class="st">&quot;c2&quot;</span>), <span class="at">fatiga =</span> f5_3) <span class="sc">%&gt;%</span> <span class="co">#Seleccionar variabes</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="sc">-</span>tingreso), <span class="sc">~</span>car<span class="sc">::</span><span class="fu">recode</span>(.,<span class="st">&quot;c(8,9) = NA&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tingreso =</span> car<span class="sc">::</span><span class="fu">recode</span>(tingreso,<span class="st">&quot;c(98,99) = NA&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(sexo, trabaja, <span class="fu">starts_with</span>(<span class="st">&quot;c2&quot;</span>), tingreso, <span class="sc">-</span>fatiga), <span class="sc">~</span><span class="fu">as_factor</span>(.))</span></code></pre></div>
</div>
<div id="explorar-datos" class="section level2">
<h2>Explorar datos</h2>
<p>Los datos utilizados tienen 1261 observaciones y 11 variables, las cuales serán descritas en la siguiente tabla</p>
<p><strong>Tabla N°1</strong> Estadísticos descriptivos de base de datos procesadas de MOVID-IMPACT</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span>(<span class="fu">dfSummary</span>(movid_proc, <span class="at">headings =</span> <span class="cn">FALSE</span>, <span class="at">method =</span> <span class="st">&quot;render&quot;</span>))</span></code></pre></div>
<p>Fuente: Elaboración propia en base a MOVID-IMPACT (n=909 casos)</p>
<table>
<colgroup>
<col width="23%" />
<col width="26%" />
<col width="22%" />
<col width="15%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Variable</th>
<th align="left">Etiqueta</th>
<th align="left">Estadísticas / Valores</th>
<th align="left">Frec. (% sobre válidos)</th>
<th align="left">Gráfico</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">sexo<br />
[factor]</td>
<td align="left">Sexo</td>
<td align="left">1. Hombre<br />
2. Mujer</td>
<td align="left">481 (38.1%)<br />
780 (61.9%)</td>
<td align="left">IIIIIII<br />
IIIIIIIIIIII</td>
</tr>
<tr class="even">
<td align="left">edad<br />
[numeric]</td>
<td align="left">Edad</td>
<td align="left">Media (d-s) : 48.8 (18.2)<br />
min &lt; mediana &lt; max:<br />
18 &lt; 48 &lt; 96<br />
RI (CV) : 30 (0.4)</td>
<td align="left">75 valores distintos</td>
<td align="left"><br />
  : .<br />
  : : : : . .<br />
: : : : : : : .<br />
: : : : : : : :<br />
: : : : : : : : :</td>
</tr>
<tr class="odd">
<td align="left">trabaja<br />
[factor]</td>
<td align="left">Durante la semana pasada, Â¿trabajÃ³ al
menos una hora, sin considerar los
quehace</td>
<td align="left">1. Sí<br />
2. No</td>
<td align="left">612 (48.5%)<br />
649 (51.5%)</td>
<td align="left">IIIIIIIII<br />
IIIIIIIIII</td>
</tr>
<tr class="even">
<td align="left">ingreso<br />
[numeric]</td>
<td align="left">Monto de ingreso total de su hogar el
mes de noviembre de 2020</td>
<td align="left">Media (d-s) : 679414.7 (836325.7)<br />
min &lt; mediana &lt; max:<br />
0 &lt; 4e+05 &lt; 1.2e+07<br />
RI (CV) : 450000 (1.2)</td>
<td align="left">151 valores distintos</td>
<td align="left"><br />
:<br />
:<br />
:<br />
:<br />
: .</td>
</tr>
<tr class="odd">
<td align="left">tingreso<br />
[factor]</td>
<td align="left">Tramo de ingreso total de su hogar el
mes de noviembre de 2020</td>
<td align="left">1. Menos de $200 mil pesos<br />
2. Entre $200 y 350 mil peso<br />
3. Entre $351 y 500 mil peso<br />
4. Entre 501 y 800 mil pesos<br />
5. Entre 801 mil y 1 millón<br />
6. Entre 1 millón 201 mil y<br />
7. Entre 2 millones y 5 mill<br />
8. Más de 5 millones de peso<br />
9. No sabe<br />
10. No responde</td>
<td align="left">47 (22.5%)<br />
57 (27.3%)<br />
38 (18.2%)<br />
35 (16.7%)<br />
9 ( 4.3%)<br />
15 ( 7.2%)<br />
8 ( 3.8%)<br />
0 ( 0.0%)<br />
0 ( 0.0%)<br />
0 ( 0.0%)</td>
<td align="left">IIII<br />
IIIII<br />
III<br />
III<br />
<br />
I<br />
<br />
<br />
<br />
</td>
</tr>
<tr class="even">
<td align="left">tamanohogar<br />
[integer]</td>
<td align="left"></td>
<td align="left">Media (d-s) : 2.8 (1.5)<br />
min &lt; mediana &lt; max:<br />
1 &lt; 3 &lt; 14<br />
RI (CV) : 2 (0.5)</td>
<td align="left">1 : 287 (23.0%)<br />
2 : 321 (25.7%)<br />
3 : 265 (21.2%)<br />
4 : 222 (17.8%)<br />
5 : 98 ( 7.8%)<br />
6 : 38 ( 3.0%)<br />
7 : 16 ( 1.3%)<br />
10 : 1 ( 0.1%)<br />
12 : 1 ( 0.1%)<br />
14 : 1 ( 0.1%)</td>
<td align="left">IIII<br />
IIIII<br />
IIII<br />
III<br />
I<br />
<br />
<br />
<br />
<br />
</td>
</tr>
<tr class="odd">
<td align="left">c2_1<br />
[factor]</td>
<td align="left">Ãšltimas 2 semanas: se ha sentido
nervioso, ansioso o con los nervios de
punta</td>
<td align="left">1. Nunca<br />
2. Varios días<br />
3. Más de la mitad de los dí<br />
4. Casi todos los días<br />
5. No sabe<br />
6. No responde</td>
<td align="left">573 (45.7%)<br />
389 (31.0%)<br />
91 ( 7.3%)<br />
200 (16.0%)<br />
0 ( 0.0%)<br />
0 ( 0.0%)</td>
<td align="left">IIIIIIIII<br />
IIIIII<br />
I<br />
III<br />
<br />
</td>
</tr>
<tr class="even">
<td align="left">c2_2<br />
[factor]</td>
<td align="left">Ãšltimas 2 semanas: No ha podido dejar de
preocuparse o no ha podido controlar su</td>
<td align="left">1. Nunca<br />
2. Varios días<br />
3. Más de la mitad de los dí<br />
4. Casi todos los días<br />
5. No sabe<br />
6. No responde</td>
<td align="left">629 (50.2%)<br />
377 (30.1%)<br />
101 ( 8.1%)<br />
145 (11.6%)<br />
0 ( 0.0%)<br />
0 ( 0.0%)</td>
<td align="left">IIIIIIIIII<br />
IIIIII<br />
I<br />
II<br />
<br />
</td>
</tr>
<tr class="odd">
<td align="left">c2_3<br />
[factor]</td>
<td align="left">Ãšltimas 2 semanas: Se ha sentido
bajoneado, deprimido, irritable o
desesperanzad</td>
<td align="left">1. Nunca<br />
2. Varios días<br />
3. Más de la mitad de los dí<br />
4. Casi todos los días<br />
5. No sabe<br />
6. No responde</td>
<td align="left">529 (42.3%)<br />
454 (36.3%)<br />
104 ( 8.3%)<br />
165 (13.2%)<br />
0 ( 0.0%)<br />
0 ( 0.0%)</td>
<td align="left">IIIIIIII<br />
IIIIIII<br />
I<br />
II<br />
<br />
</td>
</tr>
<tr class="even">
<td align="left">c2_4<br />
[factor]</td>
<td align="left">Ãšltimas 2 semanas: Ha sentido poco
interÃ©s o placer al hacer las cosas</td>
<td align="left">1. Nunca<br />
2. Varios días<br />
3. Más de la mitad de los dí<br />
4. Casi todos los días<br />
5. No sabe<br />
6. No responde</td>
<td align="left">679 (54.1%)<br />
358 (28.5%)<br />
89 ( 7.1%)<br />
128 (10.2%)<br />
0 ( 0.0%)<br />
0 ( 0.0%)</td>
<td align="left">IIIIIIIIII<br />
IIIII<br />
I<br />
II<br />
<br />
</td>
</tr>
<tr class="odd">
<td align="left">fatiga<br />
[haven_labelled, vctrs_vctr, double]</td>
<td align="left">Me siento cada vez mÃ¡s desmotivado para
seguir las medidas de protecciÃ³n…</td>
<td align="left">Media (d-s) : 2.8 (1.1)<br />
min &lt; mediana &lt; max:<br />
1 &lt; 2 &lt; 5<br />
RI (CV) : 2 (0.4)</td>
<td align="left">1 : 84 ( 6.8%)<br />
2 : 588 (47.3%)<br />
3 : 76 ( 6.1%)<br />
4 : 432 (34.8%)<br />
5 : 63 ( 5.1%)</td>
<td align="left">I<br />
IIIIIIIII<br />
I<br />
IIIIII<br />
I</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="introducción" class="section level1">
<h1>Introducción</h1>
<p>Un aspecto crucial cuando construimos modelos de regresión es la evaluación de la calidad del modelo. Hasta ahora habíamos conocido algunos algunos índices que nos permitían saber “la bondad de ajuste del modelo”, lo que nos indicaban qué tan bien ajustan los modelos construidos a los datos recopilados. Ahora bien la evaluación del modelo consta más bien de tres ejes</p>
<p><img src="https://docs.google.com/drawings/d/e/2PACX-1vQU-ZZaq8rGgECgd2uZ_nkbBCncvHWEUZDxkik0C-QBwln43qpOFvp0nv-qCt9p4RelA8TSOlI8gNVk/pub?w=480&amp;h=360" /></p>
<p><strong>Figura 1</strong>. Proceso de evaluación de la calidad de los modelos estimados. Elaboración propia</p>
<p><strong>1. Robustez</strong> (<em>pre-hoc</em>): los modelos de regresión tienen una serie de <strong>supuestos</strong> que se deben cumplir para que las estimaciones sean <strong>fidedignas</strong>.En esa sesión consideraremos los supuestos más esenciales: linealidad, normalidad de residuos, homogeneidad de la varianza, independencia de variables, multicolinealidad y casos influyentes (<em>los primeros tres aplican solo para regresiones lineales</em>).</p>
<p><strong>2. Ajuste</strong> (<em>post-hoc</em>): implica abordar qué tan bien ajustan nuestros modelos con los datos utilizados. La <em>bondad de ajuste</em> implica que si trabajamos con una</p>
<ul>
<li>2.1 <em>Regresión lineal múltiple</em>, analizaremos el <span class="math inline">\(R^2\)</span> ajustado</li>
<li>2.2 <em>Regresión logística</em>, analizaremos el <span class="math inline">\(Pseudo\)</span> <span class="math inline">\(R^2\)</span> y los <em>Criterios de Información</em> <span class="math inline">\(BIC\)</span> y <span class="math inline">\(AIC\)</span> (ambos nos dicen cuánta información se está “perdiendo” con las variables que se ocupan en cada modelo. Por ello elegiremos el modelo que tenga un BIC y AIC más bajo)</li>
</ul>
<p><strong>3. Comparación</strong>: luego de que hacemos <strong>transformaciones</strong> a los modelos, una etapa importante para la <strong>selección</strong> de estos es compararlos. Para ello consideraremos toda la información que tenemos de ellos en su diagnóstico de <strong>pre y post hoc.</strong></p>
<div id="cómo-evaluar-la-robustez-y-ajuste-de-modelos-en-r" class="section level2">
<h2>¿Cómo evaluar la robustez y ajuste de modelos en <strong>R</strong>?</h2>
<p>En R existen diversas funciones para crear un diagnóstico de supuestos y de ajuste a nuestros modelos. Ahora bien, la gran parte de ello se desenvuelve en distintos paquetes, sobre todo considerando que, como vimos, <strong>no existen criterios únicos</strong> para evaluar la calidad de nuestros modelos (más aún cuando son su variable dependiente tiene un nivel distinto de medición).</p>
<p>La buena noticia es que el paquete <code>performace</code> que reúne todas estas herramientas, y que los tres ejes de la <strong>calidad de los modelos</strong> también las distingue en una función para cada una.</p>
<p><img src="https://github.com/easystats/performance/blob/master/paper/figure_workflow.png?raw=true" /></p>
<p><strong>Figura 2.</strong> paquete <code>performance</code> del proyecto easystats de <a href="https://easystats.github.io/performance/">Lüdecke et al. (2021)</a></p>
</div>
</div>
<div id="diagnóstico-de-la-calidad-de-los-modelos" class="section level1">
<h1>Diagnóstico de la calidad de los modelos</h1>
<p>Imaginemos que queremos analizar los determinantes de la <strong>Fatiga pandémica</strong>, y para ello estimaremos un modelo de regresión lineal.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">as.numeric</span>(fatiga) <span class="sc">~</span> c2_1 <span class="sc">+</span> c2_2 <span class="sc">+</span> c2_3 <span class="sc">+</span> c2_4 <span class="sc">+</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>               trabaja <span class="sc">+</span> sexo <span class="sc">+</span> edad <span class="sc">+</span> ingreso,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> movid_proc)</span></code></pre></div>
<strong>Tabla 1</strong>. Modelo de regresión que predice la fatiga a la pandemia
<table class="texreg" style="margin: 10px auto;border-collapse: collapse;border-spacing: 0px;caption-side: bottom;color: #000000;border-top: 2px solid #000000;">
<thead>
<tr>
<th style="padding-left: 5px;padding-right: 5px;">
 
</th>
<th style="padding-left: 5px;padding-right: 5px;">
Modelo 1
</th>
</tr>
</thead>
<tbody>
<tr style="border-top: 1px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
(Intercept)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
2.60<sup>***</sup>
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.14)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_1Varios días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.17
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.10)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_1Más de la mitad de los días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.23
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.16)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_1Casi todos los días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.08
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.14)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_2Varios días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.02
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.10)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_2Más de la mitad de los días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.07
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.17)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_2Casi todos los días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.10
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.15)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_3Varios días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.19
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.10)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_3Más de la mitad de los días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.23
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.17)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_3Casi todos los días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.29
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.16)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_4Varios días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.16
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.10)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_4Más de la mitad de los días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.24
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.17)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_4Casi todos los días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.32<sup>*</sup>
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.16)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
trabajaNo
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.06
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.08)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
sexoMujer
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.02
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.08)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
edad
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.00
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.00)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
ingreso
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.00
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.00)
</td>
</tr>
<tr style="border-top: 1px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
R<sup>2</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.04
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
Adj. R<sup>2</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.02
</td>
</tr>
<tr style="border-bottom: 2px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
Num. obs.
</td>
<td style="padding-left: 5px;padding-right: 5px;">
917
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="font-size: 0.8em;" colspan="2">
<sup><em><strong></sup>p &lt; 0.001; <sup></strong></sup>p &lt; 0.01; <sup></em></sup>p &lt; 0.05
</td>
</tr>
</tfoot>
</table>
<div id="supuestos" class="section level2">
<h2>1. Supuestos</h2>
<p>No dejemos las tareas a medias. Antes de interpretar un modelo (ver el tamaño efecto y significancia de sus coeficientes) y ver su ajuste, es evidente que primero debemos chequear la validez. En el siguiente apartado les presentaremos uno de los 5 supuestos más básicos, y que en caso de no cumplirse se presentan una serie de problemas que <strong>debemos</strong> solucionar. En la siguiente figura puedes ver un resumen de lo que revisaremos</p>
<p><img src="https://docs.google.com/drawings/d/e/2PACX-1vQbb26p4E5LLFdGLr7t_3fvNHEn38d9E4D8uAdLMYk58GMp98uBpfsDqtEoMY4AdvBYftihC_Bst1G1/pub?w=480&amp;h=360" /></p>
<p><strong>Figura 3</strong>. Diferentes funciones de <code>performance</code> para evaluar robustez del modelo</p>
<div id="linealidad" class="section level3">
<h3>1.1 Linealidad</h3>
<p>Para la regresión lineal múltiple, un supuesto importante es que existe una <strong>relación lineal entre la variable dependiente e independiente</strong>.</p>
<p>Podemos saber si se cumple este supuesto a partir de un <em>gráfico de dispersión de datos</em>, que relacione la variable dependiente y la independiente, y verificar de manera “intuitiva” si la <strong>tendencia</strong> de esta relación se puede describir por una <strong>línea recta</strong>. El paquete <code>performace</code> nos permite hacer esto con su función <code>check_model</code> indicando en el argumento <code>check = "ncv</code></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_model</span>(model1, <span class="at">check =</span> <span class="fu">c</span>(<span class="st">&quot;ncv&quot;</span>, <span class="st">&quot;linearity&quot;</span>))</span></code></pre></div>
<p><img src="/assignment/10-code_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>En este caso podemos notar claramente que no hay una relación lineal. En caso de que no sea claro, una forma numérica para chequear este supuesto es que el valor promedio de los residuos sea cero. Si esto no es así los residuos están sesgados sistemáticamente, entonces probable que el modelo no sea realmente lineal, y esta desviación de los residuos deba corregirse re-especificando (medir de otra manera la variable) algún término de la ecuación de regresión al cuadrado o al cubo. Un modo que se ocupa para testear la necesidad de esta re-especificación es el test RESET de Ramsey que indica que:</p>
<p><span class="math inline">\(H_o\)</span> cuando el modelo tiene algún término al cuadrado o cubo, la media de los residuos es cero. Es decir, que si no podemos rechazar <span class="math inline">\(H_0\)</span>, nuestro modelo está bien especificado (es decir, es lineal). Como en este caso es claro que se necesita respecificar el predictor elevamos edad al cuadrado. Imaginemos que es el caso</p>
<p>✔️ La línea de referencia es plana y horizontal</p>
</div>
<div id="homocedasticidad" class="section level3">
<h3>1.2 Homocedasticidad</h3>
<p>Homoce ¿qué? Sí, <em>homocedasticidad</em>. Este concepto indica que <strong>los residuos</strong> se distribuyen de forma <strong>homogénea</strong> (por eso el sufijo <em>homo</em>). Como ya podrás haber notado este supuesto se vincula con el de <a href="#linealidad">linealidad</a></p>
<p>Al igual que la linealidad también puede comprobarse con un gráfico de dispersión entre la variable dependiente (<span class="math inline">\(Y\)</span>) e independiente (<span class="math inline">\(X\)</span>), donde podamos ver de manera clara la recta de regresión estimada y la distribución de los residuos. Aceptaremos el supuesto de <strong>homocedasticidad</strong> si la variación de los residuos es homogénea, es decir, no veremos un patrón claro y más bien se <em>distribuirán de forma aleatoria</em>. De manera gráfica veremos una nube de puntos que tiene una <em>forma similar</em> en todo el rango de las observaciones de la variable independiente.</p>
<p>Para comprobar el supuesto de homocedasticidad de manera más certera utilizaremos la prueba Breusch-Pagan Godfrey cuya hipótesis nula indica que</p>
<p><span class="math inline">\(H_0\)</span>: La varianza de los residuos del modelo de regresión no es constante (<strong>heterocedasticidad</strong>)</p>
<p>En este caso, buscaremos que rechazar la <span class="math inline">\(H_0\)</span>. Esto implicaría que <em>“en suma y resta”</em> si bien hay residuos, estos tienen una variación <strong>homogénea</strong> en todos los tramos de la relación de la variable dependiente con la independiente.</p>
<p>A partir de la función <code>check_heteroscedasticity</code> verificaremos qué ocurre con la hipótesis nula</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_heteroscedasticity</span>(model1)</span></code></pre></div>
<p>OK: Error variance appears to be homoscedastic (p = 0.494).</p>
<p>✔️ La varianza es homocedástica</p>
</div>
</div>
<div id="normalidad" class="section level2">
<h2>1.3 Normalidad de residuos</h2>
<p>Además de la linealidad (media 0), la homocedasticidad (varianza mínima y constante), el método de estimación de la regresión lineal (<em>OLS</em> o <em>MCO</em> en español) requiere asegurar una <strong>distribución normal</strong> de los residuos pues en caso contrario el modelo no es consistente a través de las variables y observaciones (esto significa que los errores no son aleteatorios).</p>
<p>Al igual que con los otros supuestos, la <strong>normalidad</strong> de los residuos se puede evaluar con métodos numéricos con pruebas que ya conocemos de otros cursos como la prueba de <em>Shapiro-Wilk</em> y Kolmogorov-Smirnov</p>
<p>A partir de la función <code>check_normality</code> utilizaremos la prueba <em>Shapiro-Wilk</em> para ver qué ocurre con la hipótesis nula a</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_normality</span>(model1)</span></code></pre></div>
<p>Warning: Non-normality of residuals detected (p &lt; .001).</p>
<p>⚠️ Los residuos no son normales</p>
<div id="independencia" class="section level3">
<h3>1.4 Independencia</h3>
<p>Evidentemente si los residuos no siguen una distribución normal, es probable que estos no sean independientes entre sí. Esto significa que buscaremos que los errores asociados a nuestro modelo de regresión sean <strong>independientes</strong>. Para saber si se cumple ese criterio se utiliza la prueba de <em>Durbin-Watson</em>, donde la <span class="math inline">\(H_0\)</span> supone que <strong>los residuos son independientes</strong></p>
<p>A partir de la función <code>check_autocorrelation</code> utilizaremos la prueba <em>Durbin-Watson</em> para ver qué ocurre con la hipótesis nula a</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_autocorrelation</span>(model1)</span></code></pre></div>
<p>Warning: Autocorrelated residuals detected (p = 0.016).</p>
<p>⚠️ Hay correlación entre los residuos</p>
<p>En síntesis sabemos la regresión lineal requiere de una relación lineal entre sus variables independientes y dependiente. Para ello no solo es importante chequear la distribución de los residuos, sino
dos posibilidades que pueden <em>tendenciar</em> esa relación lineal: como casos influyentes en la muestra y predictores que están altamente relacionados. Revisaremos la última de estas</p>
</div>
<div id="multicolinealidad" class="section level3">
<h3>1.5 Multicolinealidad</h3>
<p>La multicolinealidad es la relación de <strong>dependencia lineal fuerte</strong> entre más de dos <strong>predictores</strong> de un modelo.</p>
<p>El problema que produce es que será <em>difícil cuantificar con exactitud el efecto de cada predictor sobre la variable dependiente</em>, precisamente pues puede ocurrir que el efecto que una variable predictora tenga sobre el fenómeno que se busca estudiar dependa del valor de otra variable del modelo.</p>
<p>Para la regresión múltiple esto implica un problema pues suponemos que podemos <em>“controlar”</em> por el otro valor de la variable.</p>
<p>Esta relación <strong>endógena</strong> entre predictores la podemos examinar ante la existencia de altas correlaciones (<em>lineales</em>) entre variables. La aproximación numérica más utilizada es el <strong>VIF</strong> (factor de inflación de varianza) que indica hasta que punto la varianza de los coeficientes de regresión se debe a la colinealidad (o dependencia) entre otras variables del modelo.</p>
<p>Para evaluar esto ocuparemos el comando <code>check_collinearity()</code>. Como podemos ver en el gráfico, todos los valores son menores a 5 (<em>como recomienda el paquete</em>).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">check_collinearity</span>(model1))</span></code></pre></div>
<p><img src="/assignment/10-code_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>Ahora bien, dado que sabemos que las correlaciones en ciencias sociales nunca son tan altas, un criterio que se ocupa en nuestras disciplinas para evaluar <em>multicolinealidad</em> es es evitar valores del VIF mayores a 2.5.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_collinearity</span>(model1)</span></code></pre></div>
</div>
</div>
</div>
<div id="check-for-multicollinearity" class="section level1">
<h1>Check for Multicollinearity</h1>
<p>Low Correlation</p>
<p>Parameter VIF Increased SE
c2_1 2.85 1.69
c2_2 2.51 1.59
c2_3 3.66 1.91
c2_4 2.51 1.58
trabaja 1.13 1.06
sexo 1.06 1.03
edad 1.13 1.06
ingreso 1.00 1.00</p>
<p>⚠️ Como podemos ver los ítems del módulo de salud mental tienen todos valores sobre 2.5. Como veremos en el segundo apartado de esta sesión, las recomendaciones son o eliminar alguno de los predictores o <em>evaluar si es que estas variables más bien son parte de un mismo constructo</em> (y para ello las correlacionaremos)</p>
<div id="outliers" class="section level3">
<h3>1.6 Casos influyentes</h3>
<p>Un último supuesto que revisaremos, y es el que probablemente parte del que más nos enfrentamos en las ciencias sociales, son los <strong>casos influyentes</strong> (también llamados en inglés, <em>outliers</em>). Un ejemplo claro de esto son las variables como ingresos, donde muchas veces tenemos casos extremos con muy bajos salarios y otros muy altos, y que pueden tendenciar nuestras rectas de regresión pese a que no es evidente una relación lineal(o algún tipo de relación) entre la variable independiente y dependiente.</p>
<p>Para verificar si un “caso es <em>influyente</em>” examinaremos si la ausencia o presencia de ese caso genera un cambio importante en la estimación del modelo de regresión. Este enfoque se aborda a partir del cálculo de la <strong>Distancia de Cook</strong> (Cook,1977)</p>
<p>Primero podemos graficar la influencia de los casos con <code>check_outliers()</code> dentro de un <code>plot()</code></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">check_outliers</span>(model1))</span></code></pre></div>
<p><img src="/assignment/10-code_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>Luego para verificar si la ausencia o presencia de eliminar algunos de estos casos que presentan mayor distancia producen una <strong>diferencia</strong> significativa en la estimación del modelo, realizamos</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_outliers</span>(model1)</span></code></pre></div>
<p>OK: No outliers detected.</p>
<p>✔️ No hay outliers</p>
</div>
<div id="fit" class="section level2">
<h2>2. Ajuste del modelo</h2>
<p>Sabemos por la <a href="https://multivariada.netlify.app/assignment/05-code/">práctica 5</a> que podemos evaluar qué tan bien ajustan nuestros modelos con los datos utilizados. Sabemos que:</p>
<p>2.1 Si trabajamos una regresión lineal: el <span class="math inline">\(R^2\)</span> ajustado</p>
<p>2.2 Si trabajamos una regresión logística: Pseudo <span class="math inline">\(R^2\)</span> y los <em>Criterios de Información</em> BIC y AIC (ambos nos dicen cuánta información se está “perdiendo” con las variables que se ocupan en cada modelo. Por ello elegiremos el modelo que tenga un BIC y AIC más bajo).</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>performance<span class="sc">::</span><span class="fu">model_performance</span>(model1) <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print_md</span>() <span class="co">#print_md() nos permite hacer tablas en buen formato</span></span></code></pre></div>
<table>
<caption>Indices of model performance</caption>
<thead>
<tr class="header">
<th align="left">AIC</th>
<th align="center">BIC</th>
<th align="center">R2</th>
<th align="center">R2 (adj.)</th>
<th align="center">RMSE</th>
<th align="center">Sigma</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2817.44</td>
<td align="center">2904.22</td>
<td align="center">0.04</td>
<td align="center">0.02</td>
<td align="center">1.10</td>
<td align="center">1.11</td>
</tr>
</tbody>
</table>
<p>Es probable que estos ajustes coincidan mejor con el fenómeno que queremos analizar una vez que hicimos el chequeo de supuestos. Esto no implica necesariamente que el ajuste mejore, sino que seremos más <em>fieles</em> a la información que realmente nos están otorgando las variables.</p>
<p>Ya hemos dado una serie de recomendaciones de transformaciones a las variables para manejar el problema de supuestos. En la siguiente tabla sistematizamos algunas de ellas.</p>
<table class="table table-striped table-bordered table-condensed table-responsive" style="font-size: 14px; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Problema
</th>
<th style="text-align:left;">
Soluciones posibles
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: middle !important;" rowspan="3">
No linealidad de variable dependiente e independiente
</td>
<td style="text-align:left;">
Transformar predictor al cuadrado o cubo
</td>
</tr>
<tr>
<td style="text-align:left;">
Logaritmizar variable dependiente
</td>
</tr>
<tr>
<td style="text-align:left;">
Dicotomizar variable dependiente
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: middle !important;" rowspan="3">
No normalidad de residuos
</td>
<td style="text-align:left;">
Transformar predictor al cuadrado o cubo
</td>
</tr>
<tr>
<td style="text-align:left;">
Logaritmizar variable dependiente
</td>
</tr>
<tr>
<td style="text-align:left;">
Dicotomizar variable dependiente
</td>
</tr>
<tr>
<td style="text-align:left;">
Heterocedasticidad de residuos
</td>
<td style="text-align:left;">
Calcular errores estándares robustos
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: middle !important;" rowspan="2">
Dependencia entre predictores
</td>
<td style="text-align:left;">
Interacción entre variables
</td>
</tr>
<tr>
<td style="text-align:left;">
Variables no observadas
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: middle !important;" rowspan="3">
Multicolinealidad
</td>
<td style="text-align:left;">
Creación de índices
</td>
</tr>
<tr>
<td style="text-align:left;">
Interacción entre variables
</td>
</tr>
<tr>
<td style="text-align:left;">
Eliminar variables
</td>
</tr>
<tr>
<td style="text-align:left;">
Casos influyentes
</td>
<td style="text-align:left;">
Eliminar casos influyentes
</td>
</tr>
</tbody>
</table>
<p>Ahora mostraremos de manera operativa como ejecutarlas.</p>
<div id="transformar-predictor-al-cuadrado-o-cubo" class="section level3">
<h3>2.1 Transformar predictor al cuadrado o cubo</h3>
<p>Si estamos ante problemas de linealidad, indicamos que el término cuadrático o al cubo de algún predictor produce que la media de los residuos sea 0. Por lo general, por su distribución, esta variable es edad.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>movid_proc <span class="ot">&lt;-</span> movid_proc <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">edad2 =</span> (edad)<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
</div>
<div id="logaritmizar-variable-dependiente" class="section level3">
<h3>2.2 Logaritmizar variable dependiente</h3>
<p>Otro caso similar ocurre con <em>ingresos</em>, donde lo que se hace frecuentemente es transformar ingresos en un logaritmo de ingresos (<em>log(ingresos)</em>).</p>
<div id="recuperar-casos-perdidos" class="section level4">
<h4>2.2.1 Recuperar casos perdidos</h4>
<p>¡Pero antes! Es común que en las encuestas sociales cierta variables posean una alta proporción de datos perdidos. Un ejemplo común es en el reporte de los ingresos de los hogares o individuos. Esto generalmente puede generarse por características de la persona (eg. desempleado, estudiante) o por deseabilidad social (eg. personas de altos ingresos desisten de reportar). Por lo general, existen dos estrategias para solicitar que las personas reporten sus ingresos: (1) reporte directo del monto y (2) si la persona no reporta los ingresos, se le presenta la posibilidad de ubicar los ingresos del hogar en tramos.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>movid_proc <span class="sc">%&gt;%</span> <span class="fu">select</span>(ingreso, tingreso) <span class="sc">%$%</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">dfSummary</span>(., <span class="at">headings =</span> <span class="cn">FALSE</span>, <span class="at">method =</span> <span class="st">&quot;render&quot;</span>, <span class="at">varnumbers =</span> F, <span class="at">lang =</span> <span class="st">&quot;es&quot;</span>))</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="8%" />
<col width="27%" />
<col width="25%" />
<col width="17%" />
<col width="7%" />
<col width="6%" />
<col width="7%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Variable</th>
<th align="left">Etiqueta</th>
<th align="left">Estadísticas / Valores</th>
<th align="left">Frec. (% sobre válidos)</th>
<th align="left">Gráfico</th>
<th align="left">Válido</th>
<th align="left">Perdidos</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ingreso<br />
[numeric]</td>
<td align="left">Monto de ingreso total de su hogar el
mes de noviembre de 2020</td>
<td align="left">Media (d-s) : 679414.7 (836325.7)<br />
min &lt; mediana &lt; max:<br />
0 &lt; 4e+05 &lt; 1.2e+07<br />
RI (CV) : 450000 (1.2)</td>
<td align="left">151 valores distintos</td>
<td align="left"><br />
:<br />
:<br />
:<br />
:<br />
: .</td>
<td align="left">942<br />
(74.7%)</td>
<td align="left">319<br />
(25.3%)</td>
</tr>
<tr class="even">
<td align="left">tingreso<br />
[factor]</td>
<td align="left">Tramo de ingreso total de su hogar el
mes de noviembre de 2020</td>
<td align="left">1. Menos de $200 mil pesos<br />
2. Entre $200 y 350 mil peso<br />
3. Entre $351 y 500 mil peso<br />
4. Entre 501 y 800 mil pesos<br />
5. Entre 801 mil y 1 millón<br />
6. Entre 1 millón 201 mil y<br />
7. Entre 2 millones y 5 mill<br />
8. Más de 5 millones de peso<br />
9. No sabe<br />
10. No responde</td>
<td align="left">47 (22.5%)<br />
57 (27.3%)<br />
38 (18.2%)<br />
35 (16.7%)<br />
9 ( 4.3%)<br />
15 ( 7.2%)<br />
8 ( 3.8%)<br />
0 ( 0.0%)<br />
0 ( 0.0%)<br />
0 ( 0.0%)</td>
<td align="left">IIII<br />
IIIII<br />
III<br />
III<br />
<br />
I<br />
<br />
<br />
<br />
</td>
<td align="left">209<br />
(16.6%)</td>
<td align="left">1052<br />
(83.4%)</td>
</tr>
</tbody>
</table>
<p>Si observamos la tabla de descriptivos para la variable ingreso del hogar (<code>ingreso</code>), tenemos un porcentaje 25,3% de datos perdidos. Por esta razón, emplearemos los datos disponibles en <code>tingreso</code> para recuperar información en los ingresos del hogar.</p>
<p>La estrategia posee los siguientes pasos:</p>
<ul>
<li><strong>Paso 1:</strong> Calcular la media por cada tramo</li>
<li><strong>Paso 2:</strong> En el caso de no tener información, remplazar por la media del tramo</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>movid_proc <span class="ot">&lt;-</span> movid_proc <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tingreso =</span> <span class="fu">case_when</span>(tingreso <span class="sc">==</span> <span class="st">&quot;Menos de $200 mil pesos&quot;</span> <span class="sc">~</span> <span class="dv">200000</span>,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>                              tingreso <span class="sc">==</span> <span class="st">&quot;Entre $200 y 350 mil pesos&quot;</span> <span class="sc">~</span> <span class="dv">275000</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>                              tingreso <span class="sc">==</span> <span class="st">&quot;Entre $351 y 500 mil pesos&quot;</span> <span class="sc">~</span> <span class="dv">425500</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>                              tingreso <span class="sc">==</span> <span class="st">&quot;Entre 501 y 800 mil pesos&quot;</span> <span class="sc">~</span> <span class="dv">650500</span>,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>                              tingreso <span class="sc">==</span> <span class="st">&quot;Entre 801 mil y 1 millón 200 mil pesos&quot;</span> <span class="sc">~</span> <span class="dv">1000500</span>,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>                              tingreso <span class="sc">==</span> <span class="st">&quot;Entre 1 millón 201 mil y 2 millones de pesos&quot;</span> <span class="sc">~</span> <span class="dv">1600500</span>,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>                              tingreso <span class="sc">==</span> <span class="st">&quot;Entre 2 millones y 5 millones de pesos&quot;</span> <span class="sc">~</span> <span class="dv">3500000</span>,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>                              tingreso <span class="sc">==</span> <span class="st">&quot;Más de 5 millones de pesos&quot;</span> <span class="sc">~</span> <span class="dv">5000000</span>), <span class="co">#Paso 1</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">ingreso =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(ingreso), tingreso, ingreso))</span></code></pre></div>
<ul>
<li><strong>Paso 3:</strong> Comparar el resultado de los tramos</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>movid_proc <span class="sc">%&gt;%</span> <span class="fu">select</span>(ingreso, tingreso) <span class="sc">%$%</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">dfSummary</span>(., <span class="at">headings =</span> <span class="cn">FALSE</span>, <span class="at">method =</span> <span class="st">&quot;render&quot;</span>, <span class="at">varnumbers =</span> F, <span class="at">lang =</span> <span class="st">&quot;es&quot;</span>)) <span class="co">#Paso 3</span></span></code></pre></div>
<table>
<colgroup>
<col width="11%" />
<col width="34%" />
<col width="24%" />
<col width="10%" />
<col width="9%" />
<col width="10%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Variable</th>
<th align="left">Estadísticas / Valores</th>
<th align="left">Frec. (% sobre válidos)</th>
<th align="left">Gráfico</th>
<th align="left">Válido</th>
<th align="left">Perdidos</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ingreso<br />
[numeric]</td>
<td align="left">Media (d-s) : 664667.4 (811775.8)<br />
min &lt; mediana &lt; max:<br />
0 &lt; 4e+05 &lt; 1.2e+07<br />
RI (CV) : 450000 (1.2)</td>
<td align="left">155 valores distintos</td>
<td align="left"><br />
:<br />
:<br />
:<br />
:<br />
: .</td>
<td align="left">1151<br />
(91.3%)</td>
<td align="left">110<br />
(8.7%)</td>
</tr>
<tr class="even">
<td align="left">tingreso<br />
[numeric]</td>
<td align="left">Media (d-s) : 598198.6 (688242.3)<br />
min &lt; mediana &lt; max:<br />
2e+05 &lt; 425500 &lt; 3500000<br />
RI (CV) : 375500 (1.2)</td>
<td align="left">200000 : 47 (22.5%)<br />
275000 : 57 (27.3%)<br />
425500 : 38 (18.2%)<br />
650500 : 35 (16.7%)<br />
1000500 : 9 ( 4.3%)<br />
1600500 : 15 ( 7.2%)<br />
3500000 : 8 ( 3.8%)</td>
<td align="left">IIII<br />
IIIII<br />
III<br />
III<br />
<br />
I<br />
</td>
<td align="left">209<br />
(16.6%)</td>
<td align="left">1052<br />
(83.4%)</td>
</tr>
</tbody>
</table>
<p>Vemos que pasamos de tener 25,3% de datos perdidos en ingresos a un 8,72% (es decir, recuperamos un 16,58% de los casos). A ingresos se le pueden hacer tres transformaciones más</p>
<p><strong>1. Logaritmizar</strong>: en caso de que queramos seguir trabajando ingresos como una variable continua es una buena opción.</p>
<p><strong>2. Calcular el ingreso per cápita</strong>: si dividimos el ingreso por el tamaño del hogar (n° de habitantes en este), obtendremos el ingreso por persona.</p>
<p><strong>3. Cálculo de medidas de posición acumulada</strong>: con los ingresos per cápita se puede calcular la media o mediana de medidas de posición acumulada como quitiles</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>movid_proc <span class="ot">&lt;-</span> movid_proc <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log_ing =</span> <span class="fu">log</span>(ingreso), <span class="co">#Log ingresos</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">ing_per =</span> ingreso<span class="sc">/</span>tamanohogar, <span class="co">#Ingreso percapita</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">quintiles =</span> dplyr<span class="sc">::</span><span class="fu">ntile</span>(ing_per,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">n =</span> <span class="dv">5</span>)) <span class="co"># n de categorias, para quintiles usamos 5</span></span></code></pre></div>
</div>
</div>
<div id="dicotomizar-variable-dependiente" class="section level3">
<h3>2.3 Dicotomizar variable dependiente</h3>
<p>Es recurrente que en las encuestas sociales nos encontremos con preguntas con <em>Escala Likert</em>. Sin embargo, muchas veces estas no tienen una distribución normal, y más bien las respuestas están concentradas en algunas categorías de referencia.</p>
<p>Si bien no hay criterios canónicos para trabajar esas variables, tiene sentido indicar que más bien no representan un constructo con 5 o más niveles, sino que probablemente de 2. Re-especificar la variable como dicotómica no solo ayudará a trabajar de manera más <em>realista</em> el constructo, sino que <strong>facilitará</strong> las interpretaciones que queramos hacer de nuestro modelo.</p>
<p>Ocuparemos dos criterios para la <strong>dicotomización</strong>:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Medias</strong>: se ocupará como criterio discriminante la media de la variable (donde 1 puede ser los valores mayores a la media, y 0 los inferiores).</p></li>
<li><p><strong>Mediana</strong>: la más frecuente en medidas ordinales como las <em>escalas Likert</em> es cuando el 50% de los casos se concentra en unas pocas categoría de respuesta (eg, “Muy de acuerdo” y “De acuerdo” serán 1 y el resto 0).</p></li>
</ol>
<p>En el caso de la variable <code>fatiga</code> que indica <em>“A medida que ha avanzado la crisis sanitaria, me siento cada vez más desmotivado para seguir las medidas de protección recomendadas”</em>, recodificaremos a aquellos como <em>1</em> a quiénes asienten a esta frase (<em>“Muy de acuerdo” y “De acuerdo”</em>)</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>movid_proc <span class="ot">&lt;-</span> movid_proc <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fatigadummy =</span> <span class="fu">case_when</span>(fatiga <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">4</span>) <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>                                 fatiga <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>) <span class="sc">~</span> <span class="dv">0</span>, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_real_</span>))</span></code></pre></div>
</div>
<div id="errores-estándares-robustos" class="section level3">
<h3>2.4 Errores estándares robustos</h3>
<p>En caso de que estemos ante problemas de heterocedasticidad debemos re-estimar nuestro modelo considerando errores estándares robustos</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>model_robust<span class="ot">&lt;-</span> lmtest<span class="sc">::</span><span class="fu">coeftest</span>(model1, <span class="at">vcov=</span>sandwich<span class="sc">::</span><span class="fu">vcovHC</span>(model1))</span></code></pre></div>
</div>
<div id="creación-de-índices" class="section level3">
<h3>2.5 Creación de índices</h3>
<p>En el <a href="https://www.youtube.com/watch?v=APzU10EMMjg&amp;t=321s">tutorial de dplyr</a> ya habíamos abordado este punto. También está desarrollado de manera extensa en el <a href="https://multivariada.netlify.app/assignment/01-code/#bonus-track-generaci%C3%B3n-de-%C3%ADndices">práctico N°1</a>. Por ello, solo lo cacularemos para aquellos ítems que mostraron posibilidad de ser colineales. Los pasos son</p>
<ol style="list-style-type: decimal">
<li><strong>Correlacionar</strong> para verificar que estamos ante la presencia de ítems que podrían estar midiendo un constructo común. Como vemos en la siguiente tabla, las correlaciones son altas</li>
</ol>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>movid_proc <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;c2&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">as.numeric</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>sjPlot<span class="sc">::</span><span class="fu">tab_corr</span>(., <span class="at">triangle =</span> <span class="st">&quot;lower&quot;</span>)</span></code></pre></div>
<table style="border-collapse:collapse; border:none;">
<tr>
<th style="font-style:italic; font-weight:normal; border-top:double black; border-bottom:1px solid black; padding:0.2cm;">
 
</th>
<th style="font-style:italic; font-weight:normal; border-top:double black; border-bottom:1px solid black; padding:0.2cm;">
c2_1
</th>
<th style="font-style:italic; font-weight:normal; border-top:double black; border-bottom:1px solid black; padding:0.2cm;">
c2_2
</th>
<th style="font-style:italic; font-weight:normal; border-top:double black; border-bottom:1px solid black; padding:0.2cm;">
c2_3
</th>
<th style="font-style:italic; font-weight:normal; border-top:double black; border-bottom:1px solid black; padding:0.2cm;">
c2_4
</th>
</tr>
<tr>
<td style="font-style:italic;">
c2_1
</td>
<td style="padding:0.2cm; text-align:center;">
 
</td>
<td style="padding:0.2cm; text-align:center;">
 
</td>
<td style="padding:0.2cm; text-align:center;">
 
</td>
<td style="padding:0.2cm; text-align:center;">
 
</td>
</tr>
<tr>
<td style="font-style:italic;">
c2_2
</td>
<td style="padding:0.2cm; text-align:center;">
0.608<span style="vertical-align:super;font-size:0.8em;">***</span>
</td>
<td style="padding:0.2cm; text-align:center;">
 
</td>
<td style="padding:0.2cm; text-align:center;">
 
</td>
<td style="padding:0.2cm; text-align:center;">
 
</td>
</tr>
<tr>
<td style="font-style:italic;">
c2_3
</td>
<td style="padding:0.2cm; text-align:center;">
0.599<span style="vertical-align:super;font-size:0.8em;">***</span>
</td>
<td style="padding:0.2cm; text-align:center;">
0.569<span style="vertical-align:super;font-size:0.8em;">***</span>
</td>
<td style="padding:0.2cm; text-align:center;">
 
</td>
<td style="padding:0.2cm; text-align:center;">
 
</td>
</tr>
<tr>
<td style="font-style:italic;">
c2_4
</td>
<td style="padding:0.2cm; text-align:center;">
0.483<span style="vertical-align:super;font-size:0.8em;">***</span>
</td>
<td style="padding:0.2cm; text-align:center;">
0.465<span style="vertical-align:super;font-size:0.8em;">***</span>
</td>
<td style="padding:0.2cm; text-align:center;">
0.586<span style="vertical-align:super;font-size:0.8em;">***</span>
</td>
<td style="padding:0.2cm; text-align:center;">
 
</td>
</tr>
<tr>
<td colspan="5" style="border-bottom:double black; border-top:1px solid black; font-style:italic; font-size:0.9em; text-align:right;">
Computed correlation used pearson-method with listwise-deletion.
</td>
</tr>
</table>
<ol start="2" style="list-style-type: decimal">
<li><strong>Construcción de índice</strong>: este puede ser sumativo o promedio. Esto dependerá de la escala de los ítems y del sentido del constructo final que queremos utilizar. En nuestro caso crearemos una índice sumativa de <code>salud mental</code></li>
</ol>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>movid_proc <span class="ot">&lt;-</span> movid_proc <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="fu">starts_with</span>(<span class="st">&quot;c2&quot;</span>)),<span class="sc">~</span><span class="fu">as.numeric</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">salud_mental =</span> <span class="fu">sum</span>(c2_1,c2_2,c2_3,c2_4, <span class="at">na.rm =</span> T))</span></code></pre></div>
</div>
<div id="eliminar-casos-influyentes" class="section level3">
<h3>2.6 Eliminar casos influyentes</h3>
<p>En caso de que estemos ante la prescencia de casos influyentes debemos seguir los siguientes pasos</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>n<span class="ot">&lt;-</span> <span class="fu">nobs</span>(model1) <span class="co">#n de observaciones</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>k<span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">coef</span>(model1)) <span class="co"># n de parametros</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>dcook<span class="ot">&lt;-</span> <span class="dv">4</span><span class="sc">/</span>(n<span class="sc">-</span>k<span class="dv">-1</span>) <span class="co">#Punto de corte</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos donde se filtran los valores sobre el punto de corte</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>movid_proc_so <span class="ot">&lt;-</span> broom<span class="sc">::</span><span class="fu">augment_columns</span>(model1,<span class="at">data =</span> movid_proc) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(.cooksd<span class="sc">&lt;</span>dcook) </span></code></pre></div>
<p>Una vez finalizada las transformaciones calcular
dos nuevos modelos</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>model1_fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">as.numeric</span>(fatiga) <span class="sc">~</span> salud_mental <span class="sc">+</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>               trabaja <span class="sc">+</span> sexo <span class="sc">+</span> edad <span class="sc">+</span> ing_per,</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> movid_proc)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">as.numeric</span>(fatiga) <span class="sc">~</span> salud_mental <span class="sc">+</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>               trabaja <span class="sc">+</span> sexo <span class="sc">+</span> edad2 <span class="sc">+</span> ing_per,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> movid_proc)</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>model3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(fatigadummy <span class="sc">~</span> salud_mental <span class="sc">+</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>               trabaja <span class="sc">+</span> sexo <span class="sc">+</span> edad2 <span class="sc">+</span> ing_per, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> movid_proc)</span></code></pre></div>
<p>Luego, podemos hacer un chequeo general de diagnósticos de robustez con <code>check_model</code>, pero ahora indicando que queremos evaluar todos los indicadores posibles</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_model</span>(model1_fit, <span class="at">check =</span> <span class="fu">c</span>(<span class="st">&quot;vif&quot;</span>,<span class="st">&quot;normality&quot;</span>, <span class="st">&quot;linearity&quot;</span>, <span class="st">&quot;ncv&quot;</span>, <span class="st">&quot;homogeneity&quot;</span>))</span></code></pre></div>
<p><img src="/assignment/10-code_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_model</span>(model2, <span class="at">check =</span> <span class="fu">c</span>(<span class="st">&quot;vif&quot;</span>,  <span class="st">&quot;normality&quot;</span>, <span class="st">&quot;linearity&quot;</span>, <span class="st">&quot;ncv&quot;</span>, <span class="st">&quot;homogeneity&quot;</span>))</span></code></pre></div>
<p><img src="/assignment/10-code_files/figure-html/unnamed-chunk-29-2.png" width="672" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_model</span>(model3, <span class="at">check =</span> <span class="fu">c</span>(<span class="st">&quot;vif&quot;</span>,  <span class="st">&quot;homogeneity&quot;</span>))</span></code></pre></div>
<p><img src="/assignment/10-code_files/figure-html/unnamed-chunk-29-3.png" width="672" /></p>
<p>Existen otros diagnósticos posibles para abordar en nuestros modelos, todo con el propósito de mejorar la calidad de estos. Uno de ellos, y que no abordaremos por su extensión, es la ausencia de
posibles <strong>interacciones</strong> entre las variables que no han sido modeladas (Fox &amp; Weisberg 2018). En caso de su interés pueden revisar esto y ver su <a href="https://strengejacke.github.io/ggeffects/articles/introduction_partial_residuals.html">aplicación simple en R en el siguiente link.</a></p>
</div>
</div>
<div id="comparación" class="section level2">
<h2>3. Comparación</h2>
<strong>Tabla 3</strong>. Modelos de regresión que predice la fatiga a la pandemia
<table class="texreg" style="margin: 10px auto;border-collapse: collapse;border-spacing: 0px;caption-side: bottom;color: #000000;border-top: 2px solid #000000;">
<thead>
<tr>
<th style="padding-left: 5px;padding-right: 5px;">
 
</th>
<th style="padding-left: 5px;padding-right: 5px;">
Modelo 1
</th>
<th style="padding-left: 5px;padding-right: 5px;">
Modelo 2
</th>
<th style="padding-left: 5px;padding-right: 5px;">
Modelo 3
</th>
</tr>
</thead>
<tbody>
<tr style="border-top: 1px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
(Intercept)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
2.60<sup>***</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
2.40<sup>***</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-1.09<sup>***</sup>
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.14)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.11)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.20)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_1Varios días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.17
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.10)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_1Más de la mitad de los días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.23
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.16)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_1Casi todos los días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.08
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.14)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_2Varios días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.02
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.10)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_2Más de la mitad de los días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.07
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.17)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_2Casi todos los días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.10
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.15)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_3Varios días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.19
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.10)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_3Más de la mitad de los días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.23
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.17)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_3Casi todos los días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.29
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.16)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_4Varios días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.16
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.10)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_4Más de la mitad de los días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.24
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.17)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
c2_4Casi todos los días
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.32<sup>*</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.16)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
trabajaNo
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.06
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.12
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.28<sup>*</sup>
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.08)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.07)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.14)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
sexoMujer
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.02
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.02
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.06
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.08)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.07)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.13)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
edad
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.00
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.00)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
ingreso
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.00
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.00)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
salud_mental
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.04<sup>***</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.06<sup>**</sup>
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.01)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.02)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
edad2
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.00
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.00
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.00)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.00)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
ing_per
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.00
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.00
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.00)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.00)
</td>
</tr>
<tr style="border-top: 1px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
R<sup>2</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.04
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.02
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
Adj. R<sup>2</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.02
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.01
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
Num. obs.
</td>
<td style="padding-left: 5px;padding-right: 5px;">
917
</td>
<td style="padding-left: 5px;padding-right: 5px;">
1128
</td>
<td style="padding-left: 5px;padding-right: 5px;">
1128
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
AIC
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
1510.51
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
BIC
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
1540.67
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
Log Likelihood
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-749.25
</td>
</tr>
<tr style="border-bottom: 2px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
Deviance
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
 
</td>
<td style="padding-left: 5px;padding-right: 5px;">
1498.51
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="font-size: 0.8em;" colspan="4">
<sup><em><strong></sup>p &lt; 0.001; <sup></strong></sup>p &lt; 0.01; <sup></em></sup>p &lt; 0.05
</td>
</tr>
</tfoot>
</table>
<p>Si bien en con la tabla N°3 podemos tener un panorama, es <strong>imprescindible</strong> recordar que para comparar modelos (en su robustez y ajuste) es necesario que estos tengan <em>(1) la misma variable de respuesta y (2) el mismo número de observaciones.</em></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">compare_performance</span>(model1_fit, model2) <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print_md</span>()</span></code></pre></div>
<table>
<caption>Comparison of Model Performance Indices</caption>
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="center">Model</th>
<th align="center">AIC</th>
<th align="center">BIC</th>
<th align="center">R2</th>
<th align="center">R2 (adj.)</th>
<th align="center">RMSE</th>
<th align="center">Sigma</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">model1_fit</td>
<td align="center">lm</td>
<td align="center">3452.28</td>
<td align="center">3487.48</td>
<td align="center">0.02</td>
<td align="center">0.01</td>
<td align="center">1.11</td>
<td align="center">1.11</td>
</tr>
<tr class="even">
<td align="left">model2</td>
<td align="center">lm</td>
<td align="center">3452.24</td>
<td align="center">3487.44</td>
<td align="center">0.02</td>
<td align="center">0.01</td>
<td align="center">1.11</td>
<td align="center">1.11</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">compare_performance</span>(model1_fit, model2))</span></code></pre></div>
<p><img src="/assignment/10-code_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<p>Ahora bien, esto no quita que, considerando que el ajuste entre el <code>model1_fit</code> y el <code>modelo2</code> no cambia sustantivamente, consideremos en seleccionar el <code>modelo3</code> por criterios más sustantivos. Podemos asegurarnos de esta comparación entre el modelo1 y modelo2 con un test que permite facilitar la decisión sobre la significancia de los índices que estamos viendo</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test_performance</span>(model1_fit, model2) <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print_md</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="right">Model</th>
<th align="left">BF</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">model1_fit</td>
<td align="right">lm</td>
<td align="left">1.00</td>
</tr>
<tr class="even">
<td align="left">model2</td>
<td align="right">lm</td>
<td align="left">1.02</td>
</tr>
</tbody>
</table>
<p>Each model is compared to model1_fit.</p>
</div>
</div>
<div id="referencias" class="section level1">
<h1>Referencias</h1>
<p>Lüdecke, Makowski, Waggoner &amp; Patil (2020). Assessment of Regression Models Performance. CRAN. Available from <a href="https://easystats.github.io/performance/" class="uri">https://easystats.github.io/performance/</a></p>
<p>Lüdecke, Makowski, Waggoner &amp; Patil (2021). performance: Assessment of Regression Models Performance. Journal of Open Source Software. 60(6). pp.3139. doi: 10.21105/joss.03139</p>
<p>Fox J, Weisberg S. Visualizing Fit and Lack of Fit in Complex Regression Models with Predictor Effect Plots and Partial Residuals. Journal of Statistical Software 2018;87. <a href="https://www.jstatsoft.org/article/view/v087i09" class="uri">https://www.jstatsoft.org/article/view/v087i09</a></p>
</div>
