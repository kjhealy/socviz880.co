[{"authors":["juancastillo"],"categories":null,"content":"Juan C. Castillo es profesor del Departamento de Sociología, Universidad de Chile.\n","date":-62135596800,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1615479945,"objectID":"5c580fbb5017138cb2136789294442fd","permalink":"https://multivariada.netlify.app/authors/juancastillo/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/authors/juancastillo/","section":"authors","summary":"Juan C. Castillo es profesor del Departamento de Sociología, Universidad de Chile.","tags":null,"title":"Juan Castillo","type":"authors"},{"authors":null,"categories":null,"content":"  Índice  Instrucciones generales para las prácticas Reportes de progreso Trabajo con software R  Instalación de R \u0026amp; RStudio Sobre el trabajo en hojas de código en RStudio Tutorial RCloud    Esta página contiene los materiales de los contenidos de cada sesión (documento de presentación, lecturas, links), y también las guías prácticas.\nTodo el material es accesible desde el menú de la izquierda \u0026lt;–\nInstrucciones generales para las prácticas  Las instancia prácticas consisten en el desarrollo de una guía práctica cada semana donde se aplican y profundizan los contenidos de las clases. La organización de estas prácticas se puede revisar en la planificación del curso.\n El trabajo con estas guías se organiza en los siguientes momentos:\n cada estudiante realiza la guía de manera autónoma durante la semana en caso de dudas que surjan durante la semana se recomienda preguntar en el foro de U-Cursos o preferentemente en el foro de Disqus al final de la página de cada práctica. en la sesión práctica, se resolverán dudas y se entregaran complementos en caso de ser necesario. las sesiones prácticas se realizarán en grupos pequeños guiados por ayudantes. Estos grupos serán inicialmente asignados al azar y luego corresponderán a los grupos conformados para realizar el trabajo final del curso. cada semana se completa un reporte de progreso (detalles abajo)  En las prácticas vamos a trabajar con el software R, Versión 4.1.\n   Reportes de progreso Este curso se caracteriza por el desarrollo secuencial y acumulativo de aprendizajes. En otras palabras, va a ser muy difícil poder lograr los objetivos de aprendizaje posteriores sin haber logrado los objetivos de contenidos previos. En otras palabras: es muy difícil aprender a multiplicar sin saber sumar. Por lo tanto, como equipo a cargo del curso nos interesa poder monitorear permanentemente el cumplimiento de objetivos de aprendizaje semana a semana para así poder prestar asesoría oportuna.\nEl sistema de monitoreo permanente de cumplimiento de objetivos se llevará a cabo mediante reportes de progreso. Un ejemplo de este reporte se ve así:\nLos reportes consisten en completar una encuesta simple y breve, donde se preguntará por el cumplimiento de los objetivos de las prácticas respectivas. El link para completar el reporte se encuentra al final de cada práctica. Se deben completar durante la semana en que se desarrolla la guía, a más tardar los días viernes (ya que ese día se publican las guías prácticas correspondientes a la semana siguiente).\nComo incentivo para completar los reportes de progreso, se entregarán dos décimas adicionales a la evaluación a quienes tengan sus reportes de progreso completados entre instancias de evaluación (por ejemplo, en el caso de la evaluación 2 se deben tener todos los reportes de progreso completados entre la evaluación 1 y 2).\n Trabajo con software R Para los análisis estadísticos de este curso usamos el programa R, en parte porque es gratuito, pero la principal razón es que es de código abierto. Esto quiere decir que cualquier persona puede revisar cómo está hecho y aportar con modificaciones y procedimientos nuevos, como son las librerías que realizan funciones específicas.\nEl carácter de apertura de R posee muchas ventajas, pero también conlleva complicaciones. Se actualiza permanentemente, así como también las librerías, y esto puede generar problemas de compatibilidad y de fallas en ejecución del código de análisis.\nPara minimizar estos posibles problemas en este curso, vamos a:\n trabajar con la misma y última versión de R, que es la 4.1\n evitar uso de tilde, ñ, espacios y mayúsculas tanto en carpetas y archivos, así como también en los nombres de las variables\n al momento de hacer consultas sobre problemas en la ejecución del código, adjuntar la siguiente información:\nCódigo completo hasta que se produce el problema Indicar línea del código donde se produce el problema Adjuntar el resultado del output de la información de la sesión (sessionInfo())   Instalación de R \u0026amp; RStudio Para esta versión del curso vamos a trabajar con el programa R Version 4.1 (se sugiere la última versión 4.1.3) y con RStudio, que ofrece un entorno más amigable para trabajar con R.\nPara instalar R: ir a https://cran.r-project.org/index.html y bajar/instalar la versión correspondiente a la plataforma utilizada (Windows, Mac o Linux)\nPara instalar RStudio: ir a https://rstudio.com/products/rstudio/ y bajar/instalar RStudio desktop, Open Source License (libre).\nEn caso de dudas se puede revisar el siguiente video tutorial de instalación de R \u0026amp; RStudio, de una versión anterior del curso:\n  Si por alguna razón se prefiere trabajar sin descargar, también se puede utilizar RCloud, abajo un tutorial de una versión anterior del curso\n   Sobre el trabajo en hojas de código en RStudio  El trabajo de análisis en RStudio se efectua en una hoja de código (o R script o sintaxis, o para los usuarios de Stata la do-file), que es donde se anotan los comandos y funciones. Para abrir una hoja, en RStudio ir a File \u0026gt; New File \u0026gt; R Script (o ctrl+shift+N),y aparecerá un panel con una pestaña “Untitled” (sin título). Esta es la hoja de código donde se anotan los comandos.\n Los contenidos de las hojas de código son básicamente 2:\n comandos o funciones: se escriben en la hoja, y para ejecutarlos se debe posicionar el cursor en la línea respectiva y ctrl+enter, el resultado aparecerá en el panel de resultados o Consola. texto: para escribir títulos, comentarios, y todo lo que permita entender qué se está haciendo, al principio de la línea respectiva escribir el signo #  Para grabar nuestra hoja de código y así respaldar nuestros análisis, File \u0026gt; Save (o ctrl+s), y dar un nombre al archivo. Recordar: breve, sin espacios ni tildes ni eñes. Por defecto, la extensión de estos archivos es .R\n   Tutorial RCloud RCloud permite trabajar con RStudio en línea, sin necesidad de instalar localmente. Puede ser muy útil para quienes tengan problemas de instalación, así como también para trabajo colaborativo. Tenemos a disposición una página tutorial de cómo usar RCloud.\n  ","date":-62135596800,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1647553293,"objectID":"108da05078d325a5a1f01a1ff2583053","permalink":"https://multivariada.netlify.app/class/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/class/","section":"class","summary":"Índice  Instrucciones generales para las prácticas Reportes de progreso Trabajo con software R  Instalación de R \u0026amp; RStudio Sobre el trabajo en hojas de código en RStudio Tutorial RCloud    Esta página contiene los materiales de los contenidos de cada sesión (documento de presentación, lecturas, links), y también las guías prácticas.\nTodo el material es accesible desde el menú de la izquierda \u0026lt;–\nInstrucciones generales para las prácticas  Las instancia prácticas consisten en el desarrollo de una guía práctica cada semana donde se aplican y profundizan los contenidos de las clases.","tags":null,"title":"Contenidos","type":"docs"},{"authors":null,"categories":null,"content":"  If I assign readings, you really should read them.\n","date":-62135596800,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1615479945,"objectID":"40fcd2da3bf2dc718a2fe044c31cdc56","permalink":"https://multivariada.netlify.app/reading/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/reading/","section":"reading","summary":"If I assign readings, you really should read them.","tags":null,"title":"Reading","type":"docs"},{"authors":null,"categories":null,"content":"  Aquí se accede a las distintas guías prácticas desde el menú de la izquierda  ","date":-62135596800,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1615479945,"objectID":"3aa23ffb1eb3dedbe4d8a9c2165e2c58","permalink":"https://multivariada.netlify.app/assignment/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/assignment/","section":"assignment","summary":"  Aquí se accede a las distintas guías prácticas desde el menú de la izquierda  ","tags":null,"title":"Prácticas","type":"docs"},{"authors":null,"categories":null,"content":"  Índice  Documento presentación Lecturas   Documento presentación   Lecturas Wooldridge (2010) Cap 3 (parcial): Análisis de regresión múltiple: estimación (68-80)\n ","date":1651190400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1651236936,"objectID":"0ddf3e2b3a9f5347c88f83033fb01ff2","permalink":"https://multivariada.netlify.app/class/05-class/","publishdate":"2022-04-29T00:00:00Z","relpermalink":"/class/05-class/","section":"class","summary":"  Índice  Documento presentación Lecturas   Documento presentación   Lecturas Wooldridge (2010) Cap 3 (parcial): Análisis de regresión múltiple: estimación (68-80)\n ","tags":null,"title":"Regresión múltiple 1","type":"docs"},{"authors":null,"categories":null,"content":"    pre  code.sourceCode { white-space: pre; position: relative; } pre  code.sourceCode  span { display: inline-block; line-height: 1.25; } pre  code.sourceCode  span:empty { height: 1.2em; } .sourceCode { overflow: visible; } code.sourceCode  span { color: inherit; text-decoration: inherit; } div.sourceCode { margin: 1em 0; } pre.sourceCode { margin: 0; } @media screen { div.sourceCode { overflow: auto; } } @media print { pre  code.sourceCode { white-space: pre-wrap; } pre  code.sourceCode  span { text-indent: -5em; padding-left: 5em; } } pre.numberSource code { counter-reset: source-line 0; } pre.numberSource code  span { position: relative; left: -4em; counter-increment: source-line; } pre.numberSource code  span  a:first-child::before { content: counter(source-line); position: relative; left: -1em; text-align: right; vertical-align: baseline; border: none; display: inline-block; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; padding: 0 4px; width: 4em; color: #aaaaaa; } pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; } div.sourceCode { background-color: #f8f8f8; } @media screen { pre  code.sourceCode  span  a:first-child::before { text-decoration: underline; } } code span.al { color: #ef2929; } /* Alert */ code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */ code span.at { color: #c4a000; } /* Attribute */ code span.bn { color: #0000cf; } /* BaseN */ code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */ code span.ch { color: #4e9a06; } /* Char */ code span.cn { color: #000000; } /* Constant */ code span.co { color: #8f5902; font-style: italic; } /* Comment */ code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */ code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */ code span.dt { color: #204a87; } /* DataType */ code span.dv { color: #0000cf; } /* DecVal */ code span.er { color: #a40000; font-weight: bold; } /* Error */ code span.ex { } /* Extension */ code span.fl { color: #0000cf; } /* Float */ code span.fu { color: #000000; } /* Function */ code span.im { } /* Import */ code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */ code span.kw { color: #204a87; font-weight: bold; } /* Keyword */ code span.op { color: #ce5c00; font-weight: bold; } /* Operator */ code span.ot { color: #8f5902; } /* Other */ code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */ code span.sc { color: #000000; } /* SpecialChar */ code span.ss { color: #4e9a06; } /* SpecialString */ code span.st { color: #4e9a06; } /* String */ code span.va { color: #000000; } /* Variable */ code span.vs { color: #4e9a06; } /* VerbatimString */ code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */  Índice  Objetivo de la práctica  Librerías Datos Explorar base de datos Modelo de regresión simple Relacion entre variables Modelo de regresión multiple Interpretación  Intercepto Coeficientes de regresión  Comparando el modelo de regresión simple con múltiple ¿Por qué utilizar R^2 ajustado?  Resumen Práctica 5: Reporte de progreso Foro práctica 5    addClassKlippyTo(\"pre.r, pre.markdown\"); addKlippy('right', 'bottom', 'auto', '1', 'Copy code', 'Copied!');  Objetivo de la práctica En esta práctica nos enfocaremos en el concepto de regresión múltiple, a partir de la incorporación de dos o más predictores en el modelo. Para ello utilizaremos el ejemplo 3.1 de Wooldridge (2010) cap. 3 (Análisis de regresion múltiple) (p.68-80) sobre las determinantes del promedio en la universidad.\nLibrerías pacman::p_load(ggpubr, #graficos  dplyr, #manipulacion de datos  sjPlot, #tablas  gridExtra, #unir graficos  texreg, #mostrar regresion multiple  summarytools, #estadisticos descriptivos  wooldridge) #paquete con los ejemplos del libro  Datos Los datos a utilizar corresponden a la base de datos gpa1 que incluye una muestra de 141 estudiantes de una universidad. La base contiene las variables:\n colGPA: (col:college, GPA:notas) promedio general de calificaciones de la universidad, en escala de 0 a 4 puntos\n hsGPA: (hs: high school) promedio general de calificaciones en la enseñanza media, en escala de 0 a 4 puntos\n ACT: puntaje en el examen de admisión a la universidad, que va de 16 a 33 puntos\n  Primero, se cargará la base de datos que contiene la librería wooldridge y se seleccionarán las variables señaladas\ndata(\u0026#39;gpa1\u0026#39;) # Cargar base de datos gpa1 \u0026lt;- dplyr::select(gpa1, colGPA, hsGPA, ACT) #Seleccion de variables  Explorar base de datos A partir de la siguiente tabla se obtienen estadísticos descriptivos que luego serán relevantes para la interpretación de nuestros modelos.\nview(dfSummary(gpa1, headings = FALSE, method = \u0026#39;render\u0026#39;))  Modelo de regresión simple Si solo nos centramos en el análisis de regresión simple, intuitivamente partiremos por predecir las calificaciones de la universidad a partir del puntaje obtenido en la prueba de admisión a esta. Formalmente\n\\[\\widehat{colGPA} = b_{0} +b_{1}ACT \\]\ncol_actmodel\u0026lt;-lm(colGPA ~ ACT, data=gpa1) #Crear regresion simple summary(col_actmodel) ## ## Call: ## lm(formula = colGPA ~ ACT, data = gpa1) ## ## Residuals: ## Min 1Q Median 3Q Max ## -0.85251 -0.25251 -0.04426 0.26400 0.89336 ## ## Coefficients: ## Estimate Std. Error t value Pr(\u0026gt;|t|) ## (Intercept) 2.40298 0.26420 9.095 8.8e-16 *** ## ACT 0.02706 0.01086 2.491 0.0139 * ## --- ## Signif. codes: 0 \u0026#39;***\u0026#39; 0.001 \u0026#39;**\u0026#39; 0.01 \u0026#39;*\u0026#39; 0.05 \u0026#39;.\u0026#39; 0.1 \u0026#39; \u0026#39; 1 ## ## Residual standard error: 0.3656 on 139 degrees of freedom ## Multiple R-squared: 0.04275, Adjusted R-squared: 0.03586 ## F-statistic: 6.207 on 1 and 139 DF, p-value: 0.0139 En formato publicable:\nsjPlot::tab_model(col_actmodel, show.ci=FALSE) #Tabla resumen de resultados   col GPA    Predictors  Estimates  p    (Intercept)  2.40  \u0026lt;0.001    ACT  0.03  0.014    Observations  141    R2 / R2 adjusted  0.043 / 0.036    En consecuencia, nuestro modelo que relaciona el promedio de calificaciones en la universidad solo con el puntaje obtenido en el examen de admisión señala que por cada punto adicional que se obtiene en la prueba de admisión, el promedio de la universidad aumenta en 0.027 (aproximado en la tabla de sjPlot a 0.03) puntos en promedio.\n\\[\\widehat{colGPA} = 2.40 +0.0271ACT \\]\nAhora bien, si miramos nuestro \\(R^2\\) notaremos que \\(ACT\\) solo explica en un 4.3% la varianza de \\(colGPA\\). Por ello, incluiremos el promedio de las calificaciones de la enseñanza media (\\(hsGPA\\)) para intentar predecir mejor el promedio general de las calificaciones en la universidad.\n Relacion entre variables Se grafican las variables que determinarían \\(colGPA\\) para comparar sus distribuciones y sus pendientes (\\(b\\)) de sus respectivas regresiones simples.\n#Grafico x1 = ACT gact \u0026lt;- ggscatter(gpa1, x = \u0026quot;ACT\u0026quot;, y = \u0026quot;colGPA\u0026quot;,  shape = 21, size = 3, # Forma y tamaño de puntos  add = \u0026quot;reg.line\u0026quot;, #Agregar recta de regresion  cor.coef = TRUE)# Agregar coeficiente correlacion #Grafico x2 = hsGPA ghsGPA \u0026lt;- ggscatter(gpa1, x = \u0026quot;hsGPA\u0026quot;, y = \u0026quot;colGPA\u0026quot;,  shape = 21, size = 3,  add = \u0026quot;reg.line\u0026quot;,  cor.coef = TRUE) grid.arrange(gact, ghsGPA, nrow = 1) # Unir graficos Con el gráfico anterior podemos notar que, si bien ambas variables tienen una asociación positiva con \\(colGPA\\), el tamaño efecto de esta relación es distinto. Incluso, \\(hsGPA\\) que no había sido considerada en nuestro modelo inicial, tiene una asociación más grande con nuestra variable dependiente. Ahora bien, ¿cómo incide \\(ACT\\) y \\(hsGPA\\) en conjunto sobre \\(colGPA\\)?\n Modelo de regresión multiple Para estimar el modelo de regresión multiple se debe realizar el mismo procedimiento de la regresión simple, solo que ahora deben señalar un (+) y el segundo predictor\nGrabar / exportar tablas :Exportar tablas  modelo \u0026lt;- lm(y ~ x1 + x2 , data = data)\n col_actmodel\u0026lt;-lm(colGPA ~ ACT, data=gpa1) col_hsmodel\u0026lt;-lm(colGPA ~ hsGPA, data=gpa1) col_model \u0026lt;- lm(colGPA ~ ACT + hsGPA, data = gpa1) sjPlot::tab_model(list(col_actmodel, col_hsmodel,col_model), # los modelos estimados  show.ci=FALSE, # no mostrar intervalo de confianza (por defecto lo hace)  p.style = \u0026quot;stars\u0026quot;, # asteriscos de significación estadística  dv.labels = c(\u0026quot;Modelo 1\u0026quot;, \u0026quot;Modelo 2\u0026quot;, \u0026quot;Modelo 3\u0026quot;), # etiquetas de modelos o variables dep.  string.pred = \u0026quot;Predictores\u0026quot;, string.est = \u0026quot;β\u0026quot;) # nombre predictores y símbolo beta en tabla   Modelo 1  Modelo 2  Modelo 3    Predictores  β  β  β    (Intercept)  2.40 ***  1.42 ***  1.29 ***    ACT  0.03 *   0.01     hsGPA   0.48 ***  0.45 ***    Observations  141  141  141    R2 / R2 adjusted  0.043 / 0.036  0.172 / 0.166  0.176 / 0.164     p\u0026lt;0.05 ** p\u0026lt;0.01 *** p\u0026lt;0.001     \\[\\widehat{colGPA} = 1.29 +0.0094 \\dot\\ ACT + 0.453\\dot\\ hsGPA \\]\n Interpretación ¿Cómo se interpreta esta ecuación general de \\(colGPA\\) con dos predictores?\nIntercepto  El intercepto 1.29 indica la predicción del promedio general de calificaciones en la universidad (\\(colGPA\\)) si \\(hsGPA\\) y \\(ACT\\) son ambos cero. Este intercepto no tiene mucho significado debido a que eso implica un individuo ficticio que no haya asistido a la enseñanza media ni haya rendido la prueba de admisión, por lo cual no es parte de nuestra pregunta por las determinantes del promedio en la universidad.   Coeficientes de regresión  Fijémonos en los coeficientes de regresión de \\(hsGPA\\). Como era de esperar en función de los gráficos que habíamos presentado, existe una relación positiva entre \\(hsGPA\\) y \\(colGPA\\): con \\(ACT\\) constante, cada punto más en \\(hsGPA\\) se relaciona con un aumento en 0.453 puntos adicionales en \\(colGPA\\), es decir, casi medio punto.  En otras palabras, si se eligen dos estudiantes, A y B, y estos tienen la misma puntación en el exámen de admisión (\\(ACT\\)), pero el promedio en la enseñanza media de A es superior al de B (\\(hsGPA\\)), entonces se predice que en la universidad el estudiante A tendrá un promedio general de 0.45 puntos más altos que el estudiante B.\n Fijémonos ahora en el coeficiente de regresión de \\(ACT\\): si \\(hsGPA\\) permanece constante, un aumento en un punto de \\(ACT\\) solo produce un aumento en 0.0094 puntos en \\(colGPA\\), es decir, un cambio muy pequeño.  De hecho, un cambio de 10 puntos en el examen de admisión \\(ACT\\) tendrá un efecto sobre \\(colGPA\\) de menos de una décima de punto, es decir, menor al cambio que tiene \\(hsGPA\\). Además, la posibilidad de tener un cambio de 10 puntos en \\(ACT\\) es muy grande pues como mostramos en los estadísticos descriptivos de nuestras variables el promedio de puntaje en \\(colGPA\\) es 24 puntos con una desviación estándar de 2.8, lo que hace poco posible ese cambio en la realidad.\nCon esto podemos decir que el puntaje en el examen de admisión \\(ACT\\) no es un fuerte predictor del promedio de calificaciones en la universidad \\(colGPA\\).\n  Comparando el modelo de regresión simple con múltiple Iniciamos este práctico mostrando un análisis de regresión simple con un predictor para el promedio de calificaciones en la universidad: el promedio en el examen de admisión (\\(ACT\\)).\nObtuvimos que por cada punto de aumento de \\(ACT\\), \\(colGPA\\) aumentaba en 0.0271 puntos sus calificaciones, es decir, casi el triple de lo que fue estimado en el modelo de regresión múltiple (tal como se señala en Modelo 1)\n¿Cuál de los dos modelos es más certero?\nEsto lo podemos definir a partir de la bondad de ajuste de nuestros modelos. Por un lado, el \\(R^2\\) del modelo 1 es de 4.3% mientras que en el modelo 3 el \\(R^2ajustado\\) es de 16%, es decir, las variables que se contienen en el modelo explican más la varianza de nuestra variable dependiente.\n ¿Por qué utilizar R^2 ajustado? Hasta ahora habíamos utilizado \\(R^2\\) que nos señalaba qué porcentaje de la variación de la variable dependiente es explicada por la variable independiente.\nAhora bien, es esperable que a medida que añadimos más variables a una regresión, el \\(R^2\\) tiende a aumentar a pesar de que la contribución de cada una de las variables nuevas no tenga relevancia estadística.\nPor ello, el \\(R^2\\) ajustado se utiliza en la regresión múltiple para analizar en conjunto la intensidad que tienen las variables independientes en explicar la variable dependiente. Es decir, el \\(R^2\\) ajustado nos dice qué porcentaje de variación de la variable dependiente es explicado colectivamente por todas las variables independientes.\nEn consecuencia, \\(R^2\\) ajustado nos permite determinar mejor si es que añadir una nueva variable al modelo permite explicar una mayor parte de la variación de la variable dependiente.\nEn el ejercicio anterior bien podemos hacer este análisis comparando los \\(R^2\\) de nuestros modelos 1 y 2 para luego mirar el resultado de nuestro \\(R^2\\) ajustado en nuestro modelo 3. Como podremos notar el \\(R^2\\) del modelo 2 es de 17%, mientras que el \\(R^2\\) del modelo 3 es de 18% y el \\(R^2\\) ajustado de 16%.\nEn palabras más simples, si solo miramos el \\(R^2\\) llegaremos a la conclusión de que aunque por mínimo que sea, nuestro modelo 3 ajusta mejor que el modelo 2 pues la variable \\(ACT\\) permitiría predecir mejor \\(colGPA\\) en conjunto a \\(hsGPA\\). Sin embargo, \\(R^2 ajustado\\) del modelo 3 (16%) es menor que la del modelo 2 (17%) por lo que la incorporación de \\(ACT\\) al modelo múltiple no tiene un aporte significativo.\nDe hecho, un punto no menor es que \\(ACT\\) pierde significancia estadística en el modelo 3, mientras que \\(hsGPA\\) sigue siendo significativa con un 99% confianza (la significancia estadística lo revisaremos más adelante).\n  Resumen Práctica 5: En esta práctica revisamos los siguientes contenidos\n Repaso de regresión lineal simple Estimación de regresión lineal múltiple Interpretar regresión lineal múltiple Comparar regresión múltiple y simple Diferencia entre \\(R^2\\) ajustado y \\(R^2\\)   Reporte de progreso Completar el reporte de progreso correspondiente a esta práctica aquí.\n Foro práctica 5  ","date":1651190400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1651842936,"objectID":"e933840b45d355c28b7bb0057d254a85","permalink":"https://multivariada.netlify.app/assignment/05-code/","publishdate":"2022-04-29T00:00:00Z","relpermalink":"/assignment/05-code/","section":"assignment","summary":"pre  code.sourceCode { white-space: pre; position: relative; } pre  code.sourceCode  span { display: inline-block; line-height: 1.25; } pre  code.sourceCode  span:empty { height: 1.2em; } .sourceCode { overflow: visible; } code.sourceCode  span { color: inherit; text-decoration: inherit; } div.sourceCode { margin: 1em 0; } pre.sourceCode { margin: 0; } @media screen { div.sourceCode { overflow: auto; } } @media print { pre  code.","tags":null,"title":"Práctica 5. Regresión múltiple 1 ","type":"docs"},{"authors":null,"categories":null,"content":"    pre  code.sourceCode { white-space: pre; position: relative; } pre  code.sourceCode  span { display: inline-block; line-height: 1.25; } pre  code.sourceCode  span:empty { height: 1.2em; } .sourceCode { overflow: visible; } code.sourceCode  span { color: inherit; text-decoration: inherit; } div.sourceCode { margin: 1em 0; } pre.sourceCode { margin: 0; } @media screen { div.sourceCode { overflow: auto; } } @media print { pre  code.sourceCode { white-space: pre-wrap; } pre  code.sourceCode  span { text-indent: -5em; padding-left: 5em; } } pre.numberSource code { counter-reset: source-line 0; } pre.numberSource code  span { position: relative; left: -4em; counter-increment: source-line; } pre.numberSource code  span  a:first-child::before { content: counter(source-line); position: relative; left: -1em; text-align: right; vertical-align: baseline; border: none; display: inline-block; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; padding: 0 4px; width: 4em; color: #aaaaaa; } pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; } div.sourceCode { background-color: #f8f8f8; } @media screen { pre  code.sourceCode  span  a:first-child::before { text-decoration: underline; } } code span.al { color: #ef2929; } /* Alert */ code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */ code span.at { color: #c4a000; } /* Attribute */ code span.bn { color: #0000cf; } /* BaseN */ code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */ code span.ch { color: #4e9a06; } /* Char */ code span.cn { color: #000000; } /* Constant */ code span.co { color: #8f5902; font-style: italic; } /* Comment */ code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */ code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */ code span.dt { color: #204a87; } /* DataType */ code span.dv { color: #0000cf; } /* DecVal */ code span.er { color: #a40000; font-weight: bold; } /* Error */ code span.ex { } /* Extension */ code span.fl { color: #0000cf; } /* Float */ code span.fu { color: #000000; } /* Function */ code span.im { } /* Import */ code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */ code span.kw { color: #204a87; font-weight: bold; } /* Keyword */ code span.op { color: #ce5c00; font-weight: bold; } /* Operator */ code span.ot { color: #8f5902; } /* Other */ code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */ code span.sc { color: #000000; } /* SpecialChar */ code span.ss { color: #4e9a06; } /* SpecialString */ code span.st { color: #4e9a06; } /* String */ code span.va { color: #000000; } /* Variable */ code span.vs { color: #4e9a06; } /* VerbatimString */ code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */  Índice  Objetivo de la práctica Librerías Datos Cálculo de los coeficientes de regresión Ajuste y residuos Cálculo del R2 Vamos a R Correlación y regresión Reporte de progreso Foro    addClassKlippyTo(\"pre.r, pre.markdown\"); addKlippy('right', 'bottom', 'auto', '1', 'Copy code', 'Copied!');  Objetivo de la práctica En esta guía práctica revisaremos un ejemplo que fue presentado en la clase de Regresión Simple 2, se recomienda revisar el documento de presentación antes de realizar esta guía.\nLa idea es volver sobre el cálculo e interpretación de los coeficientes del modelo de regresión paso a paso y de la forma más manual posible, de modo de poder familiarizarse más cercanamente con el sentido de esta técnica y también para darse cuenta que lo que se obtendrá luego con el análisis en R no es magia sino que proviene de un procedimiento que se puede realizar también mediante lápiz y papel … o también con ayuda de una planilla simple de cálculo. Para ello usaremos un ejemplo con solo cuatro casos a modo ilustrativo.\nAdemás, vamos a revisar el cálculo e interpretación de \\(R^2\\) que es una medida de qué tan bien se ajusta el modelo de regresión a los datos. En otras palabras, qué tan bueno es el modelo, o cuánto de nuestra variable dependiente \\(Y\\) podemos saber/predecir a partir de nuestra variable independiente \\(X\\).\n Librerías pacman::p_load(stargazer, ggplot2, dplyr, webshot, sjPlot)  Datos Del ejemplo de la sesión de Regresión Simple 2 recordemos que el objetivo del ejercicio es poder predecir cuántos pasos da un hij_ por cada paso que da su madre. Tomemos como supuesto que l_s niñ_s son de la misma edad, y que se midieron los pasos de ambos mientras caminaban juntos. Entonces,la pregunta es: ¿Cuántos pasos da un hij_ (Y) por cada paso que da su mamá (X)? En otras palabras, ¿puedo predecir cuantos pasos da un niñ_ si sé cuantos pasos ha dado su mamá?\nPara esto vamos a generar un set de datos ficticios datos1:\npasos_mama_x=c(3,5,7,9) pasos_hijo_y=c(2,3,2,4) datos1 \u0026lt;-as.data.frame(cbind(pasos_hijo_y, pasos_mama_x)) datos1 ## pasos_hijo_y pasos_mama_x ## 1 2 3 ## 2 3 5 ## 3 2 7 ## 4 4 9 Tenemos una base de datos con cuatro casos y dos variables: pasos_hijo_y y pasos_mama_x. Una representación en un gráfico bivariado de puntos es la siguiente:\nVemos la distribución de los cuatro casos, se aprecia en general una relación positiva donde a medida que aumentan los pasos de la madre también aumenta la cantidad de pasos de los hij_s.\n Cálculo de los coeficientes de regresión Recordemos la ecuación del modelo de regresión:\n\\(\\hat{Y}= \\beta_0 + \\beta_{1}X_{1}\\)\nEn esta sección vamos a calcular un modelo de regresión para las variables de datos1, siendo pasos_hijo_y nuestra variable dependiente \\(Y\\), y pasos_mama_x nuestra variable independiente \\(X\\). Recordemos la fórmula del beta ( \\(\\beta\\) ) de regresión:\n\\[b_{1}=\\frac{\\sum_{i=1}^{n}(x_i - \\bar{x})(y_i - \\bar{y})} {\\sum_{i=1}^{n}(x_i - \\bar{x})(x_i - \\bar{x})}\\]\nEn el numerador (parte superior de la fracción) tenemos lo que se llama suma de productos cruzados, que representa la covariación entre \\(X\\) e \\(Y\\), y abajo la suma de los cuadrados de x, que representa la variación (varianza) de \\(X\\). El sentido de esta formula es llegar a un número que represente cuánto cambia \\(Y\\) por cada punto o unidad que aumenta \\(X\\).\nEste calculo lo vamos a hacer usando una planilla de cálculo, para ellos se puede usar Excel, Drive, o una hoja y un lápiz. Se recomienda hacerlo paso a paso siguiendo las indicaciones que vienen a continuación.\nEn la tabla aparecen nuestras variables \\(Y\\) y \\(X\\) en las columnas B y C respectivamente, bajo ellas se calcula la suma y el promedio de cada variable. Para poder calcular el \\(\\beta\\) necesitamos obtener cada término de la formula, que finalmente no son más que diferencias de cada caso respecto de su promedio, y luego la suma de ellos. Vamos por parte.\n agregamos en la columna D y-promy, que es el caso correspondiente de \\(Y\\) (pasos hijo) menos su promedio. Por ejemplo, el primer caso de \\(Y\\) tiene el valor 2, y su promedio es 2,75. Por lo tanto, 2-2,75=-0.75, que es el valor a anotar en la celda correspondiente (columna D de la fila del caso 1).\n luego, en la columna x-promx se hace lo mismo pero para la variable \\(X\\) pasos_mama_x\n en la columna siguiente (x-promx)2 se eleva al cuadrado el valor de la columna anterior para cada caso, y al final se suman. Esto corresponde al denominador del \\(\\beta\\) (lo que va en la parte de abajo de la fracción= \\(\\sum_{i=1}^{n}(x_i - \\bar{x})(x_i - \\bar{x})\\) )\n y en la columna siguiente multiplicamos x-promx por y-promy para cada caso y lo sumamos al final, que corresponde al numerador de la fracción del beta= \\(\\sum_{i=1}^{n}(x_i - \\bar{x})(y_i - \\bar{y})\\)\n  El resultado de estos cálculos se puede ver acá:\nEn la parte de abajo se incluye el cálculo del \\(\\beta\\) o más precisamente el \\(\\b_1\\), que es el que corresponde a la (primera) variable independiente X, pasos_mama_x. Este beta se obtiene dividiendo la celda G6 ( \\(\\sum_{i=1}^{n}(x_i - \\bar{x})(y_i - \\bar{y})\\) ) por la celda F6 ( \\(\\sum_{i=1}^{n}(x_i - \\bar{x})(x_i - \\bar{x})\\) ), y nos da un resultado de 0,25. **Este es el valor del \\(\\beta\\) de regresión para esta ecuación.\nPara el cálculo del intercepto de la ecuación o \\(\\beta_0\\) aplicamos la siguiente fórmula:\n\\[b_{0}=\\bar{Y}-b_{1}\\bar{X}\\]\nQue corresponde al promedio de \\(Y\\) (2,75) menos el \\(\\beta_1\\) 0,25 por el promedio de \\(X\\) (6), lo que nos da 1,25.\nCon esto podemos completar nuestra ecuación de regresión:\n\\[\\widehat{Y}=1.25 +0.25X\\]\nEntonces:\n interpretación del \\(\\beta\\) : por cada paso que da la mamá (\\(X\\)), un hij_ (\\(Y\\)) avanza en promedio 0.25 pasos\n uso en predicción: si una mamá da (por ej) 4 pasos, entonces la cantidad de pasos estimada para su hijo sería 1.25+0.25*4=2.25\n  La ecuación de regresión se puede representar en una recta, donde cada valor de la recta corresponde al valor predicho de \\(Y\\) para cada valor de \\(X\\):\n Ajuste y residuos En el gráfico anterior vemos la línea que representa la relación entre \\(X\\) e \\(Y\\) que se denomina recta de regresión, caracterizada por un intercepto (valor de \\(Y\\) cuando \\(X\\) es cero) y una pendiente o \\(\\beta\\). Claramente, esta recta es una simplificación que no abarca toda la variabilidad de los datos y por lo tanto se generará una diferencia entre los valores observados de \\(Y\\) y los valores predichos por el modelo que aparecen en la recta de regresión. Esta diferencia entre predicho (\\(\\widehat{Y}\\)) y observado (\\(Y\\)) es lo que se conoce como residuo.\nEn la imagen, los circulos corresponden a los valores observados, y lo que está en la recta son los valores predichos. La línea punteada entre ambos representa el residuo.\nLos residuos ayudan en primer lugar a entender el sentido del cálculo de la recta de regresión. La mejor recta será aquella que minimice lo más posible el valor de los residuos. Para realizar la suma de los residuos estos se elevan al cuadrado, lo que se denomina suma de residuos al cuadrado o \\(SS_{residual}\\) (ya que como hay residuos positivos y negativos unos se cancelan a otros y la suma es 0). Por lo tanto, el cálculo de la recta de regresión busca que la suma de todos los residuos (al cuadrado) sea la menor posible, que es justamente lo que hicimos arriba con la fórmula del \\(\\beta\\). Este procedimiento es el que da nombre al proceso de estimación: minimos cuadrados ordinarios, o OLS (Ordinary Least Squares).\nAhora, considerando que un mismo modelo de regresión puede representar distintas distribuciones de datos con distintos residuos (ver cuarteto de Anscombe en la sesión Regresión Simple 2, pag. 23), se requiere información adicional para poder evaluar qué tan bueno es el modelo, lo que se conoce como bondad de ajuste. La pregunta es: ¿qué tan bien representa mi modelo a la distribución de los datos? ¿Me permite hacer una buena predicción de Y a partir de X, o mi predicción no es tan buena? Una forma de evaluar esto es calcular la cantidad de residuos que genera el modelo. Sin embargo, si sumamos los residuos nos quedamos con un número difícil de interpretar en términos de ajuste. Por ello, el ajuste se representa en un número sencillo que es el \\(R^2\\).\nEl \\(R^2\\) es un número que varía entre 0 y 1 y que representa qué porcentaje de la varianza de \\(Y\\) podemos explicar con \\(X\\). A menores residuos, mejor predicción, y entonces mayor \\(R^2\\). De otra manera, si todos los valores predichos calzaran perfecto en la recta de regresión tendríamos cero residuos, y por lo tanto el \\(R^2\\) sería 1.\n Cálculo del R2 Se puede representar de la siguiente manera:\n\\[R^2=\\frac{SS_{reg}}{SS_{tot}}\\]\n El primer término \\(SS_{reg}\\) es la Suma de cuadrados de la regresión, y representa la diferencia entre lo estimado (\\(\\hat{y}\\)) y el promedio de Y ( \\(\\bar{y}\\)). Se puede interpretar como cuánto de Y podemos conocer (además de su promedio) si es que también conocemos X. En otras palabras: ¿cuánto me aporta \\(X\\) para saber de \\(Y\\), más allá del mero promedio de \\(Y\\)? Para ello, se resta a lo estimado el promedio de Y para cada caso, y luego se suma:  \\[SS_{reg} = \\sum(\\hat{y}-\\bar{y})^2\\]\n Suma Total de Cuadrados ( \\(SS_{tot}\\) ) : La suma de las diferencias del promedio de Y al cuadrado (que representa la varianza total de Y)  \\[SS_{tot} = \\sum(y-\\bar{y})^2 \\]\nPara ejemplificar el cálculo vamos a seguir con la misma planilla que usamos para calcular los parámetros del modelo de regresión, agregando las siguientes columnas:\n predY: predicción de \\(Y\\) (pasos hijo) a partir de nuestro modelo de regresión\n predY-promY : la predicción de \\(Y\\) - su promedio\n (predY-promY)2: se eleva cada valor al cuadrado; la suma de esto nos da \\(SS_{reg}\\)\n y-promy2: las diferencias de cada valor de \\(Y\\) de su promedio (que ya estaban en la columna D) al cuadrado. La suma de esto nos da \\(SS_{tot}\\)\n  Reemplazando,\n\\[R^2=\\frac{SS_{reg}}{SS_{tot}}=\\frac{1,25}{2,75}=0,455\\]\nEntonces, el porcentaje de varianza de nuestra variable dependiente \\(Y\\) “pasos_hijo_y” que podemos relacionar con nuestra variable independente X “pasos_mama_x” es de un 45%. En otras palabras, si conocemos los pasos de la madre podemos explicar/conocer un 45% de los pasos de los hijos. Y de otra manera, hay un 55% de la varianza de \\(Y\\) que no se asocia a \\(X\\) … y que probablemente tiene que ver con otras variables.\n Vamos a R Cálculo del modelo de regresión:\nmodelo1 \u0026lt;- lm(pasos_hijo_y ~ pasos_mama_x, data = datos1) Como vimos la práctica anterior, aplicamos la funcion lm (linear model) y obtenemos los parámetros correspondientes que podemos visualizar así:\nsummary(modelo1) ## ## Call: ## lm(formula = pasos_hijo_y ~ pasos_mama_x, data = datos1) ## ## Residuals: ## 1 2 3 4 ## 0.0 0.5 -1.0 0.5 ## ## Coefficients: ## Estimate Std. Error t value Pr(\u0026gt;|t|) ## (Intercept) 1.2500 1.2400 1.008 0.420 ## pasos_mama_x 0.2500 0.1936 1.291 0.326 ## ## Residual standard error: 0.866 on 2 degrees of freedom ## Multiple R-squared: 0.4545, Adjusted R-squared: 0.1818 ## F-statistic: 1.667 on 1 and 2 DF, p-value: 0.3258 Esta tabla es algo rudimentaria y entrega más información de la que podemos interpretar hasta ahora, pero lo importante es que en la columna “Estimate” aparece el cálculo de los parámetros del intercepto (1,25) y del beta de regresión correspondiente a la variable \\(X\\) pasos_mama_x (0,25). Además, abajo en la leyenda aparece “Multiple R-squared”, que corresponde al \\(R^2\\) que calculamos arriba.\nUna tabla con un mejor formato se puede visualizar con el comando tab_model, de la librería sjPlot. Nuevamente, aparece más información de la que podemos interpretar, lo importante es por ahora fijarse en la columna Estimates y en el \\(R^2\\)\nsjPlot::tab_model(modelo1)   pasos hijo y    Predictors  Estimates  CI  p    (Intercept)  1.25  -4.09 – 6.59  0.420    pasos_mama_x  0.25  -0.58 – 1.08  0.326    Observations  4    R2 / R2 adjusted  0.455 / 0.182     Correlación y regresión Siguiendo con el ejemplo, la correlación entre las variables dependiente e independiente del ejemplo con datos1 es la siguiente:\ncor(datos1$pasos_hijo_y, datos1$pasos_mama_x) ## [1] 0.6741999 Si elevamos este valor al cuadrado\n(0.674)^2 ## [1] 0.454276 … que es el valor que habíamos calculado para \\(R^2\\). Es decir, en este caso particular de regresión simple (una variable independiente \\(X\\)) \\(r\\) de Pearson al cuadrado es = \\(R^2\\), y nos dice qué parte de la varianza es compartida entre \\(X\\) e \\(Y\\).\nSi bien hay similitudes entre correlación y regresión en términos de varianza compartida, también hay diferencias. La correlación es conmutativa, es decir, el orden de los factores no altera el producto:\ncor(datos1$pasos_hijo_y, datos1$pasos_mama_x) ## [1] 0.6741999 cor(datos1$pasos_mama_x, datos1$pasos_hijo_y) ## [1] 0.6741999 Sin embargo, la regresión entre \\(X\\) e \\(Y\\) no es la misma que entre \\(Y\\) y \\(X\\):\nlm(datos1$pasos_hijo_y ~ datos1$pasos_mama_x)$coefficients ## (Intercept) datos1$pasos_mama_x ## 1.25 0.25 lm(datos1$pasos_mama_x ~ datos1$pasos_hijo_y)$coefficients ## (Intercept) datos1$pasos_hijo_y ## 1.000000 1.818182 Esto se produce porque con la regresión se predice el valor de \\(Y\\) a partir de \\(X\\), y los valores de \\(X\\) son distintos en los dos casos.\n Reporte de progreso Completar el reporte de progreso aquí.\n Foro  ","date":1650240000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1651081359,"objectID":"0b905da0b361a42246b0f7d03e970a84","permalink":"https://multivariada.netlify.app/assignment/04-code/","publishdate":"2022-04-18T00:00:00Z","relpermalink":"/assignment/04-code/","section":"assignment","summary":"pre  code.sourceCode { white-space: pre; position: relative; } pre  code.sourceCode  span { display: inline-block; line-height: 1.25; } pre  code.sourceCode  span:empty { height: 1.2em; } .sourceCode { overflow: visible; } code.sourceCode  span { color: inherit; text-decoration: inherit; } div.sourceCode { margin: 1em 0; } pre.sourceCode { margin: 0; } @media screen { div.sourceCode { overflow: auto; } } @media print { pre  code.","tags":null,"title":"Práctica 4. Regresión simple 2","type":"docs"},{"authors":null,"categories":null,"content":"    pre  code.sourceCode { white-space: pre; position: relative; } pre  code.sourceCode  span { display: inline-block; line-height: 1.25; } pre  code.sourceCode  span:empty { height: 1.2em; } .sourceCode { overflow: visible; } code.sourceCode  span { color: inherit; text-decoration: inherit; } div.sourceCode { margin: 1em 0; } pre.sourceCode { margin: 0; } @media screen { div.sourceCode { overflow: auto; } } @media print { pre  code.sourceCode { white-space: pre-wrap; } pre  code.sourceCode  span { text-indent: -5em; padding-left: 5em; } } pre.numberSource code { counter-reset: source-line 0; } pre.numberSource code  span { position: relative; left: -4em; counter-increment: source-line; } pre.numberSource code  span  a:first-child::before { content: counter(source-line); position: relative; left: -1em; text-align: right; vertical-align: baseline; border: none; display: inline-block; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; padding: 0 4px; width: 4em; color: #aaaaaa; } pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; } div.sourceCode { background-color: #f8f8f8; } @media screen { pre  code.sourceCode  span  a:first-child::before { text-decoration: underline; } } code span.al { color: #ef2929; } /* Alert */ code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */ code span.at { color: #c4a000; } /* Attribute */ code span.bn { color: #0000cf; } /* BaseN */ code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */ code span.ch { color: #4e9a06; } /* Char */ code span.cn { color: #000000; } /* Constant */ code span.co { color: #8f5902; font-style: italic; } /* Comment */ code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */ code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */ code span.dt { color: #204a87; } /* DataType */ code span.dv { color: #0000cf; } /* DecVal */ code span.er { color: #a40000; font-weight: bold; } /* Error */ code span.ex { } /* Extension */ code span.fl { color: #0000cf; } /* Float */ code span.fu { color: #000000; } /* Function */ code span.im { } /* Import */ code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */ code span.kw { color: #204a87; font-weight: bold; } /* Keyword */ code span.op { color: #ce5c00; font-weight: bold; } /* Operator */ code span.ot { color: #8f5902; } /* Other */ code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */ code span.sc { color: #000000; } /* SpecialChar */ code span.ss { color: #4e9a06; } /* SpecialString */ code span.st { color: #4e9a06; } /* String */ code span.va { color: #000000; } /* Variable */ code span.vs { color: #4e9a06; } /* VerbatimString */ code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */  Índice  Librerías Datos  Explorar datos  Medición y transformación de variables  Creación de índices Recuperar casos perdidos: ejemplo variable INGRESOS Ingresos como variable categórica  Estimación    addClassKlippyTo(\"pre.r, pre.markdown\"); addKlippy('right', 'bottom', 'auto', '1', 'Copy code', 'Copied!');  Librerías pacman::p_load(dplyr, summarytools, sjPlot,texreg, corrplot,ggplot2,ggfortify,sandwich,lmtest,sjlabelled)  Datos El Estudio Longitudinal Social del Chile (ENACOES 2014), único en Chile y América Latina, consiste en encuestar a casi 3.000 chilenos, anualmente, a lo largo de una década. ELSOC ha sido diseñado para evaluar la manera cómo piensan, sienten y se comportan los chilenos en torno a un conjunto de temas referidos al conflicto y la cohesión social en Chile. La población objetivo son hombres y mujeres entre 15 y 75 años de edad con un alcance nacional, donde se obtuvo una muestra final de 3748 casos en el año 2018.\nload(\u0026quot;content/assignment/data/elsoc18p11.RData\u0026quot;) #Cargamos la base de datos desde internet load(url(\u0026quot;https://multivariada.netlify.com/assignment/data/elsoc18p11.RData\u0026quot;)) Explorar datos A partir de la siguiente tabla se obtienen estadísticos descriptivos que luego serán relevantes para realizar las transformaciones y análisis posteriores.\nview(dfSummary(elsoc, headings = FALSE, method = \u0026quot;render\u0026quot;))   No Variable Label Stats / Values Freqs (% of Valid) Graph Valid Missing     1 sexo [numeric] Sexo entrevistado Min : 0 Mean : 0.6 Max : 1 0:1446(38.6%)1:2302(61.4%)  3748 (100.0%) 0 (0.0%)   2 edad [numeric] Edad entrevistado Mean (sd) : 47.1 (15.5) min 70 distinct values  3748 (100.0%) 0 (0.0%)   3 educ [factor] Nivel educacional 1. 1 2. 2 3. 3 4. 4 5. 5 450(12.0%)370(9.9%)1600(42.7%)598(16.0%)725(19.4%)  3743 (99.9%) 5 (0.1%)   4 pospol [factor] Autoubicacion escala izquierda-derecha 1. 1 2. 2 3. 3 4. 4 807(22.0%)952(26.0%)734(20.0%)1171(32.0%)  3664 (97.8%) 84 (2.2%)   5 part01 [numeric] Frecuencia: Firma carta o peticion apoyando causa Mean (sd) : 1.5 (0.9) min 1:2717(72.6%)2:476(12.7%)3:411(11.0%)4:117(3.1%)5:21(0.6%)  3742 (99.8%) 6 (0.2%)   6 part02 [numeric] Frecuencia: Asiste a marcha o manifestacion pacifica Mean (sd) : 1.2 (0.6) min 1:3289(87.8%)2:195(5.2%)3:191(5.1%)4:51(1.4%)5:19(0.5%)  3745 (99.9%) 3 (0.1%)   7 part03 [numeric] Frecuencia: Participa en huelga Mean (sd) : 1.2 (0.5) min 1:3407(91.0%)2:152(4.1%)3:146(3.9%)4:29(0.8%)5:11(0.3%)  3745 (99.9%) 3 (0.1%)   8 part04 [numeric] Frecuencia: Usa redes sociales para opinar en temas publicos Mean (sd) : 1.6 (1.1) min 1:2598(69.4%)2:310(8.3%)3:514(13.7%)4:223(6.0%)5:98(2.6%)  3743 (99.9%) 5 (0.1%)   9 inghogar [numeric] Ingreso total del hogar Mean (sd) : 678842.5 (781003.9) min 227 distinct values  3080 (82.2%) 668 (17.8%)   10 inghogar_t [numeric] Ingreso total del hogar (en tramos) Mean (sd) : 7 (5.4) min 20 distinct values  477 (12.7%) 3271 (87.3%)   11 tamhogar [numeric] Habitantes del hogar Mean (sd) : 3.2 (1.6) min 13 distinct values  3741 (99.8%) 7 (0.2%)    Generated by summarytools 0.9.9 (R version 4.0.3)2022-04-11\n view_df(elsoc,max.len = 50)  Data frame: elsoc   ID  Name  Label  Values  Value Labels    1  sexo  Sexo entrevistado  0\n1  Hombre\nMujer    2  edad  Edad entrevistado  range: 18-90    3  educ  Nivel educacional  1\n2\n3\n4\n5  Primaria incompleta menos\nPrimaria y secundaria baja\nSecundaria alta\nTerciaria ciclo corto\nTerciaria y Postgrado    4  pospol  Autoubicacion escala izquierda-derecha  1\n2\n3\n4  Derecha\nCentro\nIzquierda\nIndep./Ninguno    5  part01  Frecuencia: Firma carta o peticion apoyando causa  1\n2\n3\n4\n5  Nunca\nCasi nunca\nA veces\nFrecuentemente\nMuy frecuentemente    6  part02  Frecuencia: Asiste a mbackground-color:#eeeeeeha o manifestacion\npacifica  1\n2\n3\n4\n5  Nunca\nCasi nunca\nA veces\nFrecuentemente\nMuy frecuentemente    7  part03  Frecuencia: Participa en huelga  1\n2\n3\n4\n5  Nunca\nCasi nunca\nA veces\nFrecuentemente\nMuy frecuentemente    8  part04  Frecuencia: Usa redes sociales para opinar en\ntemas publicos  1\n2\n3\n4\n5  Nunca\nCasi nunca\nA veces\nFrecuentemente\nMuy frecuentemente    9  inghogar  Ingreso total del hogar  range: 30000-17000000    10  inghogar_t  Ingreso total del hogar (en tramos)  1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20  Menos de $220.000 mensuales liquidos\nDe $220.001 a $280.000 mensuales liquidos\nDe $280.001 a $330.000 mensuales liquidos\nDe $330.001 a $380.000 mensuales liquidos\nDe $380.001 a $420.000 mensuales liquidos\nDe $420.001 a $470.000 mensuales liquidos\nDe $470.001 a $510.000 mensuales liquidos\nDe $510.001 a $560.000 mensuales liquidos\nDe $560.001 a $610.000 mensuales liquidos\nDe $610.001 a $670.000 mensuales liquidos\nDe $670.001 a $730.000 mensuales liquidos\nDe $730.001 a $800.000 mensuales liquidos\nDe $800.001 a $890.000 mensuales liquidos\nDe $890.001 a $980.000 mensuales liquidos\nDe $980.001 a $1.100.000 mensuales liquidos\nDe $1.100.001 a $1.260.000 mensuales liquidos\nDe $1.260.001 a $1.490.000 mensuales liquidos\nDe $1.490.001 a $1.850.000 mensuales liquidos\nDe $1.850.001 a $2.700.000 mensuales liquidos\nMas de $2.700.000 a mensuales liquidos    11  tamhogar  Habitantes del hogar  range: 1-14      Medición y transformación de variables Creación de índices En ELSOC existen cuatro preguntas referentes a la participación política o ciudadana, donde se le pregunta a las personas por la frecuencia en que han participado de determinados eventos vinculados a su rol como ciudadanos. Para esto, se emplearon escalas likert de 5 categorías para medir dicha participación.\nplot_stackfrq(elsoc[,c(\u0026quot;part01\u0026quot;,\u0026quot;part02\u0026quot;,\u0026quot;part03\u0026quot;,\u0026quot;part04\u0026quot;)]) + theme(legend.position=\u0026quot;bottom\u0026quot;) En la figura anterior, podemos ver que existe un alto porcentaje de personas que declaran no haber participado nunca en alguna de estas expresiones de la participación ciudadana. En este sentido, para la creación de un índice o medida agrupada, nos interesa saber si existe algún grado de relación entre nuestros indicadores. Para esto, lo que tradicionalmente se realiza es realizar un análisis de correlación entre los indicadores.\ncorrplot.mixed(cor(select(elsoc,part01,part02,part03,part04),  use = \u0026quot;complete.obs\u0026quot;)) La matriz de correlación nos indica que existen correlaciones moderadas entre los indicadores, donde 0.25 es la más baja y 0.44 la más alta. Es muy importante realizar este paso, debido a que si nuestros indicadores no correlacionan en absoluto, es posible que estemos frente a un atributo distinto. Por lo tanto, sería poco adecuado realizar la construcción de un índice que busque representar un fenómeno o constructo “común” a través de indicadores que no poseen ningún grado de correlación.\nEn nuestro caso, hemos decidido elaborar un índice sumatorio a través de la suma de las respuestas de cada individuo. Para ello emplearemos las funciones mutate (para crear una nueva variable) y rowwise() (para sumar los valores de varias filas) de la librería dplyr.\nelsoc \u0026lt;- elsoc %\u0026gt;% rowwise() %\u0026gt;% mutate(partpol = sum(part01,part02,part03,part04, na.rm = T)) Esta sintaxis genera un índice sumativo en la variable partpol. En caso de índice promedio, simplemente remplazar sum por mean\ndescr(elsoc$partpol,style = \u0026quot;rmarkdown\u0026quot;,stats = \u0026quot;common\u0026quot;, transpose = T,headings = F)    Mean Std.Dev Min Median Max N.Valid Pct.Valid    partpol 5.47 2.30 0.00 4.00 20.00 3748.00 100.00    plot_frq(data = elsoc$partpol,type = \u0026quot;hist\u0026quot;,show.mean = T) Vemos que el índice sumatorio posee valores que van desde 4 hasta 20, con una media de 5,47 y una mediana de 4. Además, vemos algo que ya se había identificado en el gráfico descriptivo de cada indicador por separado, el hecho que existe una proporción importante de personas que respondieron “nunca” en los cuatro indicadores, los cuales son representados por una alta frecuencia de 4 en el histograma. Con esto hemos creado nuestro índice sumatorio de Participación Política.\nSobre tratamiento de casos perdidos en el índice\nPartamos viendo lo siguiente\nelsoc %\u0026gt;% select(part01,part02,part03,part04,partpol) %\u0026gt;% filter(is.na(part04)) ## # A tibble: 5 x 5 ## # Rowwise: ## part01 part02 part03 part04 partpol ## \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; ## 1 NA NA NA NA 0 ## 2 3 3 1 NA 7 ## 3 NA NA NA NA 0 ## 4 1 1 1 NA 3 ## 5 NA NA NA NA 0 Acá se muestra una selección de filtrados con NAs en una de las variables (part04), y la información de las variables que componen el índice y la variable partpol, que es el índice sumativo que generamos. Vemos que en el caso que todos los valores de las variables sean NA se genera el valor 0, de otra manera se suma la información disponible. Ante esto se abren una serie de alternativas:\ndejar así el valor 0, considerando que puede distorsionar nuestros resultados\n reemplazar el valor 0 en esta variable por NA\n  elsoc$partpol \u0026lt;- car::recode(elsoc$partpol, \u0026quot;0=NA\u0026quot;)  # Resultado elsoc %\u0026gt;% select(part01,part02,part03,part04,partpol) %\u0026gt;% filter(is.na(part04)) ## # A tibble: 5 x 5 ## # Rowwise: ## part01 part02 part03 part04 partpol ## \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; ## 1 NA NA NA NA NA ## 2 3 3 1 NA 7 ## 3 NA NA NA NA NA ## 4 1 1 1 NA 3 ## 5 NA NA NA NA NA no sumar si es que hay algún caso perdido en la fila (no muy recomendable, ya que se generan muchos casos perdidos). Para esto, simplemente omitir el na.rm = T de la sintaxis de generación original  elsoc \u0026lt;- elsoc %\u0026gt;% rowwise() %\u0026gt;% mutate(partpol = sum(part01,part02,part03,part04)) elsoc %\u0026gt;% select(part01,part02,part03,part04,partpol) %\u0026gt;% filter(is.na(part04)) ## # A tibble: 5 x 5 ## # Rowwise: ## part01 part02 part03 part04 partpol ## \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; ## 1 NA NA NA NA NA ## 2 3 3 1 NA NA ## 3 NA NA NA NA NA ## 4 1 1 1 NA NA ## 5 NA NA NA NA NA  Recuperar casos perdidos: ejemplo variable INGRESOS Es común que en las encuestas sociales cierta variables posean una alta proporción de datos perdidos. Un ejemplo común es en el reporte de los ingresos de los hogares o individuos. Esto generalmente puede generarse por características de la persona (p.ej. desempleado, estudiante) o por deseabilidad social (personas de altos ingresos desisten de reportar). En el caso de ELSOC, existen dos estrategias para solicitar que las personas reporten sus ingresos. La primera consiste en preguntar directamente por el monto en pesos chilenos de los ingresos totales del hogar. Alternativamente, si la persona no reporta los ingresos, se le presenta la posibilidad de ubicar los ingresos del hogar en tramos (Por ejemplo “De $560.001 a $610.000 mensuales liquidos”). De esta manera, si existen datos perdidos en la primera, se emplea la segunda pregunta para tener un nivel aproximado del ingreso del hogar.\ndescr(elsoc$inghogar,style = \u0026quot;rmarkdown\u0026quot;,stats = \u0026quot;common\u0026quot;, transpose = T,headings = F)    Mean Std.Dev Min Median Max N.Valid Pct.Valid    inghogar 678842.52 781003.92 30000.00 500000.00 17000000.00 3080.00 82.18    sjmisc::frq(elsoc$inghogar_t,  out = \u0026quot;txt\u0026quot;,  show.na = T) %\u0026gt;% knitr::kable()      val label frq raw.prc valid.prc cum.prc    1 Menos de $220.000 mensuales liquidos 62 1.65 13.00 13.00  2 De $220.001 a $280.000 mensuales liquidos 46 1.23 9.64 22.64  3 De $280.001 a $330.000 mensuales liquidos 57 1.52 11.95 34.59  4 De $330.001 a $380.000 mensuales liquidos 40 1.07 8.39 42.98  5 De $380.001 a $420.000 mensuales liquidos 38 1.01 7.97 50.94  6 De $420.001 a $470.000 mensuales liquidos 37 0.99 7.76 58.70  7 De $470.001 a $510.000 mensuales liquidos 27 0.72 5.66 64.36  8 De $510.001 a $560.000 mensuales liquidos 15 0.40 3.14 67.51  9 De $560.001 a $610.000 mensuales liquidos 24 0.64 5.03 72.54  10 De $610.001 a $670.000 mensuales liquidos 12 0.32 2.52 75.05  11 De $670.001 a $730.000 mensuales liquidos 15 0.40 3.14 78.20  12 De $730.001 a $800.000 mensuales liquidos 16 0.43 3.35 81.55  13 De $800.001 a $890.000 mensuales liquidos 8 0.21 1.68 83.23  14 De $890.001 a $980.000 mensuales liquidos 14 0.37 2.94 86.16  15 De $980.001 a $1.100.000 mensuales liquidos 14 0.37 2.94 89.10  16 De $1.100.001 a $1.260.000 mensuales liquidos 10 0.27 2.10 91.19  17 De $1.260.001 a $1.490.000 mensuales liquidos 7 0.19 1.47 92.66  18 De $1.490.001 a $1.850.000 mensuales liquidos 11 0.29 2.31 94.97  19 De $1.850.001 a $2.700.000 mensuales liquidos 14 0.37 2.94 97.90  20 Mas de $2.700.000 a mensuales liquidos 10 0.27 2.10 100.00    3271 87.27          Si observamos la tabla de descriptivos para la variable ingreso del hogar (inghogar), tenemos un porcentaje 17,82% de datos perdidos. Por esta razón, emplearemos los datos disponibles en inghogar_t para recuperar información en los ingresos del hogar.\nLa estrategia posee los siguientes pasos:\nCalcular la media del tramo reportado. En el caso de que la persona no haya reportado el monto de los ingresos del hogar, remplazamos este valor perdido por el valor de la media del tramo, en el caso de estar disponible. Comparamos la variable original con la nueva variable que posee información recuperada.  Paso 1: Calcular la media por cada tramo\nelsoc$inghogar_t[elsoc$inghogar_t==1] \u0026lt;-( 220000 ) # [1] \u0026quot;Menos de $220.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==2] \u0026lt;-(220001 +280000 )/2 # [2] \u0026quot;De $220.001 a $280.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==3] \u0026lt;-(280001 +330000 )/2 # [3] \u0026quot;De $280.001 a $330.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==4] \u0026lt;-(330001 +380000 )/2 # [4] \u0026quot;De $330.001 a $380.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==5] \u0026lt;-(380001 +420000 )/2 # [5] \u0026quot;De $380.001 a $420.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==6] \u0026lt;-(420001 +470000 )/2 # [6] \u0026quot;De $420.001 a $470.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==7] \u0026lt;-(470001 +510000 )/2 # [7] \u0026quot;De $470.001 a $510.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==8] \u0026lt;-(510001 +560000 )/2 # [8] \u0026quot;De $510.001 a $560.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==9] \u0026lt;-(560001 +610000 )/2 # [9] \u0026quot;De $560.001 a $610.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==10]\u0026lt;-(610001 +670000 )/2 # [10] \u0026quot;De $610.001 a $670.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==11]\u0026lt;-(670001 +730000 )/2 # [11] \u0026quot;De $670.001 a $730.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==12]\u0026lt;-(730001 +800000 )/2 # [12] \u0026quot;De $730.001 a $800.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==13]\u0026lt;-(800001 +890000 )/2 # [13] \u0026quot;De $800.001 a $890.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==14]\u0026lt;-(890001 +980000 )/2 # [14] \u0026quot;De $890.001 a $980.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==15]\u0026lt;-(980001 +1100000)/2 # [15] \u0026quot;De $980.001 a $1.100.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==16]\u0026lt;-(1100001+1260000)/2 # [16] \u0026quot;De $1.100.001 a $1.260.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==17]\u0026lt;-(1260001+1490000)/2 # [17] \u0026quot;De $1.260.001 a $1.490.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==18]\u0026lt;-(1490001+1850000)/2 # [18] \u0026quot;De $1.490.001 a $1.850.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==19]\u0026lt;-(1850001+2700000)/2 # [19] \u0026quot;De $1.850.001 a $2.700.000 mensuales liquidos\u0026quot; elsoc$inghogar_t[elsoc$inghogar_t==20]\u0026lt;-(2700000) # [20] \u0026quot;Mas de $2.700.000 a mensuales liquidos\u0026quot; Paso 2: En el caso de no tener información, remplazar por la media del tramo\nelsoc$inghogar_i \u0026lt;- ifelse(test = (is.na(elsoc$inghogar)), #¿existen NA en ingresos?  yes = elsoc$inghogar_t, #VERDADERO, remplazar con la media del tramo  no = elsoc$inghogar) #FALSE, mantener la variable original.  elsoc$inghogar_i \u0026lt;- set_label(elsoc$inghogar_i,\u0026quot;Ingreso total del hogar (imputada)\u0026quot;) Paso 3: Comparamos la variable original con la nueva\nsjmisc::descr(elsoc[,c(\u0026quot;inghogar\u0026quot;,\u0026quot;inghogar_i\u0026quot;)],  show =c(\u0026quot;label\u0026quot;, \u0026quot;n\u0026quot;, \u0026quot;NA.prc\u0026quot;, \u0026quot;mean\u0026quot;, \u0026quot;md\u0026quot;,\u0026quot;sd\u0026quot;)) %\u0026gt;% knitr::kable(digits = 2)     var label n NA.prc mean sd md    inghogar Ingreso total del hogar 3080 17.82 678842.5 781003.9 500000  inghogar_i Ingreso total del hogar (imputada) 3557 5.10 668539.5 752608.2 480000    Vemos que pasamos de tener 17,82% de datos perdidos a un 5,1%, es decir recuperamos un 12,72% de los casos que antes tenían datos perdidos en la variable ingreso. Con estos datos podemos calcular el ingreso per capita del hogar, empleando la variable habitantes del hogar (tamhogar).\nelsoc$ing_pcap \u0026lt;- elsoc$inghogar_i/elsoc$tamhogar elsoc$ing_pcap \u0026lt;- set_label(elsoc$ing_pcap,\u0026quot;Ingreso per cápita del hogar\u0026quot;) sjmisc::descr(elsoc[,c(\u0026quot;inghogar\u0026quot;,\u0026quot;inghogar_i\u0026quot;,\u0026quot;tamhogar\u0026quot;,\u0026quot;ing_pcap\u0026quot;)],  show =c(\u0026quot;label\u0026quot;, \u0026quot;n\u0026quot;, \u0026quot;NA.prc\u0026quot;, \u0026quot;mean\u0026quot;, \u0026quot;md\u0026quot;,\u0026quot;sd\u0026quot;)) %\u0026gt;% knitr::kable(digits = 2)     var label n NA.prc mean sd md    2 inghogar Ingreso total del hogar 3080 17.82 678842.52 781003.92 500000.0  3 inghogar_i Ingreso total del hogar (imputada) 3557 5.10 668539.54 752608.16 480000.0  4 tamhogar Habitantes del hogar 3741 0.19 3.16 1.57 3.0  1 ing_pcap Ingreso per cápita del hogar 3552 5.23 263057.71 350338.36 166666.7    Vemos que la variable tamhogar posee un 0,19% de datos perdidos, por lo cual, al calcular el ingreso per cápita, vemos que el porcentaje de casos sin información en la nueva variable aumenta levemente a un 5,23%.\n Ingresos como variable categórica Teniendo el ingreso per cápita del hogar, podemos calcular categorías de ingresos tales como los quintiles (o deciles). Por lo tanto, podemos clasificar a los individuos según sus ingresos en una variable categórica.\nEl procedimiento es el siguiente:\nelsoc$quintile\u0026lt;- dplyr::ntile(x = elsoc$ing_pcap,  n = 5) # n de categorias, para quintiles usamos 5 elsoc$quintile \u0026lt;- factor(elsoc$quintile,c(1,2,3,4,5), c(\u0026quot;Quintil 1\u0026quot;,\u0026quot;Quintil 2\u0026quot;,\u0026quot;Quintil 3\u0026quot;,\u0026quot;Quintil 4\u0026quot;,\u0026quot;Quintil 5\u0026quot;)) elsoc %\u0026gt;%  group_by(quintile) %\u0026gt;%  summarise(n=n(),  Media=mean(ing_pcap,na.rm = T),  Mediana=median(ing_pcap,na.rm = T)) %\u0026gt;%  knitr::kable()   quintile n Media Mediana    Quintil 1 711 62859.09 66666.67  Quintil 2 711 112218.97 111250.12  Quintil 3 710 167748.23 166666.67  Quintil 4 710 262710.27 250000.50  Quintil 5 710 710246.41 500000.00   196      En la tabla podemos observar que la variable quintile posee 5 grupos de tamaño equivalente. Además, agregamos la media y la mediana de los ingresos para cada categoría para ilustrar que podemos tratar esta variable como categórica y ordinal.\nExiste una última estrategia que podemos utilizar para recuperar ese 5,23% (n=196) de casos perdidos. Para esto, generamos una categoría adicional para los datos perdidos, es decir, recodificamos los NA para que se incluyan como una nueva categoría.\nEl procedimiento es el siguiente:\nelsoc$quintilemiss \u0026lt;- factor(elsoc$quintile,ordered = T) elsoc$quintilemiss \u0026lt;- ifelse(is.na(elsoc$quintilemiss),yes = 6,no = elsoc$quintilemiss) elsoc$quintilemiss \u0026lt;- factor(elsoc$quintilemiss ,levels = c(1,2,3,4,5,6),labels = c(\u0026quot;Quintil 1\u0026quot;,\u0026quot;Quintil 2\u0026quot;,\u0026quot;Quintil 3\u0026quot;,\u0026quot;Quintil 4\u0026quot;,\u0026quot;Quintil 5\u0026quot;,\u0026quot;Missing\u0026quot;)) elsoc %\u0026gt;% group_by(quintilemiss) %\u0026gt;% summarise(n=n()) ## # A tibble: 6 x 2 ## quintilemiss n ## \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; ## 1 Quintil 1 711 ## 2 Quintil 2 711 ## 3 Quintil 3 710 ## 4 Quintil 4 710 ## 5 Quintil 5 710 ## 6 Missing 196 Teniendo una nueva categoría de ingresos, podemos recuperar estos casos para los posteriores análisis. A continuación, se llevaran a cabo una serie de análisis que nos permitirán comprar los resultados según distintas especificaciones y empleando distintas maneras de operacionalizar la variable ingresos.\n  Estimación fit01\u0026lt;- lm(partpol~sexo+edad+ing_pcap+pospol,data=elsoc) fit02\u0026lt;- lm(partpol~sexo+edad+quintile+pospol,data=elsoc) fit03\u0026lt;- lm(partpol~sexo+edad+quintilemiss+pospol,data=elsoc) labs01 \u0026lt;- c(\u0026quot;Intercepto\u0026quot;,\u0026quot;Sexo (mujer=1)\u0026quot;,\u0026quot;Edad\u0026quot;,\u0026quot;Ingreso per/cap\u0026quot;,\u0026quot;Centro (ref. derecha)\u0026quot;,\u0026quot;Izquierda\u0026quot;,\u0026quot;Idep./Ninguno\u0026quot;,  \u0026quot;Quintil 2\u0026quot;,\u0026quot;Quintil 3\u0026quot;,\u0026quot;Quintil 4\u0026quot;,\u0026quot;Quintil 5\u0026quot;,  \u0026quot;Quintil 2\u0026quot;,\u0026quot;Quintil 3\u0026quot;,\u0026quot;Quintil 4\u0026quot;,\u0026quot;Quintil 5\u0026quot;,\u0026quot;Quintil perdido\u0026quot;) htmlreg(list(fit01,fit02,fit03),doctype = FALSE,  custom.model.names = c(\u0026quot;Modelo 1\u0026quot;,\u0026quot;Modelo 2\u0026quot;,\u0026quot;Modelo 3\u0026quot;),  custom.coef.names = labs01)  Statistical models     Modelo 1  Modelo 2  Modelo 3     Intercepto  8.27***  7.94***  7.97***     (0.14)  (0.16)  (0.16)    Sexo (mujer=1)  0.05  0.13  0.12     (0.07)  (0.08)  (0.07)    Edad  -0.04***  -0.04***  -0.04***     (0.00)  (0.00)  (0.00)    Ingreso per/cap  0.00***       (0.00)      Centro (ref. derecha)  -1.02***  -1.04***  -1.04***     (0.10)  (0.10)  (0.10)    Izquierda  -1.10***  -1.12***  -1.13***     (0.11)  (0.11)  (0.11)    Idep./Ninguno  -1.59***  -1.58***  -1.60***     (0.10)  (0.10)  (0.10)    Quintil 2   0.22  0.21      (0.11)  (0.11)    Quintil 3   0.51***  0.51***      (0.11)  (0.11)    Quintil 4   0.51***  0.50***      (0.11)  (0.11)    Quintil 5   0.89***  0.88***      (0.12)  (0.12)    Quintil perdido    0.59***       (0.18)   R2  0.17  0.17  0.17    Adj. R2  0.16  0.17  0.17   Num. obs.  3475  3475  3656      p \u0026lt; 0.001; p \u0026lt; 0.01; p \u0026lt; 0.05      ","date":1649635200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1649694481,"objectID":"5594772ee389e3a8f923e29a8eccc9c3","permalink":"https://multivariada.netlify.app/assignment/11-code/","publishdate":"2022-04-11T00:00:00Z","relpermalink":"/assignment/11-code/","section":"assignment","summary":"pre  code.sourceCode { white-space: pre; position: relative; } pre  code.sourceCode  span { display: inline-block; line-height: 1.25; } pre  code.sourceCode  span:empty { height: 1.2em; } .sourceCode { overflow: visible; } code.sourceCode  span { color: inherit; text-decoration: inherit; } div.sourceCode { margin: 1em 0; } pre.sourceCode { margin: 0; } @media screen { div.sourceCode { overflow: auto; } } @media print { pre  code.","tags":null,"title":"Guía de índices y transformación de variables","type":"docs"},{"authors":null,"categories":null,"content":"  Índice  Documento presentación Lecturas   Documento presentación Para ver en pantalla completa click aquí. Para guardar/imprimir (en modo pantalla completa): botón derecho, imprimir/guardar como pdf. \n  Lecturas Moore: Residuos (144-154)\n ","date":1649376000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1649426952,"objectID":"ac7533426a3114e90edf09c0635b197a","permalink":"https://multivariada.netlify.app/class/04-class/","publishdate":"2022-04-08T00:00:00Z","relpermalink":"/class/04-class/","section":"class","summary":"  Índice  Documento presentación Lecturas   Documento presentación Para ver en pantalla completa click aquí. Para guardar/imprimir (en modo pantalla completa): botón derecho, imprimir/guardar como pdf. \n  Lecturas Moore: Residuos (144-154)\n ","tags":null,"title":"Regresión simple 2","type":"docs"},{"authors":null,"categories":null,"content":"  Índice  Documento presentación Lecturas   Documento presentación   Lecturas  Moore: 1.Comprensión de los datos (1-54)   ","date":1648771200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1648828623,"objectID":"9ae245330f59c57e6f62568d635c26e4","permalink":"https://multivariada.netlify.app/class/02-class/","publishdate":"2022-04-01T00:00:00Z","relpermalink":"/class/02-class/","section":"class","summary":"  Índice  Documento presentación Lecturas   Documento presentación   Lecturas  Moore: 1.Comprensión de los datos (1-54)   ","tags":null,"title":"Bases","type":"docs"},{"authors":null,"categories":null,"content":"    code.sourceCode  span { display: inline-block; line-height: 1.25; } code.sourceCode  span { color: inherit; text-decoration: inherit; } code.sourceCode  span:empty { height: 1.2em; } .sourceCode { overflow: visible; } code.sourceCode { white-space: pre; position: relative; } div.sourceCode { margin: 1em 0; } pre.sourceCode { margin: 0; } @media screen { div.sourceCode { overflow: auto; } } @media print { code.sourceCode { white-space: pre-wrap; } code.sourceCode  span { text-indent: -5em; padding-left: 5em; } } pre.numberSource code { counter-reset: source-line 0; } pre.numberSource code  span { position: relative; left: -4em; counter-increment: source-line; } pre.numberSource code  span  a:first-child::before { content: counter(source-line); position: relative; left: -1em; text-align: right; vertical-align: baseline; border: none; display: inline-block; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; padding: 0 4px; width: 4em; color: #aaaaaa; } pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; } div.sourceCode { background-color: #f8f8f8; } @media screen { code.sourceCode  span  a:first-child::before { text-decoration: underline; } } code span.al { color: #ef2929; } /* Alert */ code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */ code span.at { color: #c4a000; } /* Attribute */ code span.bn { color: #0000cf; } /* BaseN */ code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */ code span.ch { color: #4e9a06; } /* Char */ code span.cn { color: #000000; } /* Constant */ code span.co { color: #8f5902; font-style: italic; } /* Comment */ code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */ code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */ code span.dt { color: #204a87; } /* DataType */ code span.dv { color: #0000cf; } /* DecVal */ code span.er { color: #a40000; font-weight: bold; } /* Error */ code span.ex { } /* Extension */ code span.fl { color: #0000cf; } /* Float */ code span.fu { color: #000000; } /* Function */ code span.im { } /* Import */ code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */ code span.kw { color: #204a87; font-weight: bold; } /* Keyword */ code span.op { color: #ce5c00; font-weight: bold; } /* Operator */ code span.ot { color: #8f5902; } /* Other */ code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */ code span.sc { color: #000000; } /* SpecialChar */ code span.ss { color: #4e9a06; } /* SpecialString */ code span.st { color: #4e9a06; } /* String */ code span.va { color: #000000; } /* Variable */ code span.vs { color: #4e9a06; } /* VerbatimString */ code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */  Índice  Objetivo de la práctica Sobre hoja de código Librerías Datos Verificación y descriptivos Experiencia en juegos y puntuación Medias condicionales Residuos Modelo de regresión y cálculo de parámetros Cálculo de los parámetros del modelo de regresión  Estimación del modelo de regresión simple en R Reporte de progreso Archivo de código Foro práctica 3    addClassKlippyTo(\"pre.r, pre.markdown\"); addKlippy('right', 'bottom', 'auto', '1', 'Copy code', 'Copied!');  Objetivo de la práctica En esta práctica se desarrollan ejercicios iniciales de regresión simple, que fueron presentados en la clase respectiva. El ejemplo a utilizar es del libro de Darlington \u0026amp; Hayes cap. 2 (The simple regression model).\n Sobre hoja de código Como vimos en la práctica anterior, al momento de analizar los datos separamos el trabajo en dos hojas de código distintas: preparacion.R (práctica 1) y analisis.R (práctica 2). Recordar nombres de archivos y directorios sin tildes, espacios ni ñEn este caso, los datos son simples y como es un ejemplo no realizaremos código de preparación, solo el correspondiente a análisis. Antes de comenzar, sugerimos crear un archivo de código en R con el nombre analisis: R: File-\u0026gt; New File -\u0026gt; RScript, o simplemente Ctrl + Shift + N.\n Librerías pacman::p_load(stargazer, ggplot2, dplyr)  Datos Los datos a utilizar corresponden a un ejemplo ficticio de 23 casos (individuos) y sus datos en dos variables relacionadas con un juego (originalmente de mini-golf en el texto de referencia … pero pensemos en un ejemplo más cercano, de taca-taca). Las dos variables de esta base de datos son el número de veces que se ha jugado antes (juegos_x) y el número de goles o puntos ganados (puntos_y). El archivo de datos es tacataca.txt.\nVamos a cargar estos datos en nuestro espacio de trabajo en R dándole el nombre simple de datos Dos opciones de cargar los datos en R:\n bajarlos al computador local desde este link y luego llamarlos desde el directorio respectivo donde se guardaron:  datos \u0026lt;-read.csv(\u0026quot;( ...ruta hacia el archivo ...)\\tacataca.txt\u0026quot;, sep=\u0026quot;\u0026quot;)  llamarlos directamente desde su ubicación en la web:  datos \u0026lt;-read.csv(\u0026quot;https://multivariada.netlify.app/slides/03-regsimple1/tacataca.txt\u0026quot;, sep=\u0026quot;\u0026quot;) Como es un archivo de texto simple (txt), los cargamos con la función read.csv, para datos guardados en texto simple separados por coma. Como en el caso de nuestros datos la separación es por espacios en lugar de comas, agregamos esta información con la instrucción sep=\"\".\nPara abrir los datos recordemos que en la lógica de R se debe generar un objeto donde se guardan los datos. Este objeto puede tener cualquier nombre, en este caso lo llamaremos simplemente “datos”.\nRutas: ¿Cómo identifico la ruta hacia mi archivo? Dos maneras:\n Botón derecho sobre el archivo -\u0026gt; propiedades, ahí aparece la ruta completa. Copiar y pegar donde corresponde en el archivo de R, no olvidar agregar al final el nombre completo del archivo.  Más fácil: mouse sobre archivo, boton derecho, copiar (o ctrl+c); luego, en el archivo de R, en el lugar que corresponde dar la ruta pegar (o ctrl+v)    Verificación y descriptivos Verificamos si los datos fueron correctamente cargados con View, también la dimensión de la base de datos con dim, y la naturaleza de las variables con sapply :\nView(datos) dim(datos) sapply(datos, class) Tenemos entonces tres columnas:\n id: número único que identifica a cada sujeto\n juegos_x: número de veces que ha jugado previamente\n puntos_y: numero de puntos que obtuvo en el juego actual\n  Generamos una tabla de descriptivos básicos con lo aprendido en la práctica de descripción de datos:\nY para publicar, usando la librería stargazer\nstargazer(datos, type = \u0026quot;text\u0026quot;) ## ## ==================================== ## Statistic N Mean St. Dev. Min Max ## ------------------------------------ ## id 23 12.000 6.782 1 23 ## juegos_x 23 3.000 1.758 0 6 ## puntos_y 23 4.000 1.382 2 6 ## ------------------------------------ En la tabla vemos los estadísticos básicos de las variables juegos y puntos, y además aparece la variable id, que es el identificador y por lo tanto no tiene sentido que salga en la tabla. Para corregir, seleccionamos las variables de interés de datos con el operador pipa %\u0026gt;% operador pipa %\u0026gt;%. Este operador permite unir distintas funciones en una misma línea de código, y es muy utilizado por librerías de manejo de datos como dplyr. Por ejemplo, ahora la instrucción es “de la base de datos datos” %\u0026gt;% “selecciona solo las columnas juegos y puntos”:\nstargazer(datos %\u0026gt;%select(juegos_x,puntos_y) , type = \u0026quot;text\u0026quot;) ## ## =================================== ## Statistic N Mean St. Dev. Min Max ## ----------------------------------- ## juegos_x 23 3.000 1.758 0 6 ## puntos_y 23 4.000 1.382 2 6 ## -----------------------------------  Experiencia en juegos y puntuación La pregunta que nos hacemos para este ejercicio de demostración es: ¿tiene relación la experiencia previa (juegos jugados previamente) con el desempeño actual (puntos obtenidos)?\nVeamos un gráfico de nube de puntos / scatter de ambas variables. Para eso, primero cargamos la librería ggplotde R. Recordar que hay que instalarla primero si es que no se ha hecho previamente con install.packages(\"ggplot\")ggplot.\ng=ggplot(datos, aes(x=juegos_x, y=puntos_y)) + geom_point() g Primero, sobre librerías y visualización: lo que hicimos fue crear un objeto gráfico scatterplot g con la librería ggplot..\nEn términos de correlación se observa una posible asociación positiva, que podemos corroborar con la función cor:\ncor(datos$juegos_x,datos$puntos_y) ## [1] 0.636209 Tenemos una correlación positiva (dirección de la relación) y de un tamaño de efecto grande (magnitud de la relación), para ciencias sociales. Es decir, existe una asociación positiva entre ambas variables: a medida que aumenta la experiencia en juegos, aumentan también los puntos obtenidos en el partido de taca taca. Ahora bien, ¿cómo se relaciona más específcamente la experiencia en juegos con los puntos obtenidos posteriormente?\n Medias condicionales Antes de avanzar desde la correlación al método de regresión es importante conocer el concepto de media condicional.\nComo sabemos el promedio de Y (puntos) es 4. Es decir, si conocemos a algún individuo que pertence al grupo de “datos”, sabemos que su puntaje se encuentra probablemente cercano a 4. ¿Podemos mejorar nuestra estimación utilizando el puntaje de X? Como lo conocemos, si el sujeto nos dice que ha jugado antes 6 veces, dada la información que conocemos probablemente vamos a estimar un puntaje superior de puntos, tal vez más cercano a 6.\nLo que estamos haciendo es utilizar la información que conocemos de X para dar una estimación de Y, que sea más precisa que el promedio bruto.\nMirando el gráfico de nube de puntos, sabemos que tres personas han jugado antes una vez, pero una de ellas tuvo 2 puntos, otra 3 y otra 4. Con estos datos podemos calcular la media de Y para X=1, que sería igual a 3. En otras palabras, la media condicional de Y cuando X=1 es 3. Con esto, uno podría calcular la media condicional para cada punto de X y hacer una estimación más precisa de Y. Sin embargo, este proceso todavía no nos permite generalizar más eficientemte la relación entre X e Y.\n¿Cuántos puntos (Y) se obtienen según la experiencia previa de juego (X)? Esta pregunta nos conduce al cálculo de una recta que atraviese los puntos y que generalice la relación entre X e Y:\ng2=ggplot(datos, aes(x=juegos_x, y=puntos_y)) + geom_point() + geom_smooth(method=lm, se=FALSE) g2  Residuos En el gráfico anterior vemos que la línea resume la relación entre X e Y, pero claramente es una simplificación que no abarca toda la variabilidad de los datos.\nPor ejemplo, para el sujeto cuya experiencia es haber jugado 1 vez y luego gana 3 puntos, esta línea predice exáctamente su puntaje basada en su experiencia. Sin embargo, el sujeto que ha jugado 3 veces y saca 6 puntos se encuentra más lejos de la línea y por lo tanto esta línea o “modelo predictivo” no representa tan bien su puntaje. A esto se refieren los residuos, que es la diferencia entre el valor predicho (o \\(\\widehat{Y}\\)) y el observado \\(Y\\), siendo los valores predichos de Y los que pasan por la recta a la altura de cada valor de X. Por lo tanto, la mejor recta será aquella que minimice al máximo los residuos.\nEl sentido de la recta que resume de mejor manera la relación entre dos variables es que minimice la suma de todos los residuos. ¿Cómo realizar este procedimiento?\n Para realizar la suma de los residuos estos se elevan al cuadrado, lo que se denomina Suma de residuos al cuadrado o \\(SS_{residual}\\). Se eleva al cuadrado ya que como hay residuos positivos y negativos, unos cancelarían a otros y la suma seía 0, tal como sucede en la formula de la varianza.\n De la infinita cantidad de rectas que se pueden trazar, siempre hay una que tiene un valor menor de \\(SS_{residual}\\). Este procedimiento es el que da nombre al proceso de estimación: mínimos (residuos) cuadrados ordinarios, o OLS (Ordinary Least Squares).\n   Modelo de regresión y cálculo de parámetros El nombre regresión hace alusión a investigaciones sobre estaturas de padres e hij_s en el S.XIX. La estatura de hij_s de padres muy altos es en promedio menor, y si sus padres son baj_s, es mayor (en comparación con sus padres). Este fenómeno se conoce como “regresión hacia el promedio” \nEl modelo de regresión se representa con una ecuación de la recta, o recta de regresión. Esta recta representa los valores predichos para Y según los distintos valores de X:\n\\[\\begin{equation} \\widehat{Y}=b_{0} +b_{1}X \\tag{1} \\end{equation}\\]\nDonde\n \\(\\widehat{Y}\\) es el valor estimado/predicho de \\(Y\\) \\(b_{0}\\) es el intercepto de la recta (el valor de Y cuando X es 0) \\(b_{1}\\) es el coeficiente de regresión, que nos dice cuánto aumenta Y por cada punto que aumenta X (pendiente)   Cálculo de los parámetros del modelo de regresión \\(b_{1}\\), o comunmente llamado “beta de regresión” se obtiene de la siguiente manera:\n\\[\\begin{equation} b_{1}=\\frac{Cov(XY)}{VarX} \\tag{2} \\end{equation}\\]\nEn términos más suntantivos se puede entender como qué parte de la covariación que hay entre X e Y se relaciona con (la varianza de) X. Especificando la fórmula:\n\\[\\begin{equation} b_{1}=\\frac{\\frac{\\sum_{i=1}^{n}(x_i - \\bar{x})(y_i - \\bar{y})} {n-1}}{\\frac{\\sum_{i=1}^{n}(x_i - \\bar{x})(x_i - \\bar{x})} {n-1}} \\tag{3} \\end{equation}\\]\nY simplificando\n\\[\\begin{equation} b_{1}=\\frac{\\sum_{i=1}^{n}(x_i - \\bar{x})(y_i - \\bar{y})} {\\sum_{i=1}^{n}(x_i - \\bar{x})(x_i - \\bar{x})} \\tag{4} \\end{equation}\\]\nComo sabemos, la base para todos estos cálculos es el valor de cada variable menos su promedio. Vamos a crear un vector en nuestra base de datos difx=\\(x-\\bar{x}\\) y dify=\\(y-\\bar{y}\\)\ndatos$difx=datos$juegos_x-mean(datos$juegos_x) datos$dify=datos$puntos_y-mean(datos$puntos_y) Y ahora con esto podemos obtener la diferencia de productos cruzados dif_cru=\\((x-\\bar{x})*(y-\\bar{y})\\), así como la diferencia de X de su promedio al cuadrado SSx=\\((x-\\bar{x})^2\\)\ndatos$difcru=datos$difx*datos$dify datos$difx2=datos$difx^2 datos ## id juegos_x puntos_y difx dify difcru difx2 ## 1 1 0 2 -3 -2 6 9 ## 2 2 0 3 -3 -1 3 9 ## 3 3 1 2 -2 -2 4 4 ## 4 4 1 3 -2 -1 2 4 ## 5 5 1 4 -2 0 0 4 ## 6 6 2 2 -1 -2 2 1 ## 7 7 2 3 -1 -1 1 1 ## 8 8 2 4 -1 0 0 1 ## 9 9 2 5 -1 1 -1 1 ## 10 10 3 2 0 -2 0 0 ## 11 11 3 3 0 -1 0 0 ## 12 12 3 4 0 0 0 0 ## 13 13 3 5 0 1 0 0 ## 14 14 3 6 0 2 0 0 ## 15 15 4 3 1 -1 -1 1 ## 16 16 4 4 1 0 0 1 ## 17 17 4 5 1 1 1 1 ## 18 18 4 6 1 2 2 1 ## 19 19 5 4 2 0 0 4 ## 20 20 5 5 2 1 2 4 ## 21 21 5 6 2 2 4 4 ## 22 22 6 5 3 1 3 9 ## 23 23 6 6 3 2 6 9 Y con esto podemos obtener la suma de productos cruzados y la suma de cuadrados de X\nsum(datos$difcru) ## [1] 34 sum(datos$difx2) ## [1] 68 Reemplazando en la fórmula\n\\[b_{1}=\\frac{\\sum_{i=1}^{n}(x_i - \\bar{x})(y_i - \\bar{y})} {\\sum_{i=1}^{n}(x_i - \\bar{x})(x_i - \\bar{x})}=\\frac{34}{68}=0.5\\]\nY con esto podemos obtener el valor de \\(b_{0}\\)\n\\[b_{0}=\\bar{Y}-b_{1}\\bar{X}\\] \\[b_{0}=4-(3 * 0.5)=2.5\\]\nCompletando la ecuación:\n\\[\\bar{Y}=2.5+0.5X\\]\nEsto nos permite estimar el valor de \\(Y\\) (o su media condicional) basado en el puntaje \\(X\\). Por ejemplo, cuál es el valor estimado de \\(Y\\) dado \\(X=5\\)?\n  Estimación del modelo de regresión simple en R La función para estimar regresión en R es lm (linear model). Su forma general es:\nobjeto=lm(dependiente ~ independiente, data=datos) Donde\n objeto: el nombre (cualquiera) que le damos al objeto donde se guardan los resultados de la estimación dependiente / independiente: los nombres de las variables en los datos data = el nombre del objeto de nuestros datos en R  Ejemplo con los datos de taca taca:\nreg1 \u0026lt;-lm(puntos_y ~juegos_x, data = datos) Con esta operación ya estimamos nuestra primera regresión simple. Para ver la estimación de los parámetros principales (intercepto y pendiente) simplemente ejecutamos el nombre del objeto:\nreg1 ## ## Call: ## lm(formula = puntos_y ~ juegos_x, data = datos) ## ## Coefficients: ## (Intercept) juegos_x ## 2.5 0.5 Y obtenemos los valores que calculamos previamente.\nPodemos tener un output en un formato más apropiado utilizando la librería stargazer\nstargazer(reg1, type = \u0026quot;text\u0026quot;) ## ## =============================================== ## Dependent variable: ## --------------------------- ## puntos_y ## ----------------------------------------------- ## juegos_x 0.500*** ## (0.132) ## ## Constant 2.500*** ## (0.458) ## ## ----------------------------------------------- ## Observations 23 ## R2 0.405 ## Adjusted R2 0.376 ## Residual Std. Error 1.091 (df = 21) ## F Statistic 14.280*** (df = 1; 21) ## =============================================== ## Note: *p\u0026lt;0.1; **p\u0026lt;0.05; ***p\u0026lt;0.01 Vemos que en la tabla aparecen una serie de elementos adicionales, además de \\(b_{1}\\) (juegos) y el intercepto o constante (“Constant”). Esto será tema de la siguiente sesión.\n Reporte de progreso Completar el reporte de progreso correspondiente a esta práctica aquí\n Archivo de código El archivo de código R de esta práctica se puede descargar aquí\n Foro práctica 3  ","date":1648771200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1649272027,"objectID":"0c86205acf7811fbfe8648206a8418ff","permalink":"https://multivariada.netlify.app/assignment/03-code/","publishdate":"2022-04-01T00:00:00Z","relpermalink":"/assignment/03-code/","section":"assignment","summary":"code.sourceCode  span { display: inline-block; line-height: 1.25; } code.sourceCode  span { color: inherit; text-decoration: inherit; } code.sourceCode  span:empty { height: 1.2em; } .sourceCode { overflow: visible; } code.sourceCode { white-space: pre; position: relative; } div.sourceCode { margin: 1em 0; } pre.sourceCode { margin: 0; } @media screen { div.sourceCode { overflow: auto; } } @media print { code.sourceCode { white-space: pre-wrap; } code.sourceCode  span { text-indent: -5em; padding-left: 5em; } } pre.","tags":null,"title":"Práctica 3. Regresión simple 1","type":"docs"},{"authors":null,"categories":null,"content":"    pre  code.sourceCode { white-space: pre; position: relative; } pre  code.sourceCode  span { display: inline-block; line-height: 1.25; } pre  code.sourceCode  span:empty { height: 1.2em; } .sourceCode { overflow: visible; } code.sourceCode  span { color: inherit; text-decoration: inherit; } div.sourceCode { margin: 1em 0; } pre.sourceCode { margin: 0; } @media screen { div.sourceCode { overflow: auto; } } @media print { pre  code.sourceCode { white-space: pre-wrap; } pre  code.sourceCode  span { text-indent: -5em; padding-left: 5em; } } pre.numberSource code { counter-reset: source-line 0; } pre.numberSource code  span { position: relative; left: -4em; counter-increment: source-line; } pre.numberSource code  span  a:first-child::before { content: counter(source-line); position: relative; left: -1em; text-align: right; vertical-align: baseline; border: none; display: inline-block; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; padding: 0 4px; width: 4em; color: #aaaaaa; } pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; } div.sourceCode { background-color: #f8f8f8; } @media screen { pre  code.sourceCode  span  a:first-child::before { text-decoration: underline; } } code span.al { color: #ef2929; } /* Alert */ code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */ code span.at { color: #c4a000; } /* Attribute */ code span.bn { color: #0000cf; } /* BaseN */ code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */ code span.ch { color: #4e9a06; } /* Char */ code span.cn { color: #000000; } /* Constant */ code span.co { color: #8f5902; font-style: italic; } /* Comment */ code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */ code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */ code span.dt { color: #204a87; } /* DataType */ code span.dv { color: #0000cf; } /* DecVal */ code span.er { color: #a40000; font-weight: bold; } /* Error */ code span.ex { } /* Extension */ code span.fl { color: #0000cf; } /* Float */ code span.fu { color: #000000; } /* Function */ code span.im { } /* Import */ code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */ code span.kw { color: #204a87; font-weight: bold; } /* Keyword */ code span.op { color: #ce5c00; font-weight: bold; } /* Operator */ code span.ot { color: #8f5902; } /* Other */ code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */ code span.sc { color: #000000; } /* SpecialChar */ code span.ss { color: #4e9a06; } /* SpecialString */ code span.st { color: #4e9a06; } /* String */ code span.va { color: #000000; } /* Variable */ code span.vs { color: #4e9a06; } /* VerbatimString */ code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */  Índice  Objetivo de la práctica Código de análisis  1. Librerías 2. Cargar base de datos 3. Descripción de variables  3.1 Tabla descriptiva de variables para sección metodológica 3.2 Exploración de asociación entre variables  Nota final: Información de la sesión de R  Resumen Práctica 2: Descripción de variables Reporte de progreso Archivo de código Foro práctica 2    addClassKlippyTo(\"pre.r, pre.markdown\"); addKlippy('right', 'bottom', 'auto', '1', 'Copy code', 'Copied!');  Objetivo de la práctica Esta segunda práctica tiene por objetivo repasar algunos conceptos básicos de los cursos anteriores de Estadística Descriptiva y Estadística Correlacional. Asume como base el desarrollo de la Práctica 1, a la cual se hará referencia permanente.\nEn la Práctica 1 se desarrolló un código de preparación de datos que generó una base de datos procesada para el análisis. En esta Práctica 2 comenzamos con el segundo momento de procesamiento de datos, que es el análisis propiamente tal. El análisis se divide en descripción de variables y contraste de hipótesis. En esta práctica nos enfocaremos en la primera fase, que llega hasta el punto 3 del código de análisis:\nAl igual que el Código de Preparación, el Código de Análisis posee una estructura definida. En este caso son 4 partes, donde las primeras son similares al código de preparación:\nIdentificación y descripción general: Título, autor(es), fecha, información breve sobre el contenido del documento Librerías principales (de R) a utilizar en el análisis Datos (que provienen de los preparados en la fase anterior) Descripción de variables  Tabla general de variables para la sección metodológica del reporte Exploración descriptiva de relaciones entre variables  Contraste de hipótesis / inferencia estadística según la técnica que corresponda  Al final de esta práctica la idea es que cada un_ pueda avanzar hasta el punto 3 del Código de Análisis. El punto 4 (contraste de hipótesis) se desarrollará más adelante en este curso con énfasis en la técnica de regresión.\n Código de análisis 1. Librerías La explicación de esta parte del código se encuentra en la sección correspondiente de la práctica 1.pacman::p_load\npacman::p_load(dplyr, #Manipulacion de datos  stargazer, #Tablas  sjmisc, # Tablas  summarytools, # Tablas  kableExtra, #Tablas  sjPlot, #Tablas y gráficos  corrplot, # Correlaciones  sessioninfo) # Información de la sesión de trabajo  2. Cargar base de datos Vamos a cargar la base de datos ELSOC_ess_merit2016.Rproc_elsoc, que generamos durante la práctica 1. Se puede llamar desde el directorio en que se guardó anteriormente dando la ruta completa:\nload(\u0026quot;ruta-hacia-carpeta-local/ELSOC_ess_merit2016.RData\u0026quot;) #Cargar base de datos O también para esta práctica la podemos llamar directamente desde nuestro sitio web:\nload(url(\u0026quot;https://multivariada.netlify.app/assignment/data/proc/ELSOC_ess_merit2016.RData\u0026quot;)) #Cargar base de datos  Exploración inicial general de la base de datos  names(proc_elsoc) # Muestra los nombres de las variables de la base de datos ## [1] \u0026quot;mesfuerzo\u0026quot; \u0026quot;mtalento\u0026quot; \u0026quot;ess\u0026quot; \u0026quot;edcine\u0026quot; \u0026quot;sexo\u0026quot; \u0026quot;edad\u0026quot; ## [7] \u0026quot;pmerit\u0026quot; dim(proc_elsoc) # Dimensiones ## [1] 2927 7 En el caso de esta base, 2927 casos y 7 variables\nRecordando el contenido de cada variable preparada en la práctica 1:\n [pt_merit] = Indice promedio de percepción de meritocracia.\n [ess] = Estatus Social Subjetivo: Donde se ubicaria ud. en la sociedad chilena” (0 = el nivel mas bajo; 10 = el nivel mas alto)\n [edcine] = Nivel educacional(1 = Primaria incompleta menos, 2 = Primaria y secundaria baja, 3 = Secundaria alta, 4 = Terciaria ciclo corto, 5 = Terciaria y Postgrado)\n [sexo] = Sexo (O = Hombre; 1 = Mujer)\n [edad] = ¿Cuáles su edad? (años cumplidos)\n   3. Descripción de variables Los resultados referidos a descripción de variables se presentan en dos momentos del reporte de investigación:\n en la sección de metodología, cuando se presentan las variables del estudio en una tabla descriptiva de variables.\n en la sección de análisis, que en general comienza con una exploración de asociaciones entre variables, también conocido como análisis descriptivo.\n  3.1 Tabla descriptiva de variables para sección metodológica A continuación se presentan dos opciones de generar esta tabla descriptiva de variables con distintas librerías de R.\na. Tabla descriptiva con stargazerstargazer\nLa función stargazer (de la librería del mismo nombre) permitirá mostrar los principales estadísticos descriptivos univariados de las variables: medidas de tendencia central (media), de dispersión (desviación estándar) y posición (mínimo, máximo, percentiles).\nstargazer(proc_elsoc,type = \u0026quot;text\u0026quot;) ## ## ============================================================== ## Statistic N Mean St. Dev. Min Pctl(25) Pctl(75) Max ## -------------------------------------------------------------- ## mesfuerzo 2,909 2.573 1.047 1.000 2.000 3.000 5.000 ## mtalento 2,907 2.739 1.060 1.000 2.000 4.000 5.000 ## ess 2,915 4.330 1.567 0.000 3.000 5.000 10.000 ## edcine 2,925 3.184 1.207 1.000 3.000 4.000 5.000 ## sexo 2,927 0.603 0.489 0 0 1 1 ## edad 2,927 46.091 15.287 18 33 58 88 ## pmerit 2,898 2.654 0.969 1.000 2.000 3.500 5.000 ## -------------------------------------------------------------- Algunas observaciones sobre esta tabla:\n La opción type=\"text\" permite que podamos ver los resultados directamente en la consola, de manera bastante rudimentaria. Con otras opciones que veremos más adelante se puede estilizar para su publicación.\n Una distinción relevante a considerar cuando se describen variables es si estas son categóricas o continuas. La definición de si una variables es tratada como categórica o continua es algo que hace el/la autor/a del reporte, sin embargo hay variables nominales como sexo que claramente corresponden a categóricas, y por lo tanto no corresponde hacer un promedio entre ambas. Sin embargo, como esta variable está codificada 0 (hombre) y 1 (mujer), en este caso lo que indica el valor de la columna promedio (Mean=0.60) es la proporción de mujeres vs hombres. En otras palabras, hay un 60% de mujeres y 40% de hombres en la muestra.\n  b. Tablas descriptivas con descr, librería sjmiscsjmisc::descr\nLa opción básica de descr es la siguiente:\nsjmisc::descr(proc_elsoc) ## ## ## Basic descriptive statistics ## ## var type label n NA.prc mean sd se md ## mesfuerzo numeric Recompensa: esfuerzo 2909 0.61 2.57 1.05 0.02 2.0 ## mtalento numeric Recompensa: talento 2907 0.68 2.74 1.06 0.02 3.0 ## ess numeric Estatus Social Subjetivo 2915 0.41 4.33 1.57 0.03 5.0 ## edcine numeric Educación 2925 0.07 3.18 1.21 0.02 3.0 ## sexo numeric Sexo 2927 0.00 0.60 0.49 0.01 1.0 ## edad numeric Edad 2927 0.00 46.09 15.29 0.28 46.0 ## pmerit numeric Meritocracia promedio 2898 0.99 2.65 0.97 0.02 2.5 ## trimmed range skew ## 2.56 4 (1-5) 0.42 ## 2.76 4 (1-5) 0.18 ## 4.36 10 (0-10) -0.01 ## 3.23 4 (1-5) -0.15 ## 0.63 1 (0-1) -0.42 ## 45.90 70 (18-88) 0.07 ## 2.66 4 (1-5) 0.26 En este caso utilizamos la forma librería::función (sjmisc::descr), ya que la función descr también existe en otras librerías y así nos aseguramos que la función utilizada es de esa librería específica.\nSeleccionamos algunas columnas específicas con información más relevante con la opción show. Además, agregamos la función kable para obtener una tabla que luego sea fácilmente publicable en distintos formatos (a profundizar en una práctica posterior):\nsjmisc::descr(proc_elsoc,  show = c(\u0026quot;label\u0026quot;,\u0026quot;range\u0026quot;, \u0026quot;mean\u0026quot;, \u0026quot;sd\u0026quot;, \u0026quot;NA.prc\u0026quot;, \u0026quot;n\u0026quot;))%\u0026gt;%  kable(.,\u0026quot;markdown\u0026quot;)    var label n NA.prc mean sd range    4 mesfuerzo Recompensa: esfuerzo 2909 0.6149641 2.5727054 1.0466874 4 (1-5)  5 mtalento Recompensa: talento 2907 0.6832935 2.7389061 1.0596182 4 (1-5)  3 ess Estatus Social Subjetivo 2915 0.4099761 4.3300172 1.5666965 10 (0-10)  2 edcine Educación 2925 0.0683293 3.1839316 1.2066058 4 (1-5)  7 sexo Sexo 2927 0.0000000 0.6026648 0.4894300 1 (0-1)  1 edad Edad 2927 0.0000000 46.0908780 15.2867983 70 (18-88)  6 pmerit Meritocracia promedio 2898 0.9907755 2.6538992 0.9694792 4 (1-5)    c. Tabla descriptiva con summarytools::dfSummarysummarytools::dfSummary\nEsta tercera opción nos ofrece una tabla aún más detallada, con gráficos para cada variable, las frecuencias para cada valor, y las etiquetas de las variables, por lo que es muy recomendable.\nSe específica de la siguiente manera:\ndfSummary(proc_elsoc, plain.ascii = FALSE) ## ### Data Frame Summary ## #### proc_elsoc ## **Dimensions:** 2927 x 7 ## **Duplicates:** 396 ## ## ---------------------------------------------------------------------------------------------------------------------------------------- ## No Variable Label Stats / Values Freqs (% of Valid) Graph Valid Missing ## ---- ------------ -------------------------- -------------------------- ---------------------- -------------------- ---------- --------- ## 1 mesfuerzo\\ Recompensa: esfuerzo Mean (sd) : 2.6 (1)\\ 1 : 357 (12.3%)\\ II \\ 2909\\ 18\\ ## [numeric] min \u0026lt; med \u0026lt; max:\\ 2 : 1331 (45.8%)\\ IIIIIIIII \\ (99.39%) (0.61%) ## 1 \u0026lt; 2 \u0026lt; 5\\ 3 : 497 (17.1%)\\ III \\ ## IQR (CV) : 1 (0.4) 4 : 646 (22.2%)\\ IIII \\ ## 5 : 78 ( 2.7%) ## ## 2 mtalento\\ Recompensa: talento Mean (sd) : 2.7 (1.1)\\ 1 : 288 ( 9.9%)\\ I \\ 2907\\ 20\\ ## [numeric] min \u0026lt; med \u0026lt; max:\\ 2 : 1163 (40.0%)\\ IIIIIIII \\ (99.32%) (0.68%) ## 1 \u0026lt; 3 \u0026lt; 5\\ 3 : 559 (19.2%)\\ III \\ ## IQR (CV) : 2 (0.4) 4 : 814 (28.0%)\\ IIIII \\ ## 5 : 83 ( 2.9%) ## ## 3 ess\\ Estatus Social Subjetivo Mean (sd) : 4.3 (1.6)\\ 11 distinct values \\ 2915\\ 12\\ ## [numeric] min \u0026lt; med \u0026lt; max:\\ \\ \\ \\ \\ \\ \\ \\ \\ :\\ (99.59%) (0.41%) ## 0 \u0026lt; 5 \u0026lt; 10\\ \\ \\ \\ \\ \\ \\ . :\\ ## IQR (CV) : 2 (0.4) \\ \\ \\ \\ . : :\\ ## \\ \\ \\ \\ : : : .\\ ## . : : : : : . ## ## 4 edcine\\ Educación Mean (sd) : 3.2 (1.2)\\ 1 : 359 (12.3%)\\ II \\ 2925\\ 2\\ ## [numeric] min \u0026lt; med \u0026lt; max:\\ 2 : 297 (10.2%)\\ II \\ (99.93%) (0.07%) ## 1 \u0026lt; 3 \u0026lt; 5\\ 3 : 1251 (42.8%)\\ IIIIIIII \\ ## IQR (CV) : 1 (0.4) 4 : 483 (16.5%)\\ III \\ ## 5 : 535 (18.3%) III ## ## 5 sexo\\ Sexo Min : 0\\ 0 : 1163 (39.7%)\\ IIIIIII \\ 2927\\ 0\\ ## [numeric] Mean : 0.6\\ 1 : 1764 (60.3%) IIIIIIIIIIII (100%) (0%) ## Max : 1 ## ## 6 edad\\ Edad Mean (sd) : 46.1 (15.3)\\ 63 distinct values \\ 2927\\ 0\\ ## [numeric] min \u0026lt; med \u0026lt; max:\\ \\ \\ . . . : :\\ (100%) (0%) ## 18 \u0026lt; 46 \u0026lt; 88\\ . : : : : : .\\ ## IQR (CV) : 25 (0.3) : : : : : : : :\\ ## : : : : : : : :\\ ## : : : : : : : : . ## ## 7 pmerit\\ Meritocracia promedio Mean (sd) : 2.7 (1)\\ 1.00 : 243 ( 8.4%)\\ I \\ 2898\\ 29\\ ## [numeric] min \u0026lt; med \u0026lt; max:\\ 1.50 : 79 ( 2.7%)\\ \\ (99.01%) (0.99%) ## 1 \u0026lt; 2.5 \u0026lt; 5\\ 2.00 : 1041 (35.9%)\\ IIIIIII \\ ## IQR (CV) : 1.5 (0.4) 2.50 : 222 ( 7.7%)\\ I \\ ## 3.00 : 536 (18.5%)\\ III \\ ## 3.50 : 169 ( 5.8%)\\ I \\ ## 4.00 : 528 (18.2%)\\ III \\ ## 4.50 : 38 ( 1.3%)\\ \\ ## 5.00 : 42 ( 1.5%) ## ---------------------------------------------------------------------------------------------------------------------------------------- Es muy ancha para visualizar bien en la consola de R, pero en su versión más definitiva de publicación se verá así:\nview(dfSummary(proc_elsoc, headings=FALSE))   No Variable Label Stats / Values Freqs (% of Valid) Graph Valid Missing     1 mesfuerzo [numeric] Recompensa: esfuerzo Mean (sd) : 2.6 (1) min 1:357(12.3%)2:1331(45.8%)3:497(17.1%)4:646(22.2%)5:78(2.7%)  2909 (99.39%) 18 (0.61%)   2 mtalento [numeric] Recompensa: talento Mean (sd) : 2.7 (1.1) min 1:288(9.9%)2:1163(40.0%)3:559(19.2%)4:814(28.0%)5:83(2.9%)  2907 (99.32%) 20 (0.68%)   3 ess [numeric] Estatus Social Subjetivo Mean (sd) : 4.3 (1.6) min 11 distinct values  2915 (99.59%) 12 (0.41%)   4 edcine [numeric] Educaci\u0026#0243;n Mean (sd) : 3.2 (1.2) min 1:359(12.3%)2:297(10.2%)3:1251(42.8%)4:483(16.5%)5:535(18.3%)  2925 (99.93%) 2 (0.07%)   5 sexo [numeric] Sexo Min : 0 Mean : 0.6 Max : 1 0:1163(39.7%)1:1764(60.3%)  2927 (100%) 0 (0%)   6 edad [numeric] Edad Mean (sd) : 46.1 (15.3) min 63 distinct values  2927 (100%) 0 (0%)   7 pmerit [numeric] Meritocracia promedio Mean (sd) : 2.7 (1) min 1.00:243(8.4%)1.50:79(2.7%)2.00:1041(35.9%)2.50:222(7.7%)3.00:536(18.5%)3.50:169(5.8%)4.00:528(18.2%)4.50:38(1.3%)5.00:42(1.5%)  2898 (99.01%) 29 (0.99%)    Generated by summarytools 0.9.6 (R version 3.6.0)2020-04-23\n Nota sobre casos perdidos (NAs) na.omit(data) Hasta ahora hemos mantenido los casos perdidos en la base de datos, ya que son importantes de reportar en la tabla general de variables. Sin embargo, de aquí en adelante se recomienda trabajar solo con casos completos, es decir, sacar los casos perdidos. El quitar los casos perdidos de una base de datos es muy simple con la función na.omit, pero para tomar precauciones y asegurarse que funciona se recomienda el siguiente procedimiento:\n respaldar la base de datos original en el espacio de trabajo (por si queremos en adelante realizar algún análisis referido a casos perdidos), la dejaremos con el nombre proc_elsoc_original. contamos el número de casos con el comando dim contamos el número de casos perdidos con sum(is.na(proc_elsoc)) borramos los casos perdidos con proc_elsoc \u0026lt;-na.omit(proc_elsoc) contamos nuevamente con dim para asegurarnos que se borraron y por temas de funcionamiento de R, al realizar la operación de sacar casos perdidos, se borra toda la información de las etiquetas (labels), así que las recuperamos de la base original con el comando copy_labels, de la librería sjlabelled.  proc_elsoc_original \u0026lt;-proc_elsoc dim(proc_elsoc) ## [1] 2927 7 sum(is.na(proc_elsoc)) ## [1] 81 proc_elsoc \u0026lt;-na.omit(proc_elsoc) dim(proc_elsoc) ## [1] 2887 7 proc_elsoc \u0026lt;-sjlabelled::copy_labels(proc_elsoc,proc_elsoc_original)   3.2 Exploración de asociación entre variables Dado que las hipótesis de investigación corresponden a asociación entre variables, antes de realizar el contraste de hipótesis se suele presentar un análisis descriptivo que explora las asociaciones entre variables.\nLa forma de explorar las asociaciones entre variables dependen de la naturaleza de las variables que se asocian:\n Variables categóricas: tabla de contingencia Variable categórica y continua: tabla de promedios por cada categoría Variables continuas: correlaciones  En esta sección también es muy relevante la visualización de datos mediante gráficos, por lo que incluiremos algunos.\nEl uso tanto de tablas como de gráficos en el reporte queda a discreción del/a autor/a. La pregunta que orienta esta decisión es: ¿Me permite enriquecer la discusión de los resultados en relación a las hipótesis planteadas?\nTablas de contingencia para variables categóricas Para tablas de contingencia categóricas utilizaremos la función sjt.xtab, de la librería sjPlot. Veamos primero una especificación simple: sjPlot::sjt.xtab\nsjt.xtab(proc_elsoc$edcine, proc_elsoc$sexo)  Educación  Sexo  Total    Hombre  Mujer    Primaria incompleta\nmenos  102  247  349    Primaria y\nsecundaria baja  105  186  291    Secundaria alta  511  727  1238    Terciaria ciclo\ncorto  186  292  478    Terciaria y\nPostgrado  245  286  531    Total  1149  1738  2887   χ2=28.154 · df=4 · Cramer’s V=0.099 · p=0.000    Al ejecutar el comando, el resultado aparece automáticamente en el visor de RStudio. A esta tabla podemos también agregar porcentajes de filas y/o columnas, según sea lo más relevante analizar. En general se recomienda agregar solo un porcentaje, de otra manera la tabla se satura de información. Además, vamos a quitar el pie de la tabla (conviene dejarlo solo si hay hipótesis asociadas al cruce simple entre las dos variables).\nsjt.xtab(proc_elsoc$edcine, proc_elsoc$sexo,  show.col.prc=TRUE,  show.summary=FALSE )  Educación  Sexo  Total    Hombre  Mujer    Primaria incompleta\nmenos  102\n8.9 %  247\n14.2 %  349\n12.1 %    Primaria y\nsecundaria baja  105\n9.1 %  186\n10.7 %  291\n10.1 %    Secundaria alta  511\n44.5 %  727\n41.8 %  1238\n42.9 %    Terciaria ciclo\ncorto  186\n16.2 %  292\n16.8 %  478\n16.6 %    Terciaria y\nPostgrado  245\n21.3 %  286\n16.5 %  531\n18.4 %    Total  1149\n100 %  1738\n100 %  2887\n100 %     Tablas de promedio de variable continua por una categóricas En ejemplo vamos a explorar datos de nuestra variable de percepción de meritocracia pmerit por los niveles educacionales edcine.\nUna forma rápida de explorar esto es mediante la función tapply, que nos entrega de manera simple el promedio de una variable por otra:\ntapply(proc_elsoc$pmerit, proc_elsoc$edcine, mean) ## 1 2 3 4 5 ## 2.968481 2.697595 2.662763 2.479079 2.559322 Aquí vemos en promedio de pmerit para cada uno de los 5 niveles de la variable educación edcine. Si se estima conveniente este tipo de cruces se puede representar también en una tabla con más opciones de información y también de publicación. Para esto utilizaremos una función algo más compleja de la librería dplyr.dplyr Esta librería permite aplicar una serie de funciones concatenadas y enlazadas mediante el operador %\u0026gt;%. El sentido de cada función aparece comentado abajo:\nproc_elsoc %\u0026gt;% # se especifica la base de datos  select(pmerit,edcine) %\u0026gt;% # se seleccionan las variables  dplyr::group_by(Educación=sjlabelled::as_label(edcine)) %\u0026gt;% # se agrupan por la variable categórica y se usan sus etiquetas con as_label  dplyr::summarise(Obs.=n(),Promedio=mean(pmerit),SD=sd(pmerit)) %\u0026gt;% # se agregan las operaciones a presentar en la tabla  kable(, format = \u0026quot;markdown\u0026quot;) # se genera la tabla   Educación Obs. Promedio SD    Primaria incompleta menos 349 2.968481 0.9828315  Primaria y secundaria baja 291 2.697595 1.0041093  Secundaria alta 1238 2.662762 0.9685655  Terciaria ciclo corto 478 2.479080 0.9431323  Terciaria y Postgrado 531 2.559322 0.9223446    Esta asocación también se puede representar de manera más simple con un gráfico, en este caso de cajas o boxplot mediante la función plot_grpfrq de sjPlot:sjPlot::plot_grpfrq\nplot_grpfrq(proc_elsoc$pmerit,proc_elsoc$edcine,  type = \u0026quot;box\u0026quot;)  Correlaciones (variables continuas) Algunas notas sobre correlación:\n El coeficiente de correlación mide la fuerza de la relación lineal entre dos variable continuas. Esta puede ser:\n positiva: a medida que aumenta una, aumenta la otra (ej: estatura y edad) negativa: a medida que una aumenta, disminuye la otra (ej: tiempo dedicado al estudio y probabilidad de reprobar) neutra: no hay asociación entre variables.  El rango de variación del coeficiente de correlación va desde -1 (correlación negativa perfecta) y 1 (correlación positiva perfecta).\n Existen diferentes formas de cálculo del coeficiente de correlación (Spearman, Kendall, Pearson).\n En el coeficiente de correlación se analiza tanto su tamaño como su significación estadística.\n  En lo que sigue nos concentraremos en el coeficiente de correlación más utilizado que es el de Pearson, que se aplica cuando las variables son de naturaleza continua.\nTablas/matrices de correlación\nLas correlaciones entre variables se presentan en general en modo de matrices, es decir, las variables se presentan en las filas y las columnas, y en las celdas donde se cruzan los pares de variables se muestra su coeficiente de correlación.\nEn su forma simple en R se aplica la función cor a lacor base de datos, y la guardamos en un objeto que le damos el nombre M para futuras operaciones:\nM \u0026lt;- cor(proc_elsoc) M ## mesfuerzo mtalento ess edcine sexo ## mesfuerzo 1.000000000 0.69768811 -0.004312135 -0.12167659 -0.04480502 ## mtalento 0.697688106 1.00000000 0.018447696 -0.10582754 -0.03759340 ## ess -0.004312135 0.01844770 1.000000000 0.28959248 -0.03745546 ## edcine -0.121676591 -0.10582754 0.289592479 1.00000000 -0.08682644 ## sexo -0.044805024 -0.03759340 -0.037455462 -0.08682644 1.00000000 ## edad 0.096495547 0.07383771 -0.066031873 -0.37660283 0.06121699 ## pmerit 0.920404032 0.92224547 0.007740598 -0.12341680 -0.04469515 ## edad pmerit ## mesfuerzo 0.09649555 0.920404032 ## mtalento 0.07383771 0.922245465 ## ess -0.06603187 0.007740598 ## edcine -0.37660283 -0.123416804 ## sexo 0.06121699 -0.044695146 ## edad 1.00000000 0.092369792 ## pmerit 0.09236979 1.000000000 Este es el reporte simple, pero no muy amigable a la vista. Para una versión más amable utilizamos la función tab_corrsjPlot::tab_corr:NOTA: sjPlot actualizó su librería a fines de Mayo de 2021 (versión 2.8.4); para quienes no hayan actualizado a esta versión, la antigua función para tabla de correlaciones es sjt.corr\ntab_corr(proc_elsoc)   Recompensa: esfuerzo  Recompensa: talento  Estatus Social Subjetivo  Educación  Sexo  Edad  Meritocracia promedio    Recompensa: esfuerzo   0.698***  -0.004  -0.122***  -0.045*  0.096***  0.920***    Recompensa: talento  0.698***   0.018  -0.106***  -0.038*  0.074***  0.922***    Estatus Social Subjetivo  -0.004  0.018   0.290***  -0.037*  -0.066***  0.008    Educación  -0.122***  -0.106***  0.290***   -0.087***  -0.377***  -0.123***    Sexo  -0.045*  -0.038*  -0.037*  -0.087***   0.061**  -0.045*    Edad  0.096***  0.074***  -0.066***  -0.377***  0.061**   0.092***    Meritocracia promedio  0.920***  0.922***  0.008  -0.123***  -0.045*  0.092***     Computed correlation used pearson-method with listwise-deletion.    Con esta mejor visualización, algunas observaciones sobre la matriz de correlaciones:\n En esta matriz las variables están representadas en las filas y en las columnas. Cada coeficiente expresa la correlación de una variable con otra. Por ejemplo, la correlación entre la variable de recompensa por esfuerzo y recompensa por inteligencia es 0.698. La información de cada coeficiente se repite sobre y bajo la diagonal, ya que es el mismo par de variables pero en el orden alterno. En la diagonal corresponde que todos los coeficientes sean 1, ya que la correlación de una variable consigo misma es perfectamente positiva. En esta tabla se omiten y aparece la diagonal vacía, ya que es información redundante. Por lo mismo, también se recomienda eliminar el triangulo superior de la tabla (redundante) de la siguiente manera:  tab_corr(proc_elsoc,  triangle = \u0026quot;lower\u0026quot;)   Recompensa: esfuerzo  Recompensa: talento  Estatus Social Subjetivo  Educación  Sexo  Edad  Meritocracia promedio    Recompensa: esfuerzo           Recompensa: talento  0.698***          Estatus Social Subjetivo  -0.004  0.018         Educación  -0.122***  -0.106***  0.290***        Sexo  -0.045*  -0.038*  -0.037*  -0.087***       Edad  0.096***  0.074***  -0.066***  -0.377***  0.061**      Meritocracia promedio  0.920***  0.922***  0.008  -0.123***  -0.045*  0.092***     Computed correlation used pearson-method with listwise-deletion.    Una segunda forma de presentar matrices de correlaciones es de manera gráfica con la librería corrplot, cuya función corrplot.mixed corrplot::corrplot.mixedse aplica al objeto que generamos con la función cor (M):\ncorrplot.mixed(M) Este gráfico/matriz representa el grado de asociación entre variables mediante el tamaño de los círculos e intensidad de colores, y el signo de la asociación se representa con una gradiente de colores que va del azul (positivo) al rojo (negativo). Bajo la diagonal aparecen los indices de correlación entre pares de variables.\nFinalmente, también se puede representar la correlación entre dos variables en un gráfico de nube de puntos o scatterplot:sjPlot::plot_scatter\nnames(proc_elsoc) ## [1] \u0026quot;mesfuerzo\u0026quot; \u0026quot;mtalento\u0026quot; \u0026quot;ess\u0026quot; \u0026quot;edcine\u0026quot; \u0026quot;sexo\u0026quot; \u0026quot;edad\u0026quot; ## [7] \u0026quot;pmerit\u0026quot; plot_scatter(proc_elsoc, edad, ess) Donde:\n cada punto representa un caso la forma de la nube indica si la asociación es positiva, negativa o neutra:  En el caso de nuestra nube de puntos entre edad y estatus social subjetivo, observamos que no hay asociación (lo que ya era indicado por su correlación de -0.07 observada en la matriz de correlaciones).\n   Nota final: Información de la sesión de R R y sus librerías tienen distintas versiones. Esto puede representar algunos problemas de compatibilidad entre usuarios, por ejemplo, dos personas que trabajan en el mismo proyecto pero con distintas versiones (librerías y/o de R), pueden tener ocasionalmente complicaciones. Por eso, una buena práctica es registrar al final del código la información de la sesión. Y como siempre en R, varias maneras de hacer esto. Vamos con la más genérica que es muy simple: sessionInfo() sessionInfo()\nsessionInfo() ## R version 4.0.0 (2020-04-24) ## Platform: x86_64-pc-linux-gnu (64-bit) ## Running under: Ubuntu 16.04.6 LTS ## ## Matrix products: default ## BLAS: /usr/lib/libblas/libblas.so.3.6.0 ## LAPACK: /usr/lib/lapack/liblapack.so.3.6.0 ## ## locale: ## [1] LC_CTYPE=en_US.UTF-8 LC_NUMERIC=C ## [3] LC_TIME=es_CL.UTF-8 LC_COLLATE=en_US.UTF-8 ## [5] LC_MONETARY=es_CL.UTF-8 LC_MESSAGES=en_US.UTF-8 ## [7] LC_PAPER=es_CL.UTF-8 LC_NAME=C ## [9] LC_ADDRESS=C LC_TELEPHONE=C ## [11] LC_MEASUREMENT=es_CL.UTF-8 LC_IDENTIFICATION=C ## ## attached base packages: ## [1] stats graphics grDevices utils datasets methods base ## ## other attached packages: ## [1] sessioninfo_1.1.1 corrplot_0.84 sjmisc_2.8.4 summarytools_0.9.6 ## [5] sjstats_0.18.0 psych_1.9.12.31 Publish_2019.12.04 prodlim_2019.11.13 ## [9] ggpubr_0.3.0 magrittr_1.5 car_3.0-7 carData_3.0-3 ## [13] scales_1.1.1 gridExtra_2.3 ggplot2_3.3.0 stargazer_5.2.2 ## [17] sjPlot_2.8.3 kableExtra_1.1.0 Rmisc_1.5 plyr_1.8.6 ## [21] lattice_0.20-41 dplyr_0.8.5 knitr_1.28 pacman_0.5.1 ## ## loaded via a namespace (and not attached): ## [1] TH.data_1.0-10 minqa_1.2.4 colorspace_1.4-1 pryr_0.1.4 ## [5] ggsignif_0.6.0 ellipsis_0.3.0 rio_0.5.16 sjlabelled_1.1.4 ## [9] estimability_1.3 parameters_0.6.1 base64enc_0.1-3 rstudioapi_0.11 ## [13] fansi_0.4.1 mvtnorm_1.1-0 lubridate_1.7.8 xml2_1.3.2 ## [17] codetools_0.2-16 splines_4.0.0 mnormt_1.5-7 nloptr_1.2.2.1 ## [21] ggeffects_0.14.3 broom_0.5.6 effectsize_0.3.0 readr_1.3.1 ## [25] compiler_4.0.0 httr_1.4.1 emmeans_1.4.6 backports_1.1.7 ## [29] assertthat_0.2.1 Matrix_1.2-18 cli_2.0.2 htmltools_0.4.0 ## [33] tools_4.0.0 coda_0.19-3 gtable_0.3.0 glue_1.4.1 ## [37] Rcpp_1.0.4.6 cellranger_1.1.0 vctrs_0.3.0 nlme_3.1-147 ## [41] blogdown_0.18 insight_0.8.4 xfun_0.13 stringr_1.4.0 ## [45] openxlsx_4.1.5 lme4_1.1-23 rvest_0.3.5 lifecycle_0.2.0 ## [49] statmod_1.4.34 rstatix_0.5.0 MASS_7.3-51.6 zoo_1.8-8 ## [53] hms_0.5.3 parallel_4.0.0 sandwich_2.5-1 yaml_2.2.1 ## [57] curl_4.3 pander_0.6.3 stringi_1.4.6 bayestestR_0.6.0 ## [61] checkmate_2.0.0 boot_1.3-25 zip_2.0.4 lava_1.6.7 ## [65] rlang_0.4.6 pkgconfig_2.0.3 matrixStats_0.56.0 evaluate_0.14 ## [69] purrr_0.3.4 rapportools_1.0 tidyselect_1.1.0 bookdown_0.18 ## [73] R6_2.4.1 magick_2.3 generics_0.0.2 multcomp_1.4-13 ## [77] pillar_1.4.4 haven_2.2.0 foreign_0.8-79 withr_2.2.0 ## [81] survival_3.1-12 abind_1.4-5 tibble_3.0.1 performance_0.4.6 ## [85] modelr_0.1.7 crayon_1.3.4 rmarkdown_2.1 grid_4.0.0 ## [89] readxl_1.3.1 data.table_1.12.8 forcats_0.5.0 digest_0.6.25 ## [93] webshot_0.5.2 xtable_1.8-4 tidyr_1.0.3 munsell_0.5.0 ## [97] viridisLite_0.3.0 tcltk_4.0.0 Acá vemos un listado de información muy completo, desde versión de R, sistema operativo, opciones de idioma local (LOCALE), y muchas librerías. Si optamos por esta versión de la información de la sesión, lo importante es fijarse en (a) version de R, y (b) de las librerías cargadas al principio, que aquí aparecen bajo “other attached packages”.\nLa segunda opción permite obtener información más precisa, con sessioninfo sessioninfo()(la única diferencia con la anterior en el nombre es que info es con minúscula sessioninfo). Con un poco más de especificaciones de sintaxis se pueden obtener directamente los puntos (a) y (b) mencionados anteriormente:\nsession_info(\u0026quot;sessioninfo\u0026quot;)$platform ## setting value ## version R version 4.0.0 (2020-04-24) ## os Ubuntu 16.04.6 LTS ## system x86_64, linux-gnu ## ui X11 ## language en_US ## collate en_US.UTF-8 ## ctype en_US.UTF-8 ## tz America/Santiago ## date 2020-05-16 package_info(pkgs = (.packages()), dependencies = FALSE) ## package * version date lib source ## car * 3.0-7 2020-03-11 [1] CRAN (R 4.0.0) ## carData * 3.0-3 2019-11-16 [1] CRAN (R 4.0.0) ## corrplot * 0.84 2017-10-16 [1] CRAN (R 4.0.0) ## dplyr * 0.8.5 2020-03-07 [1] CRAN (R 4.0.0) ## ggplot2 * 3.3.0 2020-03-05 [1] CRAN (R 4.0.0) ## ggpubr * 0.3.0 2020-05-04 [1] CRAN (R 4.0.0) ## gridExtra * 2.3 2017-09-09 [1] CRAN (R 4.0.0) ## kableExtra * 1.1.0 2019-03-16 [1] CRAN (R 4.0.0) ## knitr * 1.28 2020-02-06 [1] CRAN (R 4.0.0) ## lattice * 0.20-41 2020-04-02 [1] CRAN (R 4.0.0) ## magrittr * 1.5 2014-11-22 [1] CRAN (R 4.0.0) ## pacman * 0.5.1 2019-03-11 [1] CRAN (R 4.0.0) ## plyr * 1.8.6 2020-03-03 [1] CRAN (R 4.0.0) ## prodlim * 2019.11.13 2019-11-17 [1] CRAN (R 4.0.0) ## psych * 1.9.12.31 2020-01-08 [1] CRAN (R 4.0.0) ## Publish * 2019.12.04 2019-12-04 [1] CRAN (R 4.0.0) ## Rmisc * 1.5 2013-10-22 [1] CRAN (R 4.0.0) ## scales * 1.1.1 2020-05-11 [1] CRAN (R 4.0.0) ## sessioninfo * 1.1.1 2018-11-05 [1] CRAN (R 4.0.0) ## sjmisc * 2.8.4 2020-04-03 [1] CRAN (R 4.0.0) ## sjPlot * 2.8.3 2020-03-09 [1] CRAN (R 4.0.0) ## sjstats * 0.18.0 2020-05-06 [1] CRAN (R 4.0.0) ## stargazer * 5.2.2 2018-05-30 [1] CRAN (R 4.0.0) ## summarytools * 0.9.6 2020-03-02 [1] CRAN (R 4.0.0) ## ## [1] /home/juank/Dropbox/Rlibrary ## [2] /usr/local/lib/R/site-library ## [3] /usr/lib/R/site-library ## [4] /usr/lib/R/library   Resumen Práctica 2: Descripción de variables En esta práctica revisamos los siguientes contenidos:\n tabla descriptiva general de variables tabla de asociación (o contingencia) entre dos variables categóricas tabla y gráfico de asociación entre variables categóricas y contínuas asociaciones entre pares de variables continuas mediante el índice de correlación.   Reporte de progreso Completar el reporte de progreso correspondiente a esta práctica aquí\n Archivo de código El archivo de código R de esta práctica se puede descargar aquí\n Foro práctica 2  ","date":1648166400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1649694481,"objectID":"112494b1f3727cfe1df8f164d59d3152","permalink":"https://multivariada.netlify.app/assignment/02-code/","publishdate":"2022-03-25T00:00:00Z","relpermalink":"/assignment/02-code/","section":"assignment","summary":"pre  code.sourceCode { white-space: pre; position: relative; } pre  code.sourceCode  span { display: inline-block; line-height: 1.25; } pre  code.sourceCode  span:empty { height: 1.2em; } .sourceCode { overflow: visible; } code.sourceCode  span { color: inherit; text-decoration: inherit; } div.sourceCode { margin: 1em 0; } pre.sourceCode { margin: 0; } @media screen { div.sourceCode { overflow: auto; } } @media print { pre  code.","tags":null,"title":"Práctica 2. Descripción de variables","type":"docs"},{"authors":null,"categories":null,"content":"    pre  code.sourceCode { white-space: pre; position: relative; } pre  code.sourceCode  span { display: inline-block; line-height: 1.25; } pre  code.sourceCode  span:empty { height: 1.2em; } .sourceCode { overflow: visible; } code.sourceCode  span { color: inherit; text-decoration: inherit; } div.sourceCode { margin: 1em 0; } pre.sourceCode { margin: 0; } @media screen { div.sourceCode { overflow: auto; } } @media print { pre  code.sourceCode { white-space: pre-wrap; } pre  code.sourceCode  span { text-indent: -5em; padding-left: 5em; } } pre.numberSource code { counter-reset: source-line 0; } pre.numberSource code  span { position: relative; left: -4em; counter-increment: source-line; } pre.numberSource code  span  a:first-child::before { content: counter(source-line); position: relative; left: -1em; text-align: right; vertical-align: baseline; border: none; display: inline-block; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; padding: 0 4px; width: 4em; color: #aaaaaa; } pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; } div.sourceCode { background-color: #f8f8f8; } @media screen { pre  code.sourceCode  span  a:first-child::before { text-decoration: underline; } } code span.al { color: #ef2929; } /* Alert */ code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */ code span.at { color: #c4a000; } /* Attribute */ code span.bn { color: #0000cf; } /* BaseN */ code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */ code span.ch { color: #4e9a06; } /* Char */ code span.cn { color: #000000; } /* Constant */ code span.co { color: #8f5902; font-style: italic; } /* Comment */ code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */ code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */ code span.dt { color: #204a87; } /* DataType */ code span.dv { color: #0000cf; } /* DecVal */ code span.er { color: #a40000; font-weight: bold; } /* Error */ code span.ex { } /* Extension */ code span.fl { color: #0000cf; } /* Float */ code span.fu { color: #000000; } /* Function */ code span.im { } /* Import */ code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */ code span.kw { color: #204a87; font-weight: bold; } /* Keyword */ code span.op { color: #ce5c00; font-weight: bold; } /* Operator */ code span.ot { color: #8f5902; } /* Other */ code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */ code span.sc { color: #000000; } /* SpecialChar */ code span.ss { color: #4e9a06; } /* SpecialString */ code span.st { color: #4e9a06; } /* String */ code span.va { color: #000000; } /* Variable */ code span.vs { color: #4e9a06; } /* VerbatimString */ code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */  Índice  Presentación  Objetivo de la práctica Antecedentes de los datos a utilizar  Preparación de datos ELSOC 2016  1. Librerías principales (de R) a utilizar en el análisis 2. Cargar base de datos 3. Selección de variables a utilizar 4. Procesamiento de variables  4.1 Percepción de meritocracia 4.3. Estatus subjetivo 4.4. Sexo 4.5 Edad  5. Generación de base de datos procesada para el análisis  Archivo de código Reporte de progreso  Informe reporte de progreso  Foro    addClassKlippyTo(\"pre.r, pre.markdown\"); addKlippy('right', 'bottom', 'auto', '1', 'Copy code', 'Copied!');  Presentación Objetivo de la práctica El desarrollo de esta guía tiene por objetivo revisar algunos procedimientos básicos de la preparación de datos con R, que son necesarios para luego poder aplicar los contenidos más específicos de este curso.\nPor temas de orden y reproducibilidad, en este curso vamos a separar en dos momentos el trabajo con datos, y dos archivos de código correspondientes:\n Preparación corresponde a lo que se conoce generalmente como “limpieza”, es decir, realizar las modificaciones necesarias para poder efectuar los análisis. Estas modificaciones previas al análisis son necesarias ya que los datos originales con los que se va a trabajar en general no vienen perfectamente adaptados a los análisis que se quieren hacer. Por lo tanto, en cuanto a datos también hacemos la distinción entre datos originales y datos preparados (o procesados).\n Análisis: se relaciona tanto con análisis descriptivos asociados a las preguntas de investigación y como también modelamiento de datos para contrastar hipótesis de investigación.\n  Los procesos de preparación y análisis vinculados a datos y resultados se presentan en el siguiente esquema: Tanto la preparación como el análisis (que son parte del concepto más general de procesamiento) quedan registrados cada en un archivo de código. Los detalles de este tipo de archivos se pueden revisar aquí. Archivo de código R: archivo con extensión .R donde se almacena el código de análisis. Para generarlo desde RStudio: File \u0026gt; New File \u0026gt; R Script (o ctrl+shift+N), y para grabarlo File \u0026gt; Save (o ctrl+s), y darle nombre la primera vez (recordar: sin tilde ni ñ, y evitar espacios) \nEl documento de código de preparación posee 5 partes, más una sección de identificación inicial:\nIdentificación y descripción general: Título, autor(es), fecha, información breve sobre el contenido del documento Librerías: cargar librerías a utilizar Datos: carga de datos Selección de variables a utilizar Procesamiento de variables: en este punto, por cada variable se realiza lo siguiente: Descriptivo básico Recodificación: (datos perdidos y valores (en caso de ser necesario) Etiquetamiento: de variable y valores (en caso de ser necesario) Otros ajustes  Generación de base de datos preparada para el análisis.  Al final de esta práctica la idea es que cada un_ elabore y entienda su propio documento de preparación de datos.\nEn el ejemplo vamos a procesar variables de meritocracia y estatus (objetivo y subjetivo) utilizando los datos de la encuesta ELSOC .\n  Antecedentes de los datos a utilizar El Estudio Longitudinal Social de Chile (ELSOC) es una encuesta desarrollada para analizar longitudinalmente la evolución del conflicto y cohesión en la sociedad chilena.\nUno de los módulos de ELSOC es “Desigualdad y Legitimidad”. Este módulo busca estudiar las percepciones y atribuciones asociadas a las desigualdades sociales. Se ve motivado por el interés de comprender cómo las personas perciben, legitiman y reproducen las diferencias de ingresos, estatus y poder presentes en el Chile contemporáneo.\nEl presente ejercicio tiene por objetivo el procesar los datos para obtener las variables relevantes para el estudio de la Percepción de Meritocracia, entendida como el grado en que los individuos consideran que su sociedad cumple con los principios de una meritocracia, es decir, que funciona como un sistema que asigna recompensas en función del esfuerzo y las habilidades. Para ello, junto con variables de meritocracia, consideraremos también variables de estatus (educación y estatus subjetivo), y variables de caracterización sociodemográfica (sexo y edad).\n  Preparación de datos ELSOC 2016 1. Librerías principales (de R) a utilizar en el análisis Como sabemos, la lógica de R es instalar librerías (solo 1 vez, con install.packages(\"librería\")), y luego cargarlas cada vez que es necesario usarlas (con library(librería)). El problema de esto es que a veces no se sabe claramente qué librerías están instaladas y cuales no, lo que va a arrojar error al cargarlas. Y, como sucede en R, existe una librería para solucionar este problema que se llama pacman (package manager). Lo que hace pacman es cargar la librería, y si no está instalada, la instala y la carga:\nPara utilizar la primera vez (si es que no está instalada):\ninstall.packages(\u0026quot;pacman\u0026quot;) Y en adelante, las librerías se cargan así pacman::p_load(libreria1,libreria2,libreriaX) :\npacman::p_load(dplyr, sjmisc, car, sjlabelled, stargazer) Para esta sesión vamos a utilizar Las librerías que vamos a utilizar son:\n dplyr: ajuste general de datos sjmisc: descripción y exploración de base de datos car: principalmente la función recode para recodificar/agrupar valores de variable stargazer: para tabla descriptiva   2. Cargar base de datos Ajustar espacio de trabajo\nPrevio a la carga de nuestra base de datos, se recomienda ejecutar los siguientes comandos:\nrm(list=ls()) # borrar todos los objetos en el espacio de trabajo options(scipen=999) # valores sin notación científica La función rm(list=ls()) permite comenzar con un espacio de trabajo (environment) vacío y sin otros objetos. Así también, la función options(scipen=999) desactiva la notación científica, es decir, veremos los valores numéricos con todos sus decimales.\nDatos\nLas bases de datos se pueden cargar de un archivo local o en línea. Para este caso utilizaremos un archivo en línea que viene en formato RData: ELSOC_W01_v3.10.RData. Abrir bases de datos en otros formatos: Los formatos mas comunes en que se almacenan las bases de datos son .dta (Stata) y .sav (Spss). Para abrir desde R utlilizamos la librería haven y sus funciones read_dta y read_sav según corresponda. Ej: datos \u0026lt;- read_dta(\"base_casen.dta\"). Recordar antes instalar/cargar la librería: pacman::p_load(haven) \n#cargamos la base de datos desde internet load(url(\u0026quot;https://multivariada.netlify.com/assignment/data/original/ELSOC_W01_v3.10.RData\u0026quot;)) La base de datos aparece como un objeto en nuestro espacio de trabajo, con el nombre original con la que fue guardada (elsoc_2016):\nRealizamos un chequeo básico de la lectura de datos: nombres de las variables y tamaño de la base en términos de casos y variables (en este ejemplo, 2927 casos y 383 variables).\ndim(elsoc_2016) # dimension de la base ## [1] 2927 383 Y si se quiere revisar en formato de planilla de datos:\nView(elsoc_2016)  3. Selección de variables a utilizar Este paso consiste en crear un subset reducido de datos que contenga solo las variables de interés. Para ello:\nSe identifica el nombre de las variables que registran la información de preguntas o items del instrumento: esto aparece en el libro de códigos y/o en el cuestionario, o también se puede hacer buscando en la base de datos mediante alguna palabra clave asociada a la pregunta. Por ejemplo, si queremos buscar variables asociadas a educación, utilizamos la función find_var (de sjmisc, librería que cargamos en el paso 1), que nos entrega nombre de la variable en columna var.name. Por ejemplo, si buscamos alguna variable asociada al concepto esfuerzo:  find_var(data = elsoc_2016,\u0026quot;esfuerzo\u0026quot;) ## col.nr var.name ## 1 158 c18_09 ## var.label ## 1 Grado de acuerdo: Las personas son recompensadas por sus esfuerzos Nos informa que esta variable es la c18_09.\nMediante la función select de dplyr, seleccionamos cada una de nuestras variables de interés y creamos una nueva base con el nombre proc_elsoc, donde “proc” hace referencia a base procesada:\nproc_elsoc \u0026lt;- elsoc_2016 %\u0026gt;% select(c18_09, # percepción meritocracia esfuerzo  c18_10, # percepción meritocracia talento  d01_01, # estatus social subjetivo  m01, # nivel educacional  m0_sexo,# sexo  m0_edad)# edad  # Comprobar names(proc_elsoc) ## [1] \u0026quot;c18_09\u0026quot; \u0026quot;c18_10\u0026quot; \u0026quot;d01_01\u0026quot; \u0026quot;m01\u0026quot; \u0026quot;m0_sexo\u0026quot; \u0026quot;m0_edad\u0026quot; Mediante el comando get_label obtenemos el atributo label de las variables.\nsjlabelled::get_label(proc_elsoc) ## c18_09 ## \u0026quot;Grado de acuerdo: Las personas son recompensadas por sus esfuerzos\u0026quot; ## c18_10 ## \u0026quot;Grado de acuerdo: Las personas son recompensada por su inteligencia\u0026quot; ## d01_01 ## \u0026quot;Estatus Social Subjetivo: Donde se ubicaria ud. en la sociedad chilena\u0026quot; ## m01 ## \u0026quot;Nivel educacional\u0026quot; ## m0_sexo ## \u0026quot;Sexo del entrevistado\u0026quot; ## m0_edad ## \u0026quot;Edad del entrevistado\u0026quot; Podemos ver que son muy largas, por lo tanto, es necesario cambiarlas por etiquetas más cortas.\n 4. Procesamiento de variables Para el procesamiento de cada variable se seguirá el siguiente flujo de trabajo:\nDescriptivo general Recodificación: de casos perdidos y otros valores (en caso necesario) Etiquetado: cambio de nombres de variables y valores (en caso necesario) Otros ajustes  Y se recomienda también un descriptivo final para revisar que el procesamiento de cada variable está ok.\n4.1 Percepción de meritocracia En ELSOC, las variables que permiten medir la percepción de las personas con respecto al funcionamiento de la meritocracia en Chile son las siguientes:\n [c18_09]: “Grado de acuerdo: Las personas son recompensadas por sus esfuerzos” (1 = Totalmente en desacuerdo; 5 = Totalmente de acuerdo) [c18_10]: “Grado de acuerdo: Las personas son recompensadas por su inteligencia” (1 = Totalmente en desacuerdo; 5 = Totalmente de acuerdo)  a. Descriptivo\nPara los descriptivos se utilizará la función frq, de la librería sjmisc:\nfrq(proc_elsoc$c18_09) ## ## Grado de acuerdo: Las personas son recompensadas por sus esfuerzos (x) \u0026lt;numeric\u0026gt; ## # total N=2927 valid N=2927 mean=-3.06 sd=71.66 ## ## val label frq raw.prc valid.prc cum.prc ## -999 No Responde (no leer) 4 0.14 0.14 0.14 ## -888 No Sabe (no leer) 14 0.48 0.48 0.61 ## 1 Totalmente en desacuerdo 357 12.20 12.20 12.81 ## 2 En desacuerdo 1331 45.47 45.47 58.28 ## 3 Ni de acuerdo ni en desacuerdo 497 16.98 16.98 75.26 ## 4 De acuerdo 646 22.07 22.07 97.34 ## 5 Totalmente de acuerdo 78 2.66 2.66 100.00 ## NA \u0026lt;NA\u0026gt; 0 0.00 NA NA frq(proc_elsoc$c18_10) ## ## Grado de acuerdo: Las personas son recompensada por su inteligencia (x) \u0026lt;numeric\u0026gt; ## # total N=2927 valid N=2927 mean=-3.42 sd=74.36 ## ## val label frq raw.prc valid.prc cum.prc ## -999 No Responde (no leer) 2 0.07 0.07 0.07 ## -888 No Sabe (no leer) 18 0.61 0.61 0.68 ## 1 Totalmente en desacuerdo 288 9.84 9.84 10.52 ## 2 En desacuerdo 1163 39.73 39.73 50.26 ## 3 Ni de acuerdo ni en desacuerdo 559 19.10 19.10 69.35 ## 4 De acuerdo 814 27.81 27.81 97.16 ## 5 Totalmente de acuerdo 83 2.84 2.84 100.00 ## NA \u0026lt;NA\u0026gt; 0 0.00 NA NA En ambas variables vemos valores asociados a la opción “No responde” (-999) y “No sabe” (-888), que corresponde definirlos como casos perdidos (en el caso de R, como casos NA). El resto de los valores y etiquetas se encuentran en orden, así que en la recodificiación solo nos haremos cargo de los casos perdidos.\nb. Recodificación\nPara recodificar utilizamos la función recode, de la librería car\nproc_elsoc$c18_09 \u0026lt;- recode(proc_elsoc$c18_09, \u0026quot;c(-888,-999)=NA\u0026quot;) proc_elsoc$c18_10 \u0026lt;- recode(proc_elsoc$c18_10, \u0026quot;c(-888,-999)=NA\u0026quot;) c - Etiquetado\nVamos a dar un nombre más sustantivo a las variables con la función rename, de la librería dplyr:\nproc_elsoc \u0026lt;- proc_elsoc %\u0026gt;% rename(\u0026quot;mesfuerzo\u0026quot;=c18_09, # meritocracia esfuerzo  \u0026quot;mtalento\u0026quot; =c18_10) # meritocracia talento Además de cambiar el nombre, queremos cambiar la etiqueta de la variable.\nget_label(proc_elsoc$mesfuerzo) ## [1] \u0026quot;Grado de acuerdo: Las personas son recompensadas por sus esfuerzos\u0026quot; proc_elsoc$mesfuerzo \u0026lt;- set_label(x = proc_elsoc$mesfuerzo,label = \u0026quot;Recompensa: esfuerzo\u0026quot;)  get_label(proc_elsoc$mtalento) ## [1] \u0026quot;Grado de acuerdo: Las personas son recompensada por su inteligencia\u0026quot; proc_elsoc$mtalento \u0026lt;- set_label(x = proc_elsoc$mtalento, label = \u0026quot;Recompensa: talento\u0026quot;) d. Otros ajustes\nPara este caso vamos a crear una variable que sea el promedio de los dos items de meritocracia.\nproc_elsoc$pmerit \u0026lt;- (proc_elsoc$mesfuerzo+proc_elsoc$mtalento)/2 summary(proc_elsoc$pmerit) ## Min. 1st Qu. Median Mean 3rd Qu. Max. NA\u0026#39;s ## 1.000 2.000 2.500 2.654 3.500 5.000 29 get_label(proc_elsoc$pmerit) ## [1] \u0026quot;Recompensa: esfuerzo\u0026quot; Vemos que todavía tiene la etiqueta de la variable “Recompensa: esfuerzo”\nproc_elsoc$pmerit \u0026lt;- set_label(x = proc_elsoc$pmerit, label = \u0026quot;Meritocracia promedio\u0026quot;) Revisión final\nNuevamente un descriptivo de cada variable para confirmar que el procesamiento está ok:\nfrq(proc_elsoc$mesfuerzo) ## ## Recompensa: esfuerzo (x) \u0026lt;numeric\u0026gt; ## # total N=2927 valid N=2909 mean=2.57 sd=1.05 ## ## val label frq raw.prc valid.prc cum.prc ## -999 No Responde (no leer) 0 0.00 0.00 0.00 ## -888 No Sabe (no leer) 0 0.00 0.00 0.00 ## 1 Totalmente en desacuerdo 357 12.20 12.27 12.27 ## 2 En desacuerdo 1331 45.47 45.75 58.03 ## 3 Ni de acuerdo ni en desacuerdo 497 16.98 17.08 75.11 ## 4 De acuerdo 646 22.07 22.21 97.32 ## 5 Totalmente de acuerdo 78 2.66 2.68 100.00 ## NA \u0026lt;NA\u0026gt; 18 0.61 NA NA frq(proc_elsoc$mtalento) ## ## Recompensa: talento (x) \u0026lt;numeric\u0026gt; ## # total N=2927 valid N=2907 mean=2.74 sd=1.06 ## ## val label frq raw.prc valid.prc cum.prc ## -999 No Responde (no leer) 0 0.00 0.00 0.00 ## -888 No Sabe (no leer) 0 0.00 0.00 0.00 ## 1 Totalmente en desacuerdo 288 9.84 9.91 9.91 ## 2 En desacuerdo 1163 39.73 40.01 49.91 ## 3 Ni de acuerdo ni en desacuerdo 559 19.10 19.23 69.14 ## 4 De acuerdo 814 27.81 28.00 97.14 ## 5 Totalmente de acuerdo 83 2.84 2.86 100.00 ## NA \u0026lt;NA\u0026gt; 20 0.68 NA NA frq(proc_elsoc$pmerit) ## ## Meritocracia promedio (x) \u0026lt;numeric\u0026gt; ## # total N=2927 valid N=2898 mean=2.65 sd=0.97 ## ## val label frq raw.prc valid.prc cum.prc ## -999.0 No Responde (no leer) 0 0.00 0.00 0.00 ## -888.0 No Sabe (no leer) 0 0.00 0.00 0.00 ## 1.0 Totalmente en desacuerdo 243 8.30 8.39 8.39 ## 1.5 1.5 79 2.70 2.73 11.11 ## 2.0 En desacuerdo 1041 35.57 35.92 47.03 ## 2.5 2.5 222 7.58 7.66 54.69 ## 3.0 Ni de acuerdo ni en desacuerdo 536 18.31 18.50 73.19 ## 3.5 3.5 169 5.77 5.83 79.02 ## 4.0 De acuerdo 528 18.04 18.22 97.24 ## 4.5 4.5 38 1.30 1.31 98.55 ## 5.0 Totalmente de acuerdo 42 1.43 1.45 100.00 ## NA \u0026lt;NA\u0026gt; 29 0.99 NA NA Sobre generación de índices: en este caso aplicamos un promedio simple de dos items, pero hay ciertas consideraciones adicionales a tener cuando existen casos perdidos y también cuando son más de 2 items. Para esto, revisar la guía adicional sobre índices y transformación de variables\n 4.2. Educación  [m01] = ¿Cuál es su nivel educacional? Indique el tipo de estudio actual (si estudia actualmente) o el último tipo aprobado (si no estudia actualmente).  a. Descriptivo\nfrq(proc_elsoc$m01) ## ## Nivel educacional (x) \u0026lt;numeric\u0026gt; ## # total N=2927 valid N=2927 mean=4.57 sd=26.34 ## ## val label frq raw.prc valid.prc cum.prc ## -999 No Responde (no leer) 2 0.07 0.07 0.07 ## -888 No Sabe (no leer) 0 0.00 0.00 0.07 ## 1 Sin estudios 37 1.26 1.26 1.33 ## 2 Educacion Basica o Preparatoria incompleta 322 11.00 11.00 12.33 ## 3 Educacion Basica o Preparatoria completa 297 10.15 10.15 22.48 ## 4 Educacion Media o Humanidades incompleta 394 13.46 13.46 35.94 ## 5 Educacion Media o Humanidades completa 857 29.28 29.28 65.22 ## 6 Tecnica Superior incompleta 102 3.48 3.48 68.71 ## 7 Tecnica Superior completa 381 13.02 13.02 81.72 ## 8 Universitaria incompleta 186 6.35 6.35 88.08 ## 9 Universitaria completa 303 10.35 10.35 98.43 ## 10 Estudios de posgrado (magister o doctorado) 46 1.57 1.57 100.00 ## NA \u0026lt;NA\u0026gt; 0 0.00 NA NA b. Recodificación\n Datos perdidos:  proc_elsoc$m01 \u0026lt;- recode(proc_elsoc$m01, \u0026quot;c(-888,-999)=NA\u0026quot;)  Valores  Recodificación de acuerdo a las categorías CINE 2011 (UNESCO)\n1. Sin estudios = [CINE 0 ] = 1 2. Educacion Basica o Preparatoria incompleta = [CINE 0 ] = 1 3. Educacion Basica o Preparatoria completa = [CINE 1,2 ] = 2 4. Educacion Media o Humanidades incompleta = [CINE 3 ] = 3 5. Educacion Media o Humanidades completa = [CINE 3 ] = 3 6. Tecnico Superior incompleta = [CINE 5 ] = 4 7. Tecnico Superior completa = [CINE 5 ] = 4 8. Universitaria incompleta = [CINE 6 ] = 5 9. Universitaria completa = [CINE 6 ] = 6 10. Estudios de posgrado (magister o doctorado) = [CINE 7, 8] = 6 # recodificacion usando funcion \u0026#39;recode\u0026#39; de la libreria car proc_elsoc$m01 \u0026lt;- car::recode(proc_elsoc$m01, \u0026quot;c(1,2)=1; c(3)=2;c(4,5)=3;c(6,7)=4;c(8,9,10)=5\u0026quot;) Comprobar con un nuevo descriptivo:\nfrq(proc_elsoc$m01) ## ## Nivel educacional (x) \u0026lt;numeric\u0026gt; ## # total N=2927 valid N=2925 mean=3.18 sd=1.21 ## ## val label frq raw.prc valid.prc ## -999 No Responde (no leer) 0 0.00 0.00 ## -888 No Sabe (no leer) 0 0.00 0.00 ## 1 Sin estudios 359 12.27 12.27 ## 2 Educacion Basica o Preparatoria incompleta 297 10.15 10.15 ## 3 Educacion Basica o Preparatoria completa 1251 42.74 42.77 ## 4 Educacion Media o Humanidades incompleta 483 16.50 16.51 ## 5 Educacion Media o Humanidades completa 535 18.28 18.29 ## 6 Tecnica Superior incompleta 0 0.00 0.00 ## 7 Tecnica Superior completa 0 0.00 0.00 ## 8 Universitaria incompleta 0 0.00 0.00 ## 9 Universitaria completa 0 0.00 0.00 ## 10 Estudios de posgrado (magister o doctorado) 0 0.00 0.00 ## NA \u0026lt;NA\u0026gt; 2 0.07 NA ## cum.prc ## 0.00 ## 0.00 ## 12.27 ## 22.43 ## 65.20 ## 81.71 ## 100.00 ## 100.00 ## 100.00 ## 100.00 ## 100.00 ## 100.00 ## NA Se observa que los valores coinciden con la recodificación (los casos se acumulan entre las categorías 1 y 5), pero las etiquetas ahora no coinciden; se soluciona en el siguiente paso.\nc. Etiquetado\nPara re-etiquetar valores usamos la función set_labels, de la librería sjlabelled\nproc_elsoc$m01 \u0026lt;- set_labels(proc_elsoc$m01,  labels=c( \u0026quot;Primaria incompleta menos\u0026quot;=1,  \u0026quot;Primaria y secundaria baja\u0026quot;=2,  \u0026quot;Secundaria alta\u0026quot;=3,  \u0026quot;Terciaria ciclo corto\u0026quot;=4,  \u0026quot;Terciaria y Postgrado\u0026quot;=5)) Luego renombramos la variable con un nombre más sustantivo\nproc_elsoc \u0026lt;- rename(proc_elsoc,\u0026quot;edcine\u0026quot;=m01) Además de cambiar el nombre, queremos cambiar la etiqueta de la variable.\nget_label(proc_elsoc$edcine) ## [1] \u0026quot;Nivel educacional\u0026quot; proc_elsoc$edcine \u0026lt;- set_label(x = proc_elsoc$edcine,label = \u0026quot;Educación\u0026quot;)   4.3. Estatus subjetivo a. Descriptivo\n [d01_01]: “Estatus Social Subjetivo: Donde se ubicaria ud. en la sociedad chilena” (0 = el nivel mas bajo; 10 = el nivel mas alto)  frq(proc_elsoc$d01_01) summary(proc_elsoc$d01_01) ## ## Estatus Social Subjetivo: Donde se ubicaria ud. en la sociedad chilena (x) \u0026lt;numeric\u0026gt; ## # total N=2927 valid N=2927 mean=0.63 sd=57.67 ## ## val label frq raw.prc valid.prc cum.prc ## -999 No Responde (no leer) 1 0.03 0.03 0.03 ## -888 No Sabe (no leer) 11 0.38 0.38 0.41 ## 0 0 El nivel mas bajo 44 1.50 1.50 1.91 ## 1 1 84 2.87 2.87 4.78 ## 2 2 207 7.07 7.07 11.86 ## 3 3 439 15.00 15.00 26.85 ## 4 4 677 23.13 23.13 49.98 ## 5 5 975 33.31 33.31 83.29 ## 6 6 310 10.59 10.59 93.88 ## 7 7 116 3.96 3.96 97.85 ## 8 8 37 1.26 1.26 99.11 ## 9 9 4 0.14 0.14 99.25 ## 10 10 El nivel mas alto 22 0.75 0.75 100.00 ## NA \u0026lt;NA\u0026gt; 0 0.00 NA NA ## ## Min. 1st Qu. Median Mean 3rd Qu. Max. ## -999.0000 3.0000 5.0000 0.6338 5.0000 10.0000 b. Recodificación\nproc_elsoc$d01_01 \u0026lt;- recode(proc_elsoc$d01_01, \u0026quot;c(-888,-999)=NA\u0026quot;) c. Etiquetado\n Cambio de nombre de variable a etiqueta más sustantiva ess (estatus social subjetivo)  proc_elsoc \u0026lt;- proc_elsoc %\u0026gt;% rename(\u0026quot;ess\u0026quot;=d01_01) # estatus social subjetivo Además de cambiar el nombre, queremos cambiar la etiqueta de la variable.\nget_label(proc_elsoc$ess) ## [1] \u0026quot;Estatus Social Subjetivo: Donde se ubicaria ud. en la sociedad chilena\u0026quot; proc_elsoc$ess \u0026lt;- set_label(x = proc_elsoc$ess,label = \u0026quot;Estatus Social Subjetivo\u0026quot;)  4.4. Sexo  [m0_sexo] = Indicar el sexo del entrevistado.  a. Descriptivo\nfrq(proc_elsoc$m0_sexo) ## ## Sexo del entrevistado (x) \u0026lt;numeric\u0026gt; ## # total N=2927 valid N=2927 mean=1.60 sd=0.49 ## ## val label frq raw.prc valid.prc cum.prc ## 1 Hombre 1163 39.73 39.73 39.73 ## 2 Mujer 1764 60.27 60.27 100.00 ## NA \u0026lt;NA\u0026gt; 0 0.00 NA NA b. Recodificación\nEn general esta variable no tiene problemas de casos perdidos ni de etiquetas, pero de todas maneras vamos a hacer un cambio de acuerdo a convenciones en análisis de datos, donde por lo general hombres tienen valor 0 y mujeres 1:\nproc_elsoc$m0_sexo \u0026lt;- car::recode(proc_elsoc$m0_sexo, \u0026quot;1=0;2=1\u0026quot;) c. Etiquetado\nY ahora cambiamos las etiquetas de acuerdo a la recodificación anterior:\nproc_elsoc$m0_sexo \u0026lt;- set_labels(proc_elsoc$m0_sexo,  labels=c( \u0026quot;Hombre\u0026quot;=0,  \u0026quot;Mujer\u0026quot;=1)) También el nombre de la variable a algo más simple:\nproc_elsoc \u0026lt;- rename(proc_elsoc,\u0026quot;sexo\u0026quot;=m0_sexo) Además de cambiar el nombre, queremos cambiar la etiqueta de la variable.\nget_label(proc_elsoc$sexo) ## [1] \u0026quot;Sexo del entrevistado\u0026quot; proc_elsoc$sexo \u0026lt;- set_label(x = proc_elsoc$sexo,label = \u0026quot;Sexo\u0026quot;) Revisar con un nuevo descriptivo:\nfrq(proc_elsoc$sexo) ## ## Sexo (x) \u0026lt;numeric\u0026gt; ## # total N=2927 valid N=2927 mean=0.60 sd=0.49 ## ## val label frq raw.prc valid.prc cum.prc ## 0 Hombre 1163 39.73 39.73 39.73 ## 1 Mujer 1764 60.27 60.27 100.00 ## NA \u0026lt;NA\u0026gt; 0 0.00 NA NA  4.5 Edad  [m0_edad] = ¿Cuáles su edad? (años cumplidos).  a. Descriptivo\nfrq(proc_elsoc$m0_edad) ## ## Edad del entrevistado (x) \u0026lt;numeric\u0026gt; ## # total N=2927 valid N=2927 mean=46.09 sd=15.29 ## ## val label frq raw.prc valid.prc cum.prc ## -999 No Responde (no leer) 0 0.00 0.00 0.00 ## -888 No Sabe (no leer) 0 0.00 0.00 0.00 ## 18 18 19 0.65 0.65 0.65 ## 19 19 32 1.09 1.09 1.74 ## 20 20 26 0.89 0.89 2.63 ## 21 21 39 1.33 1.33 3.96 ## 22 22 49 1.67 1.67 5.64 ## 23 23 44 1.50 1.50 7.14 ## 24 24 51 1.74 1.74 8.88 ## 25 25 46 1.57 1.57 10.45 ## 26 26 44 1.50 1.50 11.96 ## 27 27 51 1.74 1.74 13.70 ## 28 28 58 1.98 1.98 15.68 ## 29 29 47 1.61 1.61 17.29 ## 30 30 66 2.25 2.25 19.54 ## 31 31 48 1.64 1.64 21.18 ## 32 32 64 2.19 2.19 23.37 ## 33 33 55 1.88 1.88 25.25 ## 34 34 55 1.88 1.88 27.13 ## 35 35 67 2.29 2.29 29.42 ## 36 36 70 2.39 2.39 31.81 ## 37 37 46 1.57 1.57 33.38 ## 38 38 57 1.95 1.95 35.33 ## 39 39 37 1.26 1.26 36.59 ## 40 40 57 1.95 1.95 38.54 ## 41 41 58 1.98 1.98 40.52 ## 42 42 67 2.29 2.29 42.81 ## 43 43 54 1.84 1.84 44.65 ## 44 44 45 1.54 1.54 46.19 ## 45 45 53 1.81 1.81 48.00 ## 46 46 77 2.63 2.63 50.63 ## 47 47 56 1.91 1.91 52.55 ## 48 48 72 2.46 2.46 55.01 ## 49 49 53 1.81 1.81 56.82 ## 50 50 69 2.36 2.36 59.17 ## 51 51 55 1.88 1.88 61.05 ## 52 52 69 2.36 2.36 63.41 ## 53 53 57 1.95 1.95 65.36 ## 54 54 76 2.60 2.60 67.95 ## 55 55 72 2.46 2.46 70.41 ## 56 56 76 2.60 2.60 73.01 ## 57 57 53 1.81 1.81 74.82 ## 58 58 57 1.95 1.95 76.77 ## 59 59 44 1.50 1.50 78.27 ## 60 60 57 1.95 1.95 80.22 ## 61 61 33 1.13 1.13 81.35 ## 62 62 33 1.13 1.13 82.47 ## 63 63 49 1.67 1.67 84.15 ## 64 64 39 1.33 1.33 85.48 ## 65 65 60 2.05 2.05 87.53 ## 66 66 39 1.33 1.33 88.86 ## 67 67 39 1.33 1.33 90.19 ## 68 68 35 1.20 1.20 91.39 ## 69 69 32 1.09 1.09 92.48 ## 70 70 37 1.26 1.26 93.75 ## 71 71 29 0.99 0.99 94.74 ## 72 72 28 0.96 0.96 95.70 ## 73 73 42 1.43 1.43 97.13 ## 74 74 39 1.33 1.33 98.46 ## 75 75 37 1.26 1.26 99.73 ## 77 77 1 0.03 0.03 99.76 ## 78 78 3 0.10 0.10 99.86 ## 80 80 1 0.03 0.03 99.90 ## 81 81 1 0.03 0.03 99.93 ## 88 88 2 0.07 0.07 100.00 ## NA \u0026lt;NA\u0026gt; 0 0.00 NA NA b. Recodificación: no es necesario en este caso\nc. Etiquetado\nCambio del nombre de la variable a algo más simple:\nproc_elsoc \u0026lt;- rename(proc_elsoc,\u0026quot;edad\u0026quot;=m0_edad) Además de cambiar el nombre, queremos cambiar la etiqueta de la variable.\nget_label(proc_elsoc$edad) ## [1] \u0026quot;Edad del entrevistado\u0026quot; proc_elsoc$edad \u0026lt;- set_label(x = proc_elsoc$edad,label = \u0026quot;Edad\u0026quot;)   5. Generación de base de datos procesada para el análisis Antes de guardar la base procesada, revisamos nuevamente todas las variables con una tabla descriptiva general mediante la función stargazer (de la librería homónima)\nPrimero vamos a reformatear el objeto proc_elsoc como base de datos (as.data.frame), paso necesario para que sea reconocido como tal por stargazer\nproc_elsoc \u0026lt;-as.data.frame(proc_elsoc) stargazer(proc_elsoc, type=\u0026quot;text\u0026quot;) ## ## ============================================================== ## Statistic N Mean St. Dev. Min Pctl(25) Pctl(75) Max ## -------------------------------------------------------------- ## mesfuerzo 2,909 2.573 1.047 1.000 2.000 3.000 5.000 ## mtalento 2,907 2.739 1.060 1.000 2.000 4.000 5.000 ## ess 2,915 4.330 1.567 0.000 3.000 5.000 10.000 ## edcine 2,925 3.184 1.207 1.000 3.000 4.000 5.000 ## sexo 2,927 0.603 0.489 0 0 1 1 ## edad 2,927 46.091 15.287 18 33 58 88 ## pmerit 2,898 2.654 0.969 1.000 2.000 3.500 5.000 ## -------------------------------------------------------------- Si se desea modificar las columnas que aparecen en la tabla se puede ocupar la opción summary.stat, donde se pueden especificar:\n “max” maximum “mean” mean “median” median “min” minimum “n” number of observations “p25” 25th percentile “p75” 75th percentile “sd” standard deviation  Por ejemplo, si quiero una tabla solo con promedio, n, sd y p75: stargazer(data, type=\"text\", summary.stat = c(\"mean\", \"n\", \"sd\", \"p75\"))\n  Guardar base de datos procesada: en carpeta local La ruta hacia su carpeta local si está trabajando en windows debería ser algo como “C:/Users/Lenovo/Clases/y aquí nombre del archivo a grabar  El comando para guardar es save:\nsave(proc_elsoc,file = \u0026quot;[ruta hacia carpeta local en su computador]/ELSOC_ess_merit2016.RData\u0026quot;) En este caso, seguimos una estructura de carpetas de datos, separando en una carpeta los datos originales, y en otra (proc) los datos procesados:\nsave(proc_elsoc,file = \u0026quot;content/assignment/data/proc/ELSOC_ess_merit2016.RData\u0026quot;) De rutas, estructura de carpetas y otros \n Encontrando la ruta a carpeta local: lo más fácil es crear la carpeta donde se desean guardar los datos desde el administrador de archivos del computador. Luego, posicionarse con el cursor sobre la carpeta y seleccionar “Propiedades”, en la ventana emergente debería aparecer la ruta hacia la carpeta en “Ubicación”. Copiar esa ruta y agregar al final el nombre de la carpeta (separada por slash)\n Sobre los “slashes” (\\ o /): en la ruta las carpetas y el archivo final aparecen separados por slashes, que según el sistema utilizado pueden ser slash (/) o backslash (\\). En R por defecto se usa slash, pero en Windows backslash, por lo que si se usa Windows hay que reemplazarlos por backslash o también puede ser por un doble slash (//).\n Por temas de compatibilidad general, en las rutas se recomienda evitar tildes, eñes, espacios, mayúsculas y guiones bajos (_).\n Estructura de carpetas: para mantener el orden se sugiere seguir un protocolo de estructura de carpetas de proyecto, para lo que recomendamos el protocolo IPO, y que se adapta al flujo de trabajo presentado al principio de este práctico. Básicamente son tres carpetas: input, procesamiento, output. En la carpeta input crear la subcarpeta data-orig para guardar datos originales, y data-proc para los procesados. En procesamiento se guardan los archivos de código y en output las tablas y los gráficos.\n     Archivo de código El archivo de código R de esta práctica se puede descargar aquí\n Reporte de progreso Completar el reporte de progreso correspondiente a esta práctica aquí. El plazo para contestarlo es antes que se publique la siguiente práctica el día viernes después de clases.\nInforme reporte de progreso Disponible aquí\n  Foro  ","date":1647561600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1649694481,"objectID":"9f719bf107561ff88768da3264c94b73","permalink":"https://multivariada.netlify.app/assignment/01-code/","publishdate":"2022-03-18T00:00:00Z","relpermalink":"/assignment/01-code/","section":"assignment","summary":"pre  code.sourceCode { white-space: pre; position: relative; } pre  code.sourceCode  span { display: inline-block; line-height: 1.25; } pre  code.sourceCode  span:empty { height: 1.2em; } .sourceCode { overflow: visible; } code.sourceCode  span { color: inherit; text-decoration: inherit; } div.sourceCode { margin: 1em 0; } pre.sourceCode { margin: 0; } @media screen { div.sourceCode { overflow: auto; } } @media print { pre  code.","tags":null,"title":"Práctica 1. Preparación de datos en R","type":"docs"},{"authors":null,"categories":null,"content":"  Índice  Encuesta Documento presentación   Encuesta link a Menti\n Documento presentación     ---  ","date":1616025600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1647616924,"objectID":"ac47977a15b3902ca3402f61e5bf9df2","permalink":"https://multivariada.netlify.app/class/01-class/","publishdate":"2021-03-18T00:00:00Z","relpermalink":"/class/01-class/","section":"class","summary":"  Índice  Encuesta Documento presentación   Encuesta link a Menti\n Documento presentación     ---  ","tags":null,"title":"Presentación del curso","type":"docs"},{"authors":null,"categories":null,"content":"  Índice  Documento presentación Lecturas   Documento presentación   Lecturas  Moore: 2. Análisis de relaciones (97-131)   ","date":1609459200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1648828623,"objectID":"a0c01f3889200201f6df018341b3db8f","permalink":"https://multivariada.netlify.app/class/03-class/","publishdate":"2021-01-01T00:00:00Z","relpermalink":"/class/03-class/","section":"class","summary":"  Índice  Documento presentación Lecturas   Documento presentación   Lecturas  Moore: 2. Análisis de relaciones (97-131)   ","tags":null,"title":"Regresión simple 1","type":"docs"},{"authors":null,"categories":null,"content":" Presentación El Estudio Longitudinal Social de Chile (ELSOC) es una encuesta desarrollada para analizar intertemporalmente la evolución del conflicto y cohesión en la sociedad chilena.\nUno de los módulos de ELSOC es “Desigualdad y Legitimidad”. Este módulo busca estudiar las percepciones y atribuciones asociadas a las desigualdades sociales. Se ve motivado por el interés de comprender cómo las personas perciben, legitiman y reproducen las diferencias de ingresos, estatus y poder presentes en el Chile contemporáneo.\nEl presente ejercicio tiene por objetivo el procesar los datos para obtener las variables relevante para el estudio de la Percepción de Meritocracia, entendida como el grado en que los individuos consideran que su sociedad cumple con los principios de una meritocracia, es decir, que funciona como un sistema que asigna recompensas en función del esfuerzo y las habilidades.\n Preparacion de datos con ELSOC 2016 Librerías y configuración library(dplyr) ## ## Attaching package: \u0026#39;dplyr\u0026#39; ## The following objects are masked from \u0026#39;package:stats\u0026#39;: ## ## filter, lag ## The following objects are masked from \u0026#39;package:base\u0026#39;: ## ## intersect, setdiff, setequal, union rm(list=ls()) # borrar todos los objetos en el enviorment options(scipen=999) #sin notacion cientifica Cargar base de datos  Ejemplo de ruta, debe remplazarla por la de su computador.  setwd(\u0026quot;C:/usuario/usted/multivariada/materiales/01material\u0026quot;)  # buscammos la sub carpeta ... datos/original/ELSOC_W01_v3.10.RData load(\u0026quot;data/original/ELSOC_W01_v3.10.RData\u0026quot;) elsoc \u0026lt;- elsoc_2016; remove(elsoc_2016) # load(\u0026quot;link/ELSOC_W01_v3.10.RData\u0026quot;)  Datos perdidos  En ELSOC todos los valores -888 y -999 corresponden a valores para las categorias “No sabe” y “No responde”, respectivamente. Decidimos dejarlas como valores perdidos (NA)  for (i in 1:ncol(elsoc)) { elsoc[,i][elsoc[,i] == c(-888)] \u0026lt;- NA #Missing elsoc[,i][elsoc[,i] == c(-999)] \u0026lt;- NA #Missing }   Recodificacion Variables percepcion de meritocracia  [c18_09]: “Grado de acuerdo: Las personas son recompensadas por sus esfuerzos” (1 = Totalmente en desacuerdo; 5 = Totalmente de acuerdo) [c18_10]: “Grado de acuerdo: Las personas son recompensada por su inteligencia” (1 = Totalmente en desacuerdo; 5 = Totalmente de acuerdo)  elsoc$c18_09 \u0026lt;- as.numeric(elsoc$c18_09) elsoc$c18_10 \u0026lt;- as.numeric(elsoc$c18_10) # Variables meritocracia promedio ----------------------------------------- elsoc \u0026lt;- rename(elsoc,meffort=c18_09) # cambio de nombre de la variable c18_09 a uno mas sustantivo elsoc \u0026lt;- rename(elsoc,mtalent=c18_10) # cambio de nombre de la variable c18_10 a uno mas sustantivo # creamos un indice promedio de percepcion de meritocracia usando ambas preguntas elsoc$merit \u0026lt;- (elsoc$meffort+elsoc$mtalent)/2 # re escalamos la variable de 1-5 a una de 0 a 100 (para facilitar interpretacion) elsoc$merit \u0026lt;- (elsoc$merit-min(elsoc$merit,na.rm=T))/(max(elsoc$merit,na.rm=T)-min(elsoc$merit,na.rm=T))*100  Recodificacion variable Estatus subjetivo  [d01_01]: “Estatus Social Subjetivo: Donde se ubicaria ud. en la sociedad chilena” (0 = el nivel mas bajo; 10 = el nivel mas alto)  elsoc$ess \u0026lt;- as.numeric(elsoc$d01_01) # Estatus Social Subjetivo table(elsoc$ess) summary(elsoc$ess) ## ## 0 1 2 3 4 5 6 7 8 9 10 ## 44 84 207 439 677 975 310 116 37 4 22 ## Min. 1st Qu. Median Mean 3rd Qu. Max. NA\u0026#39;s ## 0.00 3.00 5.00 4.33 5.00 10.00 12  Recodificacion variables Estatus objetivo Ingresos del hogar summary(elsoc$m29) # ingresos total ; NA == 587 ## Min. 1st Qu. Median Mean 3rd Qu. Max. NA\u0026#39;s ## 0 267500 420000 2477852 700000 4000000000 587 summary(elsoc$m30) # ingresos tramos  ## Min. 1st Qu. Median Mean 3rd Qu. Max. NA\u0026#39;s ## 1.000 3.000 6.000 7.415 11.000 20.000 2479 summary(elsoc$nhogar1) # tamannio del hogar ## Min. 1st Qu. Median Mean 3rd Qu. Max. ## 1.000 2.000 3.000 3.077 4.000 14.000 elsoc$m29[elsoc$m29==0] \u0026lt;- NA # Remplazar NA por media de categorias Ingreso -------------------------------# elsoc$mean_tramos \u0026lt;- NA # creamos una variable vacia # remplazamos ... elsoc$mean_tramos[elsoc$m30==1] \u0026lt;-110000 elsoc$mean_tramos[elsoc$m30==2] \u0026lt;-250000.5 elsoc$mean_tramos[elsoc$m30==3] \u0026lt;-305000.5 elsoc$mean_tramos[elsoc$m30==4] \u0026lt;-355000.5 elsoc$mean_tramos[elsoc$m30==5] \u0026lt;-400000.5 elsoc$mean_tramos[elsoc$m30==6] \u0026lt;-445000.5 elsoc$mean_tramos[elsoc$m30==7] \u0026lt;-490000.5 elsoc$mean_tramos[elsoc$m30==8] \u0026lt;-535000.5 elsoc$mean_tramos[elsoc$m30==9] \u0026lt;-585000.5 elsoc$mean_tramos[elsoc$m30==10]\u0026lt;-640000.5 elsoc$mean_tramos[elsoc$m30==11]\u0026lt;-700000.5 elsoc$mean_tramos[elsoc$m30==12]\u0026lt;-765000.5 elsoc$mean_tramos[elsoc$m30==13]\u0026lt;-845000.5 elsoc$mean_tramos[elsoc$m30==14]\u0026lt;-935000.5 elsoc$mean_tramos[elsoc$m30==15]\u0026lt;-1040000.5 elsoc$mean_tramos[elsoc$m30==16]\u0026lt;-1180000.5 elsoc$mean_tramos[elsoc$m30==17]\u0026lt;-1375000.5 elsoc$mean_tramos[elsoc$m30==18]\u0026lt;-1670000.5 elsoc$mean_tramos[elsoc$m30==19]\u0026lt;-2275000.5 elsoc$mean_tramos[elsoc$m30==20]\u0026lt;-3726106 table(elsoc$mean_tramos) # chequeamos ## ## 110000 250000.5 305000.5 355000.5 400000.5 445000.5 490000.5 535000.5 ## 49 42 36 35 33 33 38 21 ## 585000.5 640000.5 700000.5 765000.5 845000.5 935000.5 1040000.5 1180000.5 ## 26 16 18 15 11 14 19 13 ## 1375000.5 1670000.5 2275000.5 3726106 ## 4 10 8 7 elsoc$m29 \u0026lt;- ifelse(test = (is.na(elsoc$m29)),#¿es el valor un NA? yes = elsoc$mean_tramos, #Si es verdadero, remplazar por el valor de mean_tramos no = elsoc$m29)# Si es falso, remplazar por el valor del m29 summary(elsoc$m29) # NA = 147 ## Min. 1st Qu. Median Mean 3rd Qu. Max. NA\u0026#39;s ## 20000 280000 445000 2182986 700000 4000000000 147 # cambiamos el nombre de las variables inghogar = m29; nhogar=nhogar1 elsoc \u0026lt;- rename(elsoc, inghogar=m29, nhogar=nhogar1) # ingreso neto = ingreso del hogar / numero de personas en el hogar elsoc$ingneto \u0026lt;- as.numeric(elsoc$inghogar/elsoc$nhogar) # logaritmo natural del ingreso neto (para normalizar la distribucion sesgada del ingreso) elsoc$lningneto \u0026lt;- log(elsoc$ingneto) summary(elsoc$ingneto) ## Min. 1st Qu. Median Mean 3rd Qu. Max. NA\u0026#39;s ## 7500 95000 150000 1028152 267500 2000000000 147 summary(elsoc$lningneto) ## Min. 1st Qu. Median Mean 3rd Qu. Max. NA\u0026#39;s ## 8.923 11.462 11.918 12.006 12.497 21.416 147 #---Deciles (ingreso per capita hogar)------------------------------------------------ elsoc \u0026lt;- elsoc %\u0026gt;% mutate(inc10h = ntile(inghogar, 10)) # Crear Deciles de ingreso elsoc$D10h \u0026lt;- factor(elsoc$inc10h, levels = c(1,2,3,4,5,6,7,8,9,10), labels = c(\u0026quot;D01\u0026quot;,\u0026quot;D02\u0026quot;,\u0026quot;D03\u0026quot;,\u0026quot;D04\u0026quot;,\u0026quot;D05\u0026quot;, \u0026quot;D06\u0026quot;,\u0026quot;D07\u0026quot;,\u0026quot;D08\u0026quot;,\u0026quot;D09\u0026quot;,\u0026quot;D10\u0026quot;));table(elsoc$D10h) ## ## D01 D02 D03 D04 D05 D06 D07 D08 D09 D10 ## 278 278 278 278 278 278 278 278 278 278  Educación table(elsoc$m01) # Educacion en ELSOC ## ## 1 2 3 4 5 6 7 8 9 10 ## 37 322 297 394 857 102 381 186 303 46 Recodificación CINE 2011 (UNESCO)\n1. Sin estudios = [CINE 0 ] = 1 2. Educacion Basica o Preparatoria incompleta = [CINE 0 ] = 1 3. Educacion Basica o Preparatoria completa = [CINE 1,2 ] = 2 4. Educacion Media o Humanidades incompleta = [CINE 3 ] = 3 5. Educacion Media o Humanidades completa = [CINE 3 ] = 3 6. Tecnico Superior incompleta = [CINE 5 ] = 4 7. Tecnico Superior completa = [CINE 5 ] = 4 8. Universitaria incompleta = [CINE 6 ] = 5 9. Universitaria completa = [CINE 6 ] = 6 10. Estudios de posgrado (magister o doctorado) = [CINE 7, 8] = 6 # recodificacion usando funcion \u0026#39;recode\u0026#39; de la libreria car elsoc$edcine \u0026lt;- car::recode(elsoc$m01, \u0026quot;c(1,2)=1; c(3)=2;c(4,5)=3;c(6,7)=4;c(8,9,10)=5\u0026quot;) round(prop.table(table(elsoc$edcine)), 3) ## ## 1 2 3 4 5 ## 0.123 0.102 0.428 0.165 0.183 elsoc$edcine \u0026lt;- factor(elsoc$edcine, levels = c(1,2,3,4,5), labels=c(\u0026quot;Primaria incompleta menos\u0026quot;, \u0026quot;Primaria y secundaria baja\u0026quot;, \u0026quot;Secundaria alta\u0026quot;, \u0026quot;Terciaria ciclo corto\u0026quot;, \u0026quot;Terciaria y Postgrado\u0026quot;)) table(elsoc$edcine) #chequeamos ## ## Primaria incompleta menos Primaria y secundaria baja ## 359 297 ## Secundaria alta Terciaria ciclo corto ## 1251 483 ## Terciaria y Postgrado ## 535   Variables control #---Sexo---- elsoc$sexo \u0026lt;- car::recode(elsoc$m0_sexo, \u0026quot;1=1;2=0\u0026quot;) elsoc$sexo \u0026lt;- factor(elsoc$sexo, levels = c(0,1), labels = c(\u0026quot;Hombre\u0026quot;,\u0026quot;Mujer\u0026quot;)) # Sexo #Hombre=0 #Mujer=1 #---Edad---- elsoc$edad \u0026lt;- as.numeric(elsoc$m0_edad) #Edad #---Posicion Politica---- # PREGUNTA: \u0026quot;Autoubicacion escala izquierda-derecha\u0026quot; # (0 = izquierda; 10 = Derecha; 11 = Independiente; 12 =Ninguno) elsoc$ppolcat \u0026lt;- car::recode(elsoc$c15, \u0026quot;c(0,1,2,3,4)=1;5=2;c(6,7,8,9,10)=3;11=4;12=5\u0026quot;) elsoc$ppolcat \u0026lt;- factor(elsoc$ppolcat, levels = c(1,2,3,4,5), labels = c(\u0026quot;Izquierda/Centro Izquierda\u0026quot;, \u0026quot;Centro\u0026quot;, \u0026quot;Derecha/Centro Derecha\u0026quot;, \u0026quot;Independiente\u0026quot;, \u0026quot;Ninguno\u0026quot;))   Mantener variables relevantes # selecccionamos las variables relevantes elsoc_16 \u0026lt;- elsoc %\u0026gt;% dplyr::select(merit,ess,edcine,lningneto,D10h, sexo, edad,ppolcat) # dejamos solamente los casos con informacion completa (listwise deletion) elsoc_16 \u0026lt;- na.omit(elsoc_16) names(elsoc_16) # comprobamos los nombres de variables ## [1] \u0026quot;merit\u0026quot; \u0026quot;ess\u0026quot; \u0026quot;edcine\u0026quot; \u0026quot;lningneto\u0026quot; \u0026quot;D10h\u0026quot; \u0026quot;sexo\u0026quot; ## [7] \u0026quot;edad\u0026quot; \u0026quot;ppolcat\u0026quot; head(elsoc_16) #chequear ## merit ess edcine lningneto D10h sexo edad ppolcat ## 1 75.0 5 Primaria incompleta menos 11.22524 D03 Hombre 64 Independiente ## 2 75.0 5 Secundaria alta 12.42922 D06 Hombre 60 Ninguno ## 3 50.0 3 Secundaria alta 11.31040 D06 Hombre 26 Ninguno ## 4 75.0 6 Terciaria y Postgrado 13.54763 D08 Mujer 51 Ninguno ## 5 62.5 4 Secundaria alta 13.10216 D06 Mujer 69 Ninguno ## 6 75.0 5 Secundaria alta 13.10216 D06 Mujer 62 Independiente # Guardar base de datos procesada --------------------------------------------------------------- save(elsoc_16,file = \u0026quot;data/proc/ELSOC_ess_merit2016.RData\u0026quot;)  ","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1585881306,"objectID":"96782a7dad874126bc6358fdb483b41e","permalink":"https://multivariada.netlify.app/assignment/01material/prep-datos/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/assignment/01material/prep-datos/","section":"assignment","summary":"Presentación El Estudio Longitudinal Social de Chile (ELSOC) es una encuesta desarrollada para analizar intertemporalmente la evolución del conflicto y cohesión en la sociedad chilena.\nUno de los módulos de ELSOC es “Desigualdad y Legitimidad”. Este módulo busca estudiar las percepciones y atribuciones asociadas a las desigualdades sociales. Se ve motivado por el interés de comprender cómo las personas perciben, legitiman y reproducen las diferencias de ingresos, estatus y poder presentes en el Chile contemporáneo.","tags":null,"title":"Material 1. Procesamiento de datos en R","type":"assignment"},{"authors":null,"categories":null,"content":"  Los dos componentes centrales del curso son las clases teóricas y las actividades prácticas.\n Las clases son sesiones donde se exponen y discuten los contenidos programados. Se realizan los días Viernes 10:15-11:45\n Las prácticas consisten en un espacio de revisión de las guías de trabajo semanales. Se espera que estas prácticas sean desarrolladas de manera autónoma por cada estudiante durante la semana siguiente a la presentación de los contenidos. El apoyo al desarrollo de estas guias se realizan los días Viernes 8:30-10:00, y también en horarios excepcionales a comunicar oportunamente.\n        Clases  Prácticas y evaluaciones  Lecturas y material adicional    Marzo      Viernes 18 1. Presentación e introducción Práctica 1: Preparación de datos - Leer detalladamente programa del curso y también sobre la lógica de clases y prácticos  Viernes 25 2. Bases/Repaso - Datos y variables - Preparación y descripción - Varianza y covarianza - Correlación (descriptiva) Práctica 2: Descripción de variables - Lizon (2006) Estadística y causalidad en sociología - Moore: 1.Comprensión de los datos (1-54)  Abril      Viernes 1 3. Regresión simple I - Distribución condicional\n- Mínimos cuadrados y recta de regresión Práctica 3: Correlación y regresión - Salgado (2009) Construyendo explicaciones en sociología- Moore: 2. Análisis de relaciones (97-131)   Viernes 8 4. Regresión simple II Regresión vs correlación Residuos y ajuste general (R2) Practica 4: Residuos y ajuste - Linares (2018) Sociología y teoría social analíticas, cap. 2: La explicación en ciencias sociales - Moore: Residuos (144-154)  Viernes 15 FERIADO    Viernes 22  Evaluación 1: Regresión simple (INDIVIDUAL) 20%   Viernes 29 5. Regresión múltiple 1 - Introducción Práctica 5: Tabla de regresión múltiple y predictores categóricos - Esser 2010 Sociología de las Variables - Wooldridge (2010) Cap 3 (parcial): Análisis de regresión múltiple: estimación (68-80)  Mayo      Viernes 6 6. Regresión múltiple 2 - Coeficientes de regresión parcial - Correlación parcial y semiparcial  Práctica 6: Parcialización y control estadístico - * Wooldridge (2010) Cap 3 (parcial): Análisis de regresión múltiple: estimación (68-80)  Viernes 13 7. Regresión e inferencia - Conceptos y supuestos - Tabla ANOVA - Inferencia sobre coeficientes Práctica 7: Inferencia y reporte - Moore 7: Inferencia para medias (482-543)  Viernes 20 Semana de receso    Viernes 27  Evaluación 2 - 30%: Regresión múltiple (informe grupal) 30% - Wooldridge (2010) Cap 19: Realización de un proyecto empírico (668-694)  Junio      Viernes 3 8. Regresión logística I - Probabilidades - Odds ratios Práctica 8: Probabilidades y Odds Camarero et al (2017) Regresión logística (1-29)   Viernes 10 9. Regresión logística II - Estimación de parámetros - Inferencia - Predicción Práctica 9: Estimación logística - Camarero et al (2017) Regresión logística (30-52)  Viernes 17 10. Supuestos y chequeos de robustez - Relaciones no lineales -Transformaciones - Centrado Práctica 10: Transformación de variables y supuestos de regresión - Darlington \u0026amp; Hayes 2016 Cap16 Detecting and Managing Irregularities - Darlington \u0026amp; Hayes 2016 Cap12 Nonlinear relationships  Viernes 24 11. Repaso, pendientes y cierre de los contenidos   Wooldridge cap 6 Temas adicionales  Julio      Viernes 1  Informe 3: Regresión logística, predictores categóricos y supuestos (grupal) 50%   Viernes 7  Examen Final     ","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":-62135596800,"objectID":"de6b43595f0156798dadf2383d33a3c2","permalink":"https://multivariada.netlify.app/schedule/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/schedule/","section":"","summary":"Los dos componentes centrales del curso son las clases teóricas y las actividades prácticas.\n Las clases son sesiones donde se exponen y discuten los contenidos programados. Se realizan los días Viernes 10:15-11:45\n Las prácticas consisten en un espacio de revisión de las guías de trabajo semanales. Se espera que estas prácticas sean desarrolladas de manera autónoma por cada estudiante durante la semana siguiente a la presentación de los contenidos.","tags":null,"title":"Planificación","type":"page"},{"authors":null,"categories":null,"content":"  Los dos componentes centrales del curso son las clases teóricas y las actividades prácticas.\n Las clases son sesiones donde se exponen y discuten los contenidos programados. Se realizan los días Viernes 10:15-11:45\n Las prácticas consisten en un espacio de revisión de las guías de trabajo semanales. Se espera que estas prácticas sean desarrolladas de manera autónoma por cada estudiante durante la semana siguiente a la presentación de los contenidos. El apoyo al desarrollo de estas guias se realizan los días Viernes 8:30-10:00, y también en horarios excepcionales a comunicar oportunamente.\n        Clases  Prácticas y evaluaciones  Lecturas y material adicional    Marzo      Viernes 18 1. Presentación e introducción Práctica 1: Preparación de datos - Leer detalladamente programa del curso y también sobre la lógica de clases y prácticos  Viernes 25 2. Bases/Repaso - Datos y variables - Preparación y descripción - Varianza y covarianza - Correlación (descriptiva) Práctica 2: Descripción de variables - Lizon (2006) Estadística y causalidad en sociología - Moore: 1.Comprensión de los datos (1-54)  Abril      Viernes 1 3. Regresión simple I - Distribución condicional\n- Mínimos cuadrados y recta de regresión Práctica 3: Correlación y regresión - Salgado (2009) Construyendo explicaciones en sociología- Moore: 2. Análisis de relaciones (97-131)   Viernes 8 4. Regresión simple II Regresión vs correlación Residuos y ajuste general (R2) Practica 4: Residuos y ajuste - Linares (2018) Sociología y teoría social analíticas, cap. 2: La explicación en ciencias sociales - Moore: Residuos (144-154)  Viernes 15 FERIADO    Viernes 22  Evaluación 1: Regresión simple (INDIVIDUAL) 20%   Viernes 29 5. Regresión múltiple 1 - Introducción Práctica 5: Tabla de regresión múltiple y predictores categóricos - Esser 2010 Sociología de las Variables - Wooldridge (2010) Cap 3 (parcial): Análisis de regresión múltiple: estimación (68-80)  Mayo      Viernes 6 6. Regresión múltiple 2 - Coeficientes de regresión parcial - Correlación parcial y semiparcial  Práctica 6: Parcialización y control estadístico - * Wooldridge (2010) Cap 3 (parcial): Análisis de regresión múltiple: estimación (68-80)  Viernes 13 7. Regresión e inferencia - Conceptos y supuestos - Tabla ANOVA - Inferencia sobre coeficientes Práctica 7: Inferencia y reporte - Moore 7: Inferencia para medias (482-543)  Viernes 20 Semana de receso    Viernes 27  Evaluación 2 - 30%: Regresión múltiple (informe grupal) 30% - Wooldridge (2010) Cap 19: Realización de un proyecto empírico (668-694)  Junio      Viernes 3 8. Regresión logística I - Probabilidades - Odds ratios Práctica 8: Probabilidades y Odds Camarero et al (2017) Regresión logística (1-29)   Viernes 10 9. Regresión logística II - Estimación de parámetros - Inferencia - Predicción Práctica 9: Estimación logística - Camarero et al (2017) Regresión logística (30-52)  Viernes 17 10. Supuestos y chequeos de robustez - Relaciones no lineales -Transformaciones - Centrado Práctica 10: Transformación de variables y supuestos de regresión - Darlington \u0026amp; Hayes 2016 Cap16 Detecting and Managing Irregularities - Darlington \u0026amp; Hayes 2016 Cap12 Nonlinear relationships  Viernes 24 11. Repaso, pendientes y cierre de los contenidos   Wooldridge cap 6 Temas adicionales  Julio      Viernes 1  Informe 3: Regresión logística, predictores categóricos y supuestos (grupal) 50%   Viernes 7  Examen Final     ","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1649426952,"objectID":"3e223d7ba58b0122b42458e4cf52e04c","permalink":"https://multivariada.netlify.app/schedule/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/schedule/","section":"","summary":"Los dos componentes centrales del curso son las clases teóricas y las actividades prácticas.\n Las clases son sesiones donde se exponen y discuten los contenidos programados. Se realizan los días Viernes 10:15-11:45\n Las prácticas consisten en un espacio de revisión de las guías de trabajo semanales. Se espera que estas prácticas sean desarrolladas de manera autónoma por cada estudiante durante la semana siguiente a la presentación de los contenidos.","tags":null,"title":"Planificación","type":"page"},{"authors":null,"categories":null,"content":"   Concepto del curso Propósito general del curso Competencias a las que contribuye el curso  Sub-Competencias  Resultados de Aprendizaje Saberes / contenidos  UNIDAD 1: Introducción al modelamiento de datos sociales UNIDAD 2: Regresión Lineal Simple y Múltiple UNIDAD 3: Regresión múltiple para variables dependientes categóricas  Metodología Evaluación (detalles en pestaña Trabajos) Requisitos de aprobación Bibliografía  Textos principales. MODELOS CIENTÍFICOS (Unidad 1) MODELOS DE REGRESIÓN LINEAL (Unidad 2) MODELOS DE REGRESIÓN PARA VARIABLES CATEGÓRICAS (Unidad 3) Links \u0026amp; otras recomendaciones  Software Plataformas de comunicación y discusión VARIOS Programación de sesiones   Concepto del curso A pesar de su nombre, este no es un curso de (mera) estadística. Es un curso que enseña algunas técnicas de análisis cuantitativo orientadas al contraste empírico de teoría sociológica, para lo cual se vale de técnicas estadísticas como la regresión múltiple. En este contexto, los métodos son considerados funcionales a preocupaciones sustantivas y relevantes del mundo social.\n Además de las herramientas de análisis, el curso pone también énfasis en el reporte y comunicación de resultados. Los análisis de datos son siempre realizados en relación a otr_s, quienes tienen ser capaces de entender lo que se está presentando. Este aspecto se relaciona con tener en cuenta la relevancia y aporte del conocimiento científico en temas sociales.\n Un tercer énfasis transversal en el curso es la apertura del proceso de investigación. Para poder realizar investigación de manera eficiente y generativa es importante no “reinventar la rueda”, preocupándose de que nuestros análisis sean comprensibles para los demás (y para nosotr_s en el futuro). Por ello utilizamos programas de análisis de código abierto (como R) y promovemos que los códigos de análisis sean reproducibles.\n   Propósito general del curso Al finalizar el curso los estudiantes conocerán los fundamentos del análisis estadístico multivariado.\nSe espera que los estudiantes sean capaces de:\n identificar las principales técnicas de análisis estadístico multivariado utilizadas en la investigación sociológica\n depurar y preparar datos para la aplicación de distintas técnicas de análisis estadístico multivariado; corroborar las condiciones de aplicación de distintas técnicas de análisis estadístico multivariado\n utilizar software de análisis estadístico\n contrastar hipótesis de investigación\n elaborar reportes de resultados y conclusiones a partir de la aplicación de diferentes técnicas de análisis estadístico multivariado.\n  Complementariamente se espera que los estudiantes adquieran herramientas que les permitan comunicar resultados de investigación en contextos sociales, profesionales y académicos.\n Competencias a las que contribuye el curso  Diseñar y desarrollar estrategias de investigación social.\n Comunicar los saberes disciplinares de manera pertinente a las características de distintos contextos y audiencias, utilizando diversas estrategias y formatos.\n  Sub-Competencias  Diseñar y aplicar diversas técnicas de recolección y producción de información empírica, pertinentes al objeto de estudio.\n Interpretar información empírica aplicando diversas técnicas, en función de un plan de análisis.\n Diseñar estrategias para comunicar los saberes disciplinares considerando las características de distintos contextos y audiencias.\n Comunicar en forma oral y escrita los saberes disciplinares considerando distintos contextos y audiencias, haciendo un uso creativo de distintas estrategias.\n    Resultados de Aprendizaje Al finalizar el curso, los estudiantes:\n Serán capaces de explicar los conceptos y fundamentos teóricos y estadísticos de la investigación social basada en modelos predictivos para variables observadas y serán capaces de explicar su utilidad para la sociología.\n Serán capaces de preparar y depurar bases de datos para su análisis utilizando técnicas multivariadas, evaluando la pertinencia y la presencia de condiciones para la aplicación de modelos predictivos para variables observadas.\n Serán capaces de manejar software especializado y reportar los resultados de modelos predictivos para variables observadas cuantitativas y no cuantitativas.\n   Saberes / contenidos UNIDAD 1: Introducción al modelamiento de datos sociales  Tipos de investigación (descriptiva vs relacional y explicativa) y su materialización en el análisis estadístico. La explicación en ciencias sociales: su relación con el concepto de covariación; la explicación como dependencia robusta y como cadena causal y el trabajo con modelos. El trabajo con modelos: tipos de modelos (modelo teórico, modelo normativo, modelo científico, modelo estadístico); la vinculación entre los modelos científicos y los modelos teóricos; los modelos estadísticos como tipo de modelo científico. Ciencia abierta y modelamiento: transparencia, reproducibilidad y replicación.   UNIDAD 2: Regresión Lineal Simple y Múltiple  Bases: varianza, covarianza y correlación. Usos y aplicaciones en ciencias sociales de la regresión lineal. Supuestos y condiciones de aplicación de la regresión lineal. Manejo de casos influyentes. Procedimientos de estimación e interpretación de parámetros. Introducción de variables de control estadístico. Criterios de validez, capacidad predictiva y evaluación del ajuste de la regresión lineal. Temas avanzados de regresión lineal: introducción de predictores categóricos, estimación de efectos de interacción y mediación, y uso de herramientas gráficas como apoyo a la interpretación y análisis de datos.   UNIDAD 3: Regresión múltiple para variables dependientes categóricas  Limitaciones de la regresión lineal y potencialidades de la introducción de variables dependientes categóricas. Concepto y sentido de la función logística y funciones afines. Supuestos y condiciones de aplicación de la regresión para variables categóricas. Procedimientos de estimación e interpretación de parámetros de regresión logística. Criterios de validez, capacidad predictiva y evaluación del ajuste de la regresión Logística. Generalización de modelos de regresión logística: modelo de regresión logística multinomial y ordinal. Empleo de otras matrices de correlación (tetracórica, biserial y policórica).    Metodología En las circunstancias excepcionales de este semestre dada la crisis sanitaria, se han realizado una serie de ajustes metodológicos. En este contexto, tendremos tres espacios principales de aprendizaje:\nSesiones de clases lectivas, donde se presentarán los aspectos centrales de los contenidos correspondientes a la semana. Tanto el documento de presentación como el video de la clase se encontrará disponible en la pestaña de Contenidos de este sitio.\n Prácticos: cada tema de las sesiones se acompaña de una guía práctica de aplicación de contenidos. Estas guías están diseñadas para ser desarrolladas de manera autónoma por cada estudiante semana a semana. También serán desarrolladas y revisadas cada semana en grupos pequeños con supervisión de ayudantes para dar mayor oportunidad de participación y resolver las dudas respectivas. Existe un reporte de progreso asociado a estas guías que deberá ser completado semanalmente con fines de monitoreo y retroalimentación.\n Trabajos: se desarrollarán trabajos de investigación durante el semestre (ver sección evaluación abajo) que permitirán a l_s participantes aplicar contenidos y recibir retroalimentación de su desempeño. Los trabajos serán asesorados principalmente por ayudantes que se asignarán a cada grupo.\n   Evaluación (detalles en pestaña Trabajos) El curso tendrá tres instancias de evaluación:\n Evaluación 1 (individual): Correlación y regresión simple (20%). Evaluación 2 (trabajo grupal): Regresión multiple e inferencia estadística (30%) Evaluacion 3 (trabajo grupal): Regresión logística, predictores categóricos y supuestos (50%)  La nota ponderada de las evaluaciones equivaldrá al 60% de la nota del curso y el examen final al 40% restante.\nEn el caso de los trabajos, en caso de atraso se descontará 0.5 por día adicional. Si el trabajo no se entrega luego del tercer día de atraso será calificado con nota 1.0\nLos justificativos por ausencia o atraso se realizan en la secretaría de carrera.\n Requisitos de aprobación Nota mínima de aprobación: 4,0 (en escala de 1 a 7).\nRequisitos de eximición de examen:\ncontar con un promedio ponderado igual o superior a 5.0 no tener nota bajo 4 en ninguna de las evaluaciones  Requisitos para presentación a examen:\n Podrán presentarse al examen de primera oportunidad los estudiantes que hayan obtenido una calificación final igual o superior a 3.5.\n El examen de segunda oportunidad será para aquellos estudiantes que presenten una nota igual o inferior a 3.5 o aquellos que en el examen de primera oportunidad no hubiesen logrado una nota igual o superior a 4.0.\n   Bibliografía La bibliografía obligatoria para cada semana está disponible en la planificación del curso, desde donde se puede acceder directamente a los documentos. De todas maneras, abajo algunos textos comentados y referencias para cada unidad.\nTextos principales. Hay cuatro referencias principales recomendadas para este curso:\n Moore (2010) Estadística aplicada básica. Barcelona: Antoni Bosch. Explica de manera bastante clara (y en español) una serie de análisis estadísticos que sirven de base para este curso.\n Darlington, R. B., \u0026amp; Hayes, A. F. (2017). Regression analysis and linear models: concepts, applications, and implementation. Guilford Press. Este libro me parece un muy buen texto para acompañar un curso de regresión en ciencias sociales, lamentablemente está en inglés y por lo tanto solo es bibliografía sugerida.\n Wooldridge, J. M. (2008). Introducción a la econometría: un enfoque moderno. Paraninfo Cengage Learning. Libro clásico de regresión para economistas, la ventaja es que está en español, la desventaja (para nosotros) es que en ocasiones utiliza un lenguaje y ejemplos lejanos a la sociología.\n Wickham, H., \u0026amp; Grolemund, G. (2016). R for data science: import, tidy, transform, visualize, and model data (First edition). Sebastopol: O’Reilly. Libro con enfoque en el aprendizaje de R con técnicas que ciertamente van más allá del curso, pero muy util como referencia general. Además, está disponible también en español como “R para ciencia de datos”.\n  Abajo bibliografía recomendada para cada unidad\n MODELOS CIENTÍFICOS (Unidad 1)  García-Ferrando, M. (1985). Análisis y modelización causal en sociología. Reis, 29(1), 143-164. Goldthorpe, J. H. (2001). Causation, statistics, and sociology. European Sociological Review, 17(1), 1-20. Ramón, L., \u0026amp; Ángeles, M. (2006). Estadística y causalidad en la sociología empírica del XX. Papers: revista de sociología, 80(1), 223-255. Salgado, M. (2009). Construyendo explicaciones: el uso de modelos en sociología. Persona y Sociedad, 30 (3), 29-60.   MODELOS DE REGRESIÓN LINEAL (Unidad 2)  Etxeberria, J. (1999). Regresión múltiple. Madrid: La Muralla. Fox, J. \u0026amp; Weisberg, S. (2011) An R Companion to Applied Regression (149-183). London: Sage. Pértega-Díaz, S., \u0026amp; Pita-Fernández, S. (2000). Técnicas de regresión: Regresión lineal múltiple. Cuadernos de atención primaria, 7(3), 173-176. En: https://dialnet.unirioja.es/servlet/articulo?codigo=2331162 Pértega-Díaz, S., \u0026amp; Pita-Fernández, S. (2000). Técnicas de regresión: Regresión lineal simple. Cuadernos de atención primaria, 7(2), 91-94. En: https://dialnet.unirioja.es/servlet/articulo?codigo=2331559 Grolemund, G. \u0026amp; Wickam, H. (2017) R for Data Science. Disponible en: https://r4ds.had.co.nz/   MODELOS DE REGRESIÓN PARA VARIABLES CATEGÓRICAS (Unidad 3)  Silva LC, Barroso J. (2004). Regresión Logística. Cuaderno 27. Madrid: La Muralla. Silva LC. (1995). Excursión a la regresión logística en ciencias de la salud. Madrid: Díaz de Santos; 1995. Jovell, A.J. (1995). Análisis de regresión logística, Cuadernos Metodológicos del CIS. Madrid.   Links \u0026amp; otras recomendaciones  Econometrics with R    Software Usaremos R 4.1 a través de la interfaz de RStudio. También realizaremos ejercicios y prácticas online en RCloud.\n Plataformas de comunicación y discusión  Foros Ucursos Disqus   VARIOS  Las clases en general se acompañan de documentos de presentación, que estarán disponibles antes de la sesión en la página de Contenidos, y están desarrollados con base en Rmarkdown/XaringanRmarkdown/ Xaringan. Estos documentos no son:\n “la clase” autoexplicativos (ni aspiran a serlo) “el ppt” (ni mucho menos “la ppt”)  Políticas de participación y trato: se espera y enfatiza la participación por distintos canales disponibles. También se enfatiza un trato respetuoso y horizontal. Quienes están tomando este curso serán referidos como participantes y/o estudiantes, evitar el uso de “l_s cabr_s” o “l_s chiquill_s”. Quien no se sienta tratad_ apropiadamente o vea que otr_s no lo están siendo, se solicita reportar para solucionar la situación.\n   Programación de sesiones Visitar la página de Planificación.\n ","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1647553293,"objectID":"e4d5a4a79239f08c6ad0d7cbf1be756c","permalink":"https://multivariada.netlify.app/programa/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/programa/","section":"","summary":"Concepto del curso Propósito general del curso Competencias a las que contribuye el curso  Sub-Competencias  Resultados de Aprendizaje Saberes / contenidos  UNIDAD 1: Introducción al modelamiento de datos sociales UNIDAD 2: Regresión Lineal Simple y Múltiple UNIDAD 3: Regresión múltiple para variables dependientes categóricas  Metodología Evaluación (detalles en pestaña Trabajos) Requisitos de aprobación Bibliografía  Textos principales. MODELOS CIENTÍFICOS (Unidad 1) MODELOS DE REGRESIÓN LINEAL (Unidad 2) MODELOS DE REGRESIÓN PARA VARIABLES CATEGÓRICAS (Unidad 3) Links \u0026amp; otras recomendaciones  Software Plataformas de comunicación y discusión VARIOS Programación de sesiones   Concepto del curso A pesar de su nombre, este no es un curso de (mera) estadística.","tags":null,"title":"Programa","type":"page"},{"authors":null,"categories":null,"content":"  Required  Chapter 1 in Kieran Healy, Data Visualization [@Healy:2019] Chapters 2 and 3 in Alberto Cairo, The Truthful Art [@Cairo:2016] (skim the introduction and chapter 1)   ","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1615479945,"objectID":"57c6d6996ee98125a5375a3865ff4c4c","permalink":"https://multivariada.netlify.app/reading/01-reading/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/reading/01-reading/","section":"reading","summary":"  Required  Chapter 1 in Kieran Healy, Data Visualization [@Healy:2019] Chapters 2 and 3 in Alberto Cairo, The Truthful Art [@Cairo:2016] (skim the introduction and chapter 1)   ","tags":null,"title":"Truth, Beauty, and Data","type":"reading"}]